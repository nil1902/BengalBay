const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/home-Cwq6QgCp.js","assets/ui-CQezrcTP.js","assets/router-BoIKchTz.js","assets/vendor-Cfs_Iq82.js","assets/icons-DJh_lpvr.js","assets/card-8011F4v3.js","assets/DishCard-CvYtqu_6.js","assets/badge-DW0dkVXG.js","assets/utils-BLjywKrO.js","assets/menu-DzdlUTqb.js","assets/tabs-CHXOV11M.js","assets/dialog-O3hGq6B4.js","assets/gallery-CoEPgx3Z.js","assets/about-CEvu2vs5.js","assets/reservations-CO48WZHx.js","assets/label-tR7hQLnj.js","assets/textarea-Bcws2le_.js","assets/select-BOcBQvzF.js","assets/contact-CNdx1iQ6.js","assets/login-DFkRVTiR.js","assets/register-HafamOeg.js","assets/profile-LfTb2gNI.js","assets/checkout-BUS523jF.js","assets/NotFound-2ecoTl0M.js","assets/OrderReceipt-CKzKh7iC.js","assets/privacy-policy-BOcEbgvA.js","assets/terms-of-service-C3id9skn.js"])))=>i.map(i=>d[i]);
import{j as e,S as t,P as n,O as r,C as i,T as s,D as o,a,b as l,R as c,c as u,_ as h,d,L as f,e as p,f as m,V as g,I as y,g as v,h as E}from"./ui-CQezrcTP.js";import{r as _,u as T,c as w,d as b,L as S,e as I,f as C,B as N}from"./router-BoIKchTz.js";import{a as A,g as x,b as O,c as R}from"./vendor-Cfs_Iq82.js";import{t as D,c as L,a as M}from"./utils-BLjywKrO.js";import{S as P,T as k,M as U,P as j,U as F,X as V,a as K,C as B,b as H,c as $,d as q,e as z,F as W,I as Y,f as G}from"./icons-DJh_lpvr.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var X,Q={};const J=x(function(){if(X)return Q;X=1;var e=A();return Q.createRoot=e.createRoot,Q.hydrateRoot=e.hydrateRoot,Q}()),Z={},ee=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),i=(null==n?void 0:n.nonce)||(null==n?void 0:n.getAttribute("nonce"));r=e(t.map(e=>{if((e=function(e){return"/BengalBay/"+e}(e))in Z)return;Z[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,i&&r.setAttribute("nonce",i),document.head.appendChild(r),t?new Promise((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})},te=_.createContext(null),ne=()=>{const e=_.useContext(te);if(!e)throw new Error("useCart must be used within a CartProvider");return e},re=({children:t})=>{const[n,r]=_.useState([]),[i,s]=_.useState(0),[o,a]=_.useState(0);_.useEffect(()=>{const e=localStorage.getItem("cart");if(e)try{const t=JSON.parse(e);r(t)}catch(t){}},[]),_.useEffect(()=>{localStorage.setItem("cart",JSON.stringify(n));const e=n.reduce((e,t)=>e+t.quantity,0);s(e);const t=n.reduce((e,t)=>e+t.price*t.quantity,0);a(t)},[n]);const l=e=>{r(t=>t.filter(t=>t.id!==e))};return e.jsx(te.Provider,{value:{cartItems:n,addToCart:e=>{r(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{...e,quantity:1}])},removeFromCart:l,updateQuantity:(e,t)=>{t<=0?l(e):r(n=>n.map(n=>n.id===e?{...n,quantity:t}:n))},clearCart:()=>{r([])},cartTotal:o,cartCount:i},children:t})};function ie(...e){return D(L(e))}const se=M("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),oe=_.forwardRef(({className:n,variant:r,size:i,asChild:s=!1,...o},a)=>{const l=s?t:"button";return e.jsx(l,{className:ie(se({variant:r,size:i,className:n})),ref:a,...o})});oe.displayName="Button";var ae="horizontal",le=["horizontal","vertical"],ce=_.forwardRef((t,r)=>{const{decorative:i,orientation:s=ae,...o}=t,a=function(e){return le.includes(e)}(s)?s:ae,l=i?{role:"none"}:{"aria-orientation":"vertical"===a?a:void 0,role:"separator"};return e.jsx(n.div,{"data-orientation":a,...l,...o,ref:r})});ce.displayName="Separator";var ue=ce;const he=_.forwardRef(({className:t,orientation:n="horizontal",decorative:r=!0,...i},s)=>e.jsx(ue,{ref:s,decorative:r,orientation:n,className:ie("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",t),...i}));function de(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}he.displayName=ue.displayName;var fe=["color"],pe=_.forwardRef(function(e,t){var n=e.color,r=void 0===n?"currentColor":n,i=de(e,fe);return _.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),_.createElement("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),me=["color"],ge=_.forwardRef(function(e,t){var n=e.color,r=void 0===n?"currentColor":n,i=de(e,me);return _.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),_.createElement("path",{d:"M11.4669 3.72684C11.7558 3.91574 11.8369 4.30308 11.648 4.59198L7.39799 11.092C7.29783 11.2452 7.13556 11.3467 6.95402 11.3699C6.77247 11.3931 6.58989 11.3355 6.45446 11.2124L3.70446 8.71241C3.44905 8.48022 3.43023 8.08494 3.66242 7.82953C3.89461 7.57412 4.28989 7.55529 4.5453 7.78749L6.75292 9.79441L10.6018 3.90792C10.7907 3.61902 11.178 3.53795 11.4669 3.72684Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),ye=["color"],ve=_.forwardRef(function(e,t){var n=e.color,r=void 0===n?"currentColor":n,i=de(e,ye);return _.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),_.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Ee=["color"],_e=_.forwardRef(function(e,t){var n=e.color,r=void 0===n?"currentColor":n,i=de(e,Ee);return _.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),_.createElement("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Te=["color"],we=_.forwardRef(function(e,t){var n=e.color,r=void 0===n?"currentColor":n,i=de(e,Te);return _.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),_.createElement("path",{d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),be=["color"],Se=_.forwardRef(function(e,t){var n=e.color,r=void 0===n?"currentColor":n,i=de(e,be);return _.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),_.createElement("path",{d:"M3.13523 8.84197C3.3241 9.04343 3.64052 9.05363 3.84197 8.86477L7.5 5.43536L11.158 8.86477C11.3595 9.05363 11.6759 9.04343 11.8648 8.84197C12.0536 8.64051 12.0434 8.32409 11.842 8.13523L7.84197 4.38523C7.64964 4.20492 7.35036 4.20492 7.15803 4.38523L3.15803 8.13523C2.95657 8.32409 2.94637 8.64051 3.13523 8.84197Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))}),Ie=["color"],Ce=_.forwardRef(function(e,t){var n=e.color,r=void 0===n?"currentColor":n,i=de(e,Ie);return _.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{ref:t}),_.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});const Ne=c,Ae=u,xe=l,Oe=a,Re=_.forwardRef(({className:t,...n},i)=>e.jsx(r,{className:ie("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n,ref:i}));Re.displayName=r.displayName;const De=M("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Le=_.forwardRef(({side:t="right",className:n,children:r,...s},o)=>e.jsxs(Oe,{children:[e.jsx(Re,{}),e.jsxs(i,{ref:o,className:ie(De({side:t}),n),...s,children:[r,e.jsxs(l,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Le.displayName=i.displayName;const Me=({className:t,...n})=>e.jsx("div",{className:ie("flex flex-col space-y-2 text-center sm:text-left",t),...n});Me.displayName="SheetHeader";const Pe=({className:t,...n})=>e.jsx("div",{className:ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n});Pe.displayName="SheetFooter";const ke=_.forwardRef(({className:t,...n},r)=>e.jsx(s,{ref:r,className:ie("text-lg font-semibold text-foreground",t),...n}));ke.displayName=s.displayName;_.forwardRef(({className:t,...n},r)=>e.jsx(o,{ref:r,className:ie("text-sm text-muted-foreground",t),...n})).displayName=o.displayName;var Ue={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const je=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(je(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new Ve;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ke=function(e){return function(e){const t=je(e);return Fe.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Be=function(e){try{return Fe.decodeString(e,!0)}catch(t){}return null};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const He=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,$e=()=>{try{return He()||(()=>{if("undefined"==typeof process)return;const e=Ue.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Be(e[1]);return t&&JSON.parse(t)})()}catch(e){return}},qe=e=>{var t,n;return null===(n=null===(t=$e())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},ze=()=>{var e;return null===(e=$e())||void 0===e?void 0:e.config},We=e=>{var t;return null===(t=$e())||void 0===t?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ge(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Xe(){return!function(){var e;const t=null===(e=$e())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(n){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}class Qe extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Qe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Je.prototype.create)}}class Je{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(Ze,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new Qe(r,o,n)}}const Ze=/\{\$([^}]+)}/g;function et(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(tt(n)&&tt(s)){if(!et(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tt(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function rt(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function it(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class st{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ot),void 0===r.error&&(r.error=ot),void 0===r.complete&&(r.complete=ot);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ot(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(e){return e&&e._delegate?e._delegate:e}class lt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ye;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:ct})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e=ct){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=ct){return this.instances.has(e)}getOptions(e=ct){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===ct?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}var r;return n||null}normalizeInstanceIdentifier(e=ct){return this.component?this.component.multipleInstances?e:ct:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ht{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ut(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,ft;(ft=dt||(dt={}))[ft.DEBUG=0]="DEBUG",ft[ft.VERBOSE=1]="VERBOSE",ft[ft.INFO=2]="INFO",ft[ft.WARN=3]="WARN",ft[ft.ERROR=4]="ERROR",ft[ft.SILENT=5]="SILENT";const pt={debug:dt.DEBUG,verbose:dt.VERBOSE,info:dt.INFO,warn:dt.WARN,error:dt.ERROR,silent:dt.SILENT},mt=dt.INFO,gt={[dt.DEBUG]:"log",[dt.VERBOSE]:"log",[dt.INFO]:"info",[dt.WARN]:"warn",[dt.ERROR]:"error"},yt=(e,t,...n)=>{if(t<e.logLevel)return;(new Date).toISOString();if(!gt[t])throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class vt{constructor(e){this.name=e,this._logLevel=mt,this._logHandler=yt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?pt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,dt.DEBUG,...e),this._logHandler(this,dt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,dt.VERBOSE,...e),this._logHandler(this,dt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,dt.INFO,...e),this._logHandler(this,dt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,dt.WARN,...e),this._logHandler(this,dt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,dt.ERROR,...e),this._logHandler(this,dt.ERROR,...e)}}let Et,_t;const Tt=new WeakMap,wt=new WeakMap,bt=new WeakMap,St=new WeakMap,It=new WeakMap;let Ct={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return wt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||bt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Nt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(_t||(_t=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Ot(this),t),xt(Tt.get(this))}:function(...t){return xt(e.apply(Ot(this),t))}:function(t,...n){const r=e.call(Ot(this),t,...n);return bt.set(r,t.sort?t.sort():[t]),xt(r)}}function At(e){return"function"==typeof e?Nt(e):(e instanceof IDBTransaction&&function(e){if(wt.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});wt.set(e,t)}(e),t=e,(Et||(Et=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Ct):e);var t}function xt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(xt(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Tt.set(t,e)}).catch(()=>{}),It.set(t,e),t}(e);if(St.has(e))return St.get(e);const t=At(e);return t!==e&&(St.set(e,t),It.set(t,e)),t}const Ot=e=>It.get(e);const Rt=["get","getKey","getAll","getAllKeys","count"],Dt=["put","add","delete","clear"],Lt=new Map;function Mt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Lt.get(t))return Lt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Dt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Rt.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return Lt.set(t,s),s}Ct=(e=>({...e,get:(t,n,r)=>Mt(t,n)||e.get(t,n,r),has:(t,n)=>!!Mt(t,n)||e.has(t,n)}))(Ct);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Pt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const kt="@firebase/app",Ut="0.11.2",jt=new vt("@firebase/app"),Ft="@firebase/app-compat",Vt="@firebase/analytics-compat",Kt="@firebase/analytics",Bt="@firebase/app-check-compat",Ht="@firebase/app-check",$t="@firebase/auth",qt="@firebase/auth-compat",zt="@firebase/database",Wt="@firebase/data-connect",Yt="@firebase/database-compat",Gt="@firebase/functions",Xt="@firebase/functions-compat",Qt="@firebase/installations",Jt="@firebase/installations-compat",Zt="@firebase/messaging",en="@firebase/messaging-compat",tn="@firebase/performance",nn="@firebase/performance-compat",rn="@firebase/remote-config",sn="@firebase/remote-config-compat",on="@firebase/storage",an="@firebase/storage-compat",ln="@firebase/firestore",cn="@firebase/vertexai",un="@firebase/firestore-compat",hn="firebase",dn="[DEFAULT]",fn={[kt]:"fire-core",[Ft]:"fire-core-compat",[Kt]:"fire-analytics",[Vt]:"fire-analytics-compat",[Ht]:"fire-app-check",[Bt]:"fire-app-check-compat",[$t]:"fire-auth",[qt]:"fire-auth-compat",[zt]:"fire-rtdb",[Wt]:"fire-data-connect",[Yt]:"fire-rtdb-compat",[Gt]:"fire-fn",[Xt]:"fire-fn-compat",[Qt]:"fire-iid",[Jt]:"fire-iid-compat",[Zt]:"fire-fcm",[en]:"fire-fcm-compat",[tn]:"fire-perf",[nn]:"fire-perf-compat",[rn]:"fire-rc",[sn]:"fire-rc-compat",[on]:"fire-gcs",[an]:"fire-gcs-compat",[ln]:"fire-fst",[un]:"fire-fst-compat",[cn]:"fire-vertex","fire-js":"fire-js",[hn]:"fire-js-all"},pn=new Map,mn=new Map,gn=new Map;function yn(e,t){try{e.container.addComponent(t)}catch(n){jt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function vn(e){const t=e.name;if(gn.has(t))return jt.debug(`There were multiple attempts to register component ${t}.`),!1;gn.set(t,e);for(const n of pn.values())yn(n,e);for(const n of mn.values())yn(n,e);return!0}function En(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function _n(e){return null!=e&&void 0!==e.settings}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn=new Je("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class wn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new lt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tn.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn="11.4.0";function Sn(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const r=Object.assign({name:dn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw Tn.create("bad-app-name",{appName:String(i)});if(n||(n=ze()),!n)throw Tn.create("no-options");const s=pn.get(i);if(s){if(et(n,s.options)&&et(r,s.config))return s;throw Tn.create("duplicate-app",{appName:i})}const o=new ht(i);for(const l of gn.values())o.addComponent(l);const a=new wn(n,r,o);return pn.set(i,a),a}function In(e=dn){const t=pn.get(e);if(!t&&e===dn&&ze())return Sn();if(!t)throw Tn.create("no-app",{appName:e});return t}function Cn(e,t,n){var r;let i=null!==(r=fn[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void jt.warn(e.join(" "))}vn(new lt(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="firebase-heartbeat-store";let An=null;function xn(){return An||(An=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=xt(o);return r&&o.addEventListener("upgradeneeded",e=>{r(xt(o.result),e.oldVersion,e.newVersion,xt(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Nn)}catch(n){}}}).catch(e=>{throw Tn.create("idb-open",{originalErrorMessage:e.message})})),An}async function On(e,t){try{const n=(await xn()).transaction(Nn,"readwrite"),r=n.objectStore(Nn);await r.put(t,Rn(e)),await n.done}catch(n){if(n instanceof Qe)jt.warn(n.message);else{const e=Tn.create("idb-set",{originalErrorMessage:null==n?void 0:n.message});jt.warn(e.message)}}}function Rn(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Mn(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ln();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){jt.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ln(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Pn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Pn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Ke(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return jt.warn(t),""}}}function Ln(){return(new Date).toISOString().substring(0,10)}class Mn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"==typeof indexedDB}catch(e){return!1}}()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await xn()).transaction(Nn),n=await t.objectStore(Nn).get(Rn(e));return await t.done,n}catch(t){if(t instanceof Qe)jt.warn(t.message);else{const e=Tn.create("idb-get",{originalErrorMessage:null==t?void 0:t.message});jt.warn(e.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return On(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return On(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Pn(e){return Ke(JSON.stringify({version:2,heartbeats:e})).length}var kn;function Un(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}kn="",vn(new lt("platform-logger",e=>new Pt(e),"PRIVATE")),vn(new lt("heartbeat",e=>new Dn(e),"PRIVATE")),Cn(kt,Ut,kn),Cn(kt,Ut,"esm2017"),Cn("fire-js","");const jn=Un,Fn=new Je("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Vn=new vt("@firebase/auth");function Kn(e,...t){Vn.logLevel<=dt.ERROR&&Vn.error(`Auth (${bn}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(e,...t){throw zn(e,...t)}function Hn(e,...t){return zn(e,...t)}function $n(e,t,n){const r=Object.assign(Object.assign({},jn()),{[t]:n});return new Je("auth","Firebase",r).create(t,{appName:e.name})}function qn(e){return $n(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function zn(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Fn.create(e,...t)}function Wn(e,t,...n){if(!e)throw zn(t,...n)}function Yn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Kn(t),new Error(t)}function Gn(e,t){e||Yn(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Qn(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return"undefined"==typeof navigator||!navigator||!("onLine"in navigator)||"boolean"!=typeof navigator.onLine||"http:"!==Qn()&&"https:"!==Qn()&&!function(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}()&&!("connection"in navigator)||navigator.onLine}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Zn{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gn(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ge())||"object"==typeof navigator&&"ReactNative"===navigator.product}get(){return Jn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(e,t){Gn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void Yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void Yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void Yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},rr=new Zn(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function sr(e,t,n,r,i={}){return or(e,i,async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=nt(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},i);return"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),tr.fetch()(lr(e,e.config.apiHost,n,o),l)})}async function or(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},nr),t);try{const t=new ur(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw hr(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw hr(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw hr(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw hr(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw $n(e,a,o);Bn(e,a)}}catch(i){if(i instanceof Qe)throw i;Bn(e,"network-request-failed",{message:String(i)})}}async function ar(e,t,n,r,i={}){const s=await sr(e,t,n,r,i);return"mfaPendingCredential"in s&&Bn(e,"multi-factor-auth-required",{_serverResponse:s}),s}function lr(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?er(e.config,i):`${e.config.apiScheme}://${i}`}function cr(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ur{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Hn(this.auth,"network-request-failed")),rr.get())})}}function hr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Hn(e,t,r);return i.customData._tokenResponse=n,i}function dr(e){return void 0!==e&&void 0!==e.enterprise}class fr{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return cr(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function pr(e,t){return sr(e,"POST","/v1/accounts:lookup",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function gr(e){return 1e3*Number(e)}function yr(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Kn("JWT malformed, contained fewer than 3 sections"),null;try{const e=Be(n);return e?JSON.parse(e):(Kn("Failed to decode base64 JWT payload"),null)}catch(i){return Kn("Caught error parsing JWT payload as JSON",null==i?void 0:i.toString()),null}}function vr(e){const t=yr(e);return Wn(t,"internal-error"),Wn(void 0!==t.exp,"internal-error"),Wn(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Er(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Qe&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}class _r{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mr(this.lastLoginAt),this.creationTime=mr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wr(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Er(e,pr(n,{idToken:r}));Wn(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?br(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash||(null==a?void 0:a.length)),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Tr(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function br(e){return e.map(e=>{var{providerId:t}=e,n=h(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Sr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Wn(e.idToken,"internal-error"),Wn(void 0!==e.idToken,"internal-error"),Wn(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):vr(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Wn(0!==e.length,"internal-error");const t=vr(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return t||!this.accessToken||this.isExpired?(Wn(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await or(e,{},async()=>{const n=nt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=lr(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",tr.fetch()(s,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Sr;return n&&(Wn("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Wn("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Wn("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sr,this.toJSON())}_performRefresh(){return Yn("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(e,t){Wn("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Cr{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=h(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _r(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Tr(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Er(this,this.stsTokenManager.getToken(this.auth,e));return Wn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=at(e),r=await n.getIdToken(t),i=yr(r);Wn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"==typeof i.firebase?i.firebase:void 0,o=null==s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:mr(gr(i.auth_time)),issuedAtTime:mr(gr(i.iat)),expirationTime:mr(gr(i.exp)),signInProvider:o||null,signInSecondFactor:(null==s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=at(e);await wr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Wn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Cr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Wn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await wr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(qn(this.auth));const e=await this.getIdToken();return await Er(this,
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t){return sr(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:E,isAnonymous:_,providerData:T,stsTokenManager:w}=t;Wn(v&&w,e,"internal-error");const b=Sr.fromJSON(this.name,w);Wn("string"==typeof v,e,"internal-error"),Ir(u,e.name),Ir(h,e.name),Wn("boolean"==typeof E,e,"internal-error"),Wn("boolean"==typeof _,e,"internal-error"),Ir(d,e.name),Ir(f,e.name),Ir(p,e.name),Ir(m,e.name),Ir(g,e.name),Ir(y,e.name);const S=new Cr({uid:v,auth:e,email:h,emailVerified:E,displayName:u,isAnonymous:_,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:b,createdAt:g,lastLoginAt:y});return T&&Array.isArray(T)&&(S.providerData=T.map(e=>Object.assign({},e))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t,n=!1){const r=new Sr;r.updateFromServerResponse(t);const i=new Cr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await wr(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Wn(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?br(r.providerUserInfo):[],s=!(r.email&&r.passwordHash||(null==i?void 0:i.length)),o=new Sr;o.updateFromIdToken(n);const a=new Cr({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Tr(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash||(null==i?void 0:i.length))};return Object.assign(a,l),a}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr=new Map;function Ar(e){Gn(e instanceof Function,"Expected a class definition");let t=Nr.get(e);return t?(Gn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Nr.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xr.type="NONE";const Or=xr;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(e,t,n){return`firebase:${e}:${t}:${n}`}class Dr{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Rr(this.userKey,r.apiKey,i),this.fullPersistenceKey=Rr("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Cr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Dr(Ar(Or),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Ar(Or);const s=Rr(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Cr._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new Dr(i,e,n)):new Dr(i,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ur(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Mr(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Fr(t))return"Blackberry";if(Vr(t))return"Webos";if(Pr(t))return"Safari";if((t.includes("chrome/")||kr(t))&&!t.includes("edge/"))return"Chrome";if(jr(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Mr(e=Ge()){return/firefox\//i.test(e)}function Pr(e=Ge()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function kr(e=Ge()){return/crios\//i.test(e)}function Ur(e=Ge()){return/iemobile/i.test(e)}function jr(e=Ge()){return/android/i.test(e)}function Fr(e=Ge()){return/blackberry/i.test(e)}function Vr(e=Ge()){return/webos/i.test(e)}function Kr(e=Ge()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Br(){return function(){const e=Ge();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Hr(e=Ge()){return Kr(e)||jr(e)||Vr(e)||Fr(e)||/windows phone/i.test(e)||Ur(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(e,t=[]){let n;switch(e){case"Browser":n=Lr(Ge());break;case"Worker":n=`${Lr(Ge())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${bn}/${r}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==n?void 0:n.message})}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gr(this),this.idTokenSubscription=new Gr(this),this.beforeStateQueue=new qr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Fn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ar(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Dr.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await pr(this,{idToken:e}),n=await Cr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(_n(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Wn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wr(e)}catch(t){if("auth/network-request-failed"!==(null==t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(qn(this));const t=e?at(e):null;return t&&Wn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Wn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(qn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(qn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ar(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return sr(e,"GET","/v2/passwordPolicy",ir(e,t))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this),t=new zr(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Je("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return sr(e,"POST","/v2/accounts:revokeToken",ir(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ar(e)||this._popupRedirectResolver;Wn(t,this,"argument-error"),this.redirectPersistenceManager=await Dr.create(this,[Ar(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Wn(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Wn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=$r(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(_n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){Vn.logLevel<=dt.WARN&&Vn.warn(`Auth (${bn}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function Yr(e){return at(e)}class Gr{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new st(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Wn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xr={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Qr(e){return Xr.loadJS(e)}class Jr{constructor(){this.enterprise=new Zr}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Zr{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const ei="NO_RECAPTCHA";class ti{constructor(e){this.type="recaptcha-enterprise",this.auth=Yr(e)}async verify(e="verify",t=!1){async function n(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{(async function(e,t){return sr(e,"GET","/v2/recaptchaConfig",ir(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new fr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})}function r(t,n,r){const i=window.grecaptcha;dr(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(ei)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Jr).execute("siteKey",{action:"verify"})}return new Promise((e,i)=>{n(this.auth).then(n=>{if(!t&&dr(window.grecaptcha))r(n,e,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=Xr.recaptchaEnterpriseScript;0!==t.length&&(t+=n),Qr(t).then(()=>{r(n,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function ni(e,t,n,r=!1,i=!1){const s=new ti(e);let o;if(i)o=ei;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ri(e,t,n,r,i){var s;if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ni(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){const i=await ni(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(e,t,n){const r=Yr(e);Wn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=si(t),{host:s,port:o}=function(e){const t=si(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:oi(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:oi(t)}}}(t),a={url:`${i}//${s}${null===o?"":`:${o}`}/`},l=Object.freeze({host:s,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:!1})});if(!r._canInitEmulator)return Wn(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Wn(et(a,r.config.emulator)&&et(l,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=a,r.emulatorConfig=l,r.settings.appVerificationDisabledForTesting=!0,function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&console.info;"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function si(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function oi(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ai{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Yn("not implemented")}_getIdTokenResponse(e){return Yn("not implemented")}_linkToIdToken(e,t){return Yn("not implemented")}_getReauthenticationResolver(e){return Yn("not implemented")}}async function li(e,t){return sr(e,"POST","/v1/accounts:signUp",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ci(e,t){return ar(e,"POST","/v1/accounts:signInWithPassword",ir(e,t))}async function ui(e,t){return async function(e,t){return sr(e,"POST","/v1/accounts:sendOobCode",ir(e,t))}(e,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class hi extends ai{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new hi(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new hi(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ri(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ci);case"emailLink":return async function(e,t){return ar(e,"POST","/v1/accounts:signInWithEmailLink",ir(e,t))}(e,{email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ri(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",li);case"emailLink":return async function(e,t){return ar(e,"POST","/v1/accounts:signInWithEmailLink",ir(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function di(e,t){return ar(e,"POST","/v1/accounts:signInWithIdp",ir(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends ai{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Bn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=h(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new fi(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return di(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,di(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,di(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=nt(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){var t,n,r,i,s,o;const a=rt(it(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Wn(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=rt(it(e)).link,n=t?rt(it(t)).deep_link_id:null,r=rt(it(e)).deep_link_id;return(r?rt(it(r)).link:null)||r||n||t||e}(e);try{return new pi(t)}catch(n){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(){this.providerId=mi.PROVIDER_ID}static credential(e,t){return hi._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=pi.parseLink(t);return Wn(n,"argument-error"),hi._fromEmailAndCode(e,n.code,n.tenantId)}}mi.PROVIDER_ID="password",mi.EMAIL_PASSWORD_SIGN_IN_METHOD="password",mi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class gi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends gi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi extends yi{constructor(){super("facebook.com")}static credential(e){return fi._fromParams({providerId:vi.PROVIDER_ID,signInMethod:vi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vi.credentialFromTaggedObject(e)}static credentialFromError(e){return vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return vi.credential(e.oauthAccessToken)}catch(t){return null}}}vi.FACEBOOK_SIGN_IN_METHOD="facebook.com",vi.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ei extends yi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return fi._fromParams({providerId:Ei.PROVIDER_ID,signInMethod:Ei.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ei.credentialFromTaggedObject(e)}static credentialFromError(e){return Ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ei.credential(t,n)}catch(r){return null}}}Ei.GOOGLE_SIGN_IN_METHOD="google.com",Ei.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class _i extends yi{constructor(){super("github.com")}static credential(e){return fi._fromParams({providerId:_i.PROVIDER_ID,signInMethod:_i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _i.credentialFromTaggedObject(e)}static credentialFromError(e){return _i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return _i.credential(e.oauthAccessToken)}catch(t){return null}}}_i.GITHUB_SIGN_IN_METHOD="github.com",_i.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ti extends yi{constructor(){super("twitter.com")}static credential(e,t){return fi._fromParams({providerId:Ti.PROVIDER_ID,signInMethod:Ti.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ti.credentialFromTaggedObject(e)}static credentialFromError(e){return Ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Ti.credential(t,n)}catch(r){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function wi(e,t){return ar(e,"POST","/v1/accounts:signUp",ir(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ti.TWITTER_SIGN_IN_METHOD="twitter.com",Ti.PROVIDER_ID="twitter.com";class bi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await Cr._fromIdTokenResponse(e,n,r),s=Si(n);return new bi({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Si(n);return new bi({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Si(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends Qe{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ii.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ii(e,t,n,r)}}function Ci(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Ii._fromErrorAndOperation(e,n,t,r);throw n})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Ni(e,t,n=!1){if(_n(e.app))return Promise.reject(qn(e));const r="signIn",i=await Ci(e,r,t),s=await bi._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Ai(e){const t=Yr(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function xi(e,t,n){return _n(e.app)?Promise.reject(qn(e)):async function(e,t){return Ni(Yr(e),t)}(at(e),mi.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Ai(e),t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Oi(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=at(e),i={idToken:await r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},s=await Er(r,async function(e,t){return sr(e,"POST","/v1/accounts:update",t)}(r.auth,i));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const o=r.providerData.find(({providerId:e})=>"password"===e);o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}const Ri="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ri,"1"),this.storage.removeItem(Ri),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends Di{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Hr(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Br()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Li.type="LOCAL";const Mi=Li;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Di{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Pi.type="SESSION";const ki=Pi;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ui{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Ui(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ji(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ui.receivers=[];class Fi{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=ji("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ki(){return void 0!==Vi().WorkerGlobalScope&&"function"==typeof Vi().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Bi="firebaseLocalStorageDb",Hi="firebaseLocalStorage",$i="fbase_key";class qi{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function zi(e,t){return e.transaction([Hi],t?"readwrite":"readonly").objectStore(Hi)}function Wi(){const e=indexedDB.open(Bi,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Hi,{keyPath:$i})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Hi)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Bi);return new qi(e).toPromise()}(),t(await Wi()))})})}async function Yi(e,t,n){const r=zi(e,!0).put({[$i]:t,value:n});return new qi(r).toPromise()}function Gi(e,t){const n=zi(e,!0).delete(t);return new qi(n).toPromise()}class Xi{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Wi()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ki()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ui._getInstance(Ki()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Fi(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wi();return await Yi(e,Ri,"1"),await Gi(e,Ri),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yi(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=zi(e,!1).get(t),r=await new qi(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Gi(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=zi(e,!1).getAll();return new qi(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Xi.type="LOCAL";const Qi=Xi;new Zn(3e4,6e4);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ji extends ai{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return di(e,this._buildIdpRequest())}_linkToIdToken(e,t){return di(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return di(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Zi(e){return Ni(e.auth,new Ji(e),e.bypassAuthState)}function es(e){const{auth:t,user:n}=e;return Wn(n,t,"internal-error"),
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t,n=!1){const{auth:r}=e;if(_n(r.app))return Promise.reject(qn(r));const i="reauthenticate";try{const s=await Er(e,Ci(r,i,t,e),n);Wn(s.idToken,r,"internal-error");const o=yr(s.idToken);Wn(o,r,"internal-error");const{sub:a}=o;return Wn(e.uid===a,r,"user-mismatch"),bi._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&Bn(r,"user-mismatch"),s}}(n,new Ji(e),e.bypassAuthState)}async function ts(e){const{auth:t,user:n}=e;return Wn(n,t,"internal-error"),async function(e,t,n=!1){const r=await Er(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return bi._forOperation(e,"link",r)}(n,new Ji(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Zi;case"linkViaPopup":case"linkViaRedirect":return ts;case"reauthViaPopup":case"reauthViaRedirect":return es;default:Bn(this.auth,"internal-error")}}resolve(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs=new Zn(2e3,1e4);class is extends ns{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,is.currentPopupAction&&is.currentPopupAction.cancel(),is.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Wn(e,this.auth,"internal-error"),e}async onExecution(){Gn(1===this.filter.length,"Popup operations only handle one event");const e=ji();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,is.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hn(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,rs.get())};e()}}is.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ss="pendingRedirect",os=new Map;class as extends ns{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=os.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Rr(ss,e.config.apiKey,e.name)}(t),r=function(e){return Ar(e._redirectPersistence)}(e);if(!(await r._isAvailable()))return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}os.set(this.auth._key(),e)}return this.bypassAuthState||os.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ls(e,t){os.set(e._key(),t)}async function cs(e,t,n=!1){if(_n(e.app))return Promise.reject(qn(e));const r=Yr(e),i=
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t){return t?Ar(t):(Wn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(r,t),s=new as(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ds(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!ds(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Hn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(hs(e))}saveEventToCache(e){this.cachedEventUids.add(hs(e)),this.lastProcessedEventTime=Date.now()}}function hs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function ds({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const fs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ps=/^https?/;async function ms(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return sr(e,"GET","/v1/projects",t)}(e);for(const r of t)try{if(gs(r))return}catch(n){}Bn(e,"unauthorized-domain")}function gs(e){const t=Xn(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ps.test(n))return!1;if(fs.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new Zn(3e4,6e4);function vs(){const e=Vi().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Es(e){return new Promise((t,n)=>{var r,i,s;function o(){vs(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{vs(),n(Hn(e,"network-request-failed"))},timeout:ys.get()})}if(null===(i=null===(r=Vi().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Vi().gapi)||void 0===s?void 0:s.load)){const t=`__${"iframefcb"}${Math.floor(1e6*Math.random())}`;return Vi()[t]=()=>{gapi.load?o():n(Hn(e,"network-request-failed"))},Qr(`${Xr.gapiScript}?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw _s=null,e})}let _s=null;
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ts=new Zn(5e3,15e3),ws={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ss(e){const t=e.config;Wn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?er(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:bn},i=bs.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${nt(r).slice(1)}`}async function Is(e){const t=await function(e){return _s=_s||Es(e),_s}(e),n=Vi().gapi;return Wn(n,e,"internal-error"),t.open({where:document.body,url:Ss(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ws,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Hn(e,"network-request-failed"),s=Vi().setTimeout(()=>{r(i)},Ts.get());function o(){Vi().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ns{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function As(e,t,n,r=500,i=600){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Cs),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Ge().toLowerCase();n&&(a=kr(c)?"_blank":n),Mr(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=Ge()){var t;return Kr(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",a),new Ns(null);const h=window.open(t||"",a,u);Wn(h,e,"popup-blocked");try{h.focus()}catch(d){}return new Ns(h)}const xs="__/auth/handler",Os="emulator/auth/handler",Rs=encodeURIComponent("fac");async function Ds(e,t,n,r,i,s){Wn(e.config.authDomain,e,"auth-domain-config-required"),Wn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:bn,eventId:i};if(t instanceof gi){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries({}))o[e]=t}if(t instanceof yi){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${Rs}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/${xs}`;return er(e,Os)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${nt(a).slice(1)}${c}`}const Ls="webStorageSupport";const Ms=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ki,this._completeRedirectFn=cs,this._overrideRedirectResult=ls}async _openPopup(e,t,n,r){var i;Gn(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return As(e,await Ds(e,t,n,Xn(),r),ji())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Vi().location.href=e}(await Ds(e,t,n,Xn(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Gn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Is(e),n=new us(e);return t.register("authEvent",t=>{Wn(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ls,{type:Ls},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[Ls];void 0!==i&&t(!!i),Bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ms(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Hr()||Pr()||Kr()}};var Ps="@firebase/auth",ks="1.9.1";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Us{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Wn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const js=We("authIdTokenMaxAge")||300;let Fs=null;var Vs;Xr={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Hn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Vs="Browser",vn(new lt("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;Wn(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:Vs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:$r(Vs)},l=new Wr(n,r,i,a);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ar);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),vn(new lt("auth-internal",e=>{const t=Yr(e.getProvider("auth").getImmediate());return new Us(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cn(Ps,ks,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Vs)),Cn(Ps,ks,"esm2017");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Cn("firebase","11.4.0","app");var Ks,Bs,Hs="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e;
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Bs=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},Ks=r}).apply(void 0!==Hs?Hs:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var $s,qs,zs,Ws,Ys,Gs,Xs,Qs,Js="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};
/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Js&&Js];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});
/** @license
  
   Copyright The Closure Library Authors.
   SPDX-License-Identifier: Apache-2.0
  */
var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=!(-1==m().indexOf("Gecko")||-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge")||-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE")||-1!=m().indexOf("Edge"));function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function E(e){const t={};for(const n in e)t[n]=e[n];return t}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<_.length;t++)n=_[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function w(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function b(e){i.setTimeout(()=>{throw e},0)}function S(){var e=x;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var I=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new C,e=>e.reset());class C{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let N,A=!1,x=new class{constructor(){this.h=this.g=null}add(e,t){const n=I.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},O=()=>{const e=i.Promise.resolve(void 0);N=()=>{e.then(R)}};var R=()=>{for(var e;e=S();){try{e.h.call(e.g)}catch(n){b(n)}var t=I;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}A=!1};function D(){this.s=this.s,this.C=this.C}function L(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},L.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function P(e,t){if(L.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:k[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&P.aa.h.call(this)}}h(P,L);var k={2:"touch",3:"pen",4:"mouse"};P.prototype.h=function(){P.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var U="closure_listenable_"+(1e6*Math.random()|0),j=0;function F(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++j,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function K(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function H(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}K.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=H(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new F(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var $="closure_lm_"+(1e6*Math.random()|0),q={};function z(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)z(e,t[s],n,r,i);return null}return n=Z(n),e&&e[U]?e.K(t,n,!!o(r)&&!!r.capture,i):function(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Q(e);if(l||(e[$]=l=new K(e)),n=l.add(t,n,r,a,s),n.proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=X;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)M||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(G(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}(e,t,n,!1,r,i)}function W(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=Z(n),e&&e[U]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=H(s=e.g[t],n,r,i))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=H(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[U])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(G(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(B(n,e),0==n.h&&(n.src=null,t[$]=null)):V(e)}}}function G(e){return e in q?q[e]:q[e]="on"+e}function X(e,t){if(e.da)e=!0;else{t=new P(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Q(e){return(e=e[$])instanceof K?e:null}var J="__closure_events_fn_"+(1e9*Math.random()>>>0);function Z(e){return"function"==typeof e?e:(e[J]||(e[J]=function(t){return e.handleEvent(t)}),e[J])}function ee(){D.call(this),this.i=new K(this),this.M=this,this.F=null}function te(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"==typeof t)t=new L(t,e);else if(t instanceof L)t.target=t.target||e;else{var i=t;T(t=new L(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ne(o,r,!0,t)&&i}if(i=ne(o=t.g=e,r,!0,t)&&i,i=ne(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ne(o=t.g=n[s],r,!1,t)&&i}function ne(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&B(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function re(e,t,n){if("function"==typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ie(e){e.g=re(()=>{e.g=null,e.i&&(e.i=!1,ie(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ee,D),ee.prototype[U]=!0,ee.prototype.removeEventListener=function(e,t,n,r){W(this,e,t,n,r)},ee.prototype.N=function(){if(ee.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ee.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ee.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class se extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ie(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function oe(e){D.call(this),this.h=e,this.g={}}h(oe,D);var ae=[];function le(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}oe.prototype.N=function(){oe.aa.N.call(this),le(this)},oe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=i.JSON.stringify,ue=i.JSON.parse,he=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function de(){}function fe(e){return e.h||(e.h=e.i())}function pe(){}de.prototype.h=null;var me={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ge(){L.call(this,"d")}function ye(){L.call(this,"c")}h(ge,L),h(ye,L);var ve={},Ee=null;function _e(){return Ee=Ee||new ee}function Te(e){L.call(this,ve.La,e)}function we(e){const t=_e();te(t,new Te(t))}function be(e,t){L.call(this,ve.STAT_EVENT,e),this.stat=t}function Se(e){const t=_e();te(t,new be(t,e))}function Ie(e,t){L.call(this,ve.Ma,e),this.size=t}function Ce(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ne(){this.g=!0}function Ae(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return ce(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}ve.La="serverreachability",h(Te,L),ve.STAT_EVENT="statevent",h(be,L),ve.Ma="timingevent",h(Ie,L),Ne.prototype.xa=function(){this.g=!1},Ne.prototype.info=function(){};var xe,Oe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Le(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new oe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Me}function Me(){this.i=null,this.g="",this.h=!1}h(De,de),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},xe=new De;var Pe={},ke={};function Ue(e,t,n){e.L=1,e.v=ct(it(t)),e.m=n,e.P=!0,je(e,null)}function je(e,t){e.F=Date.now(),Ke(e),e.A=it(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),wt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Me,e.g=un(e.j,n?t:null,!e.m),0<e.O&&(e.M=new se(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ae[0]=i.toString()),i=ae);for(var s=0;s<i.length;s++){var o=z(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?E(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),we(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Fe(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ve(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ke:(n=Number(t.substring(n,r)),isNaN(n)?Pe:(r+=1)+n>t.length?ke:(t=t.slice(r,r+n),e.C=r+n,t))}function Ke(e){e.S=Date.now()+e.I,Be(e,e.I)}function Be(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function $e(e){0==e.j.G||e.J||sn(e.j,e)}function qe(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,le(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function ze(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Qe(n.h,e)))if(!e.K&&Qe(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;rn(n),Wt(n)}en(n),Se(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=Xe(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else an(n,11)}else if((e.K||n.g==e)&&rn(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Je(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,lt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=cn(r,r.J?r.ia:null,r.W),o.K){Ze(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(He(a),Ke(a)),r.g=o}else Zt(r);0<n.i.length&&Gt(n)}else"stop"!=c[0]&&"close"!=c[0]||an(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?an(n,7):zt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}we()}catch(u){}}Le.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Bt(e)?t.j():this.Y(e)},Le.prototype.Y=function(e){try{if(e==this.g)e:{const d=Bt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Ht(this.g)))){this.J||4!=d||7==t||we(),He(this);var n=this.g.Z();this.X=n;t:if(Fe(this)){var r=Ht(this.g);e="";var s=r.length,o=4==Bt(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){qe(this),$e(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Se(12),qe(this),$e(this);break e}Ae(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ze(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Ve(this,a),e==ke){4==d&&(this.s=4,Se(14),n=!1),Ae(this.i,this.l,null,"[Incomplete Response]");break}if(e==Pe){this.s=4,Se(15),Ae(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ae(this.i,this.l,e,null),ze(this,e)}if(Fe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Se(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),tn(h),h.M=!0,Se(11))}}else Ae(this.i,this.l,a,"[Invalid Chunked Response]"),qe(this),$e(this)}else Ae(this.i,this.l,a,null),ze(this,a);4==d&&qe(this),this.o&&!this.J&&(4==d?sn(this.j,this):(this.o=!1,Ke(this)))}else(function(e){const t={};e=(e.g&&2<=Bt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=w(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),qe(this),$e(this)}}}catch(d){}},Le.prototype.cancel=function(){this.J=!0,qe(this)},Le.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(we(),Se(17)),qe(this),this.s=2,$e(this)):Be(this,this.S-e)};var We=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ge(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Xe(e){return e.h?1:e.g?e.g.size:0}function Qe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Je(e,t){e.g?e.g.add(t):e.h=t}function Ze(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function et(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function tt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(s(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Ye.prototype.cancel=function(){if(this.i=et(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var nt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof rt){this.h=e.h,st(this,e.j),this.o=e.o,this.g=e.g,ot(this,e.s),this.l=e.l;var t=e.i,n=new vt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),at(this,n),this.m=e.m}else e&&(t=String(e).match(nt))?(this.h=!1,st(this,t[1]||"",!0),this.o=ut(t[2]||""),this.g=ut(t[3]||"",!0),ot(this,t[4]),this.l=ut(t[5]||"",!0),at(this,t[6]||"",!0),this.m=ut(t[7]||"")):(this.h=!1,this.i=new vt(null,this.h))}function it(e){return new rt(e)}function st(e,t,n){e.j=n?ut(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ot(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function at(e,t,n){t instanceof vt?(e.i=t,function(e,t){t&&!e.j&&(Et(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(_t(this,t),wt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ht(t,gt)),e.i=new vt(t,e.h))}function lt(e,t,n){e.i.set(t,n)}function ct(e){return lt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ut(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ht(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,dt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function dt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}rt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ht(t,ft,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ht(t,ft,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ht(n,"/"==n.charAt(0)?mt:pt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ht(n,yt)),e.join("")};var ft=/[#\/\?@]/g,pt=/[#\?:]/g,mt=/[#\?]/g,gt=/[#\?@]/g,yt=/#/g;function vt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Et(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function _t(e,t){Et(e),t=bt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Tt(e,t){return Et(e),t=bt(e,t),e.g.has(t)}function wt(e,t,n){_t(e,t),0<n.length&&(e.i=null,e.g.set(bt(e,t),d(n)),e.h+=n.length)}function bt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function It(){this.g=new he}function Ct(e,t,n){const r=n||"";try{tt(e,function(e,n){let i=e;o(e)&&(i=ce(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Nt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ee.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function xt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ot(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Rt(e)}function Rt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Dt(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Dt(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):lt(e,t,n))}function Mt(e){ee.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=vt.prototype).add=function(e,t){Et(this),this.i=null,e=bt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Et(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Et(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Et(this);let t=[];if("string"==typeof e)Tt(this,e)&&(t=t.concat(this.g.get(bt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Et(this),this.i=null,Tt(this,e=bt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Nt,de),Nt.prototype.g=function(){return new At(this.l,this.j)},Nt.prototype.i=function(e){return function(){return e}}({}),h(At,ee),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Rt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ot(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Rt(this)),this.g&&(this.readyState=3,Rt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(void 0!==i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ot(this):Rt(this),3==this.readyState&&xt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ot(this))},e.Qa=function(e){this.g&&(this.response=e,Ot(this))},e.ga=function(){this.g&&Ot(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Mt,ee);var Pt=/^https?$/i,kt=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,jt(e),Vt(e)}function jt(e){e.A||(e.A=!0,te(e,"complete"),te(e,"error"))}function Ft(e){if(e.h&&void 0!==r&&(!e.v[1]||4!=Bt(e)||2!=e.Z()))if(e.u&&4==Bt(e))re(e.Ea,0,e);else if(te(e,"readystatechange"),4==Bt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(nt)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Pt.test(o?o.toLowerCase():"")}n=s}if(n)te(e,"complete"),te(e,"success");else{e.m=6;try{var a=2<Bt(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",jt(e)}}finally{Vt(e)}}}function Vt(e,t){if(e.g){Kt(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||te(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Kt(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Bt(e){return e.g?e.g.readyState:0}function Ht(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function $t(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function qt(e){this.Aa=0,this.i=[],this.j=new Ne,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$t("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$t("baseRetryDelayMs",5e3,e),this.cb=$t("retryDelaySeedMs",1e4,e),this.Wa=$t("forwardChannelMaxRetries",2,e),this.wa=$t("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new It,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function zt(e){if(Yt(e),3==e.G){var t=e.U++,n=it(e.I);if(lt(n,"SID",e.K),lt(n,"RID",t),lt(n,"TYPE","terminate"),Qt(e,n),(t=new Le(e,e.j,t)).L=2,t.v=ct(it(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=un(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ke(t)}ln(e)}function Wt(e){e.g&&(tn(e),e.g.cancel(),e.g=null)}function Yt(e){Wt(e),e.u&&(i.clearTimeout(e.u),e.u=null),rn(e),e.h.cancel(),e.s&&("number"==typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Gt(e){if(!Ge(e.h)&&!e.s){e.s=!0;var t=e.Ga;N||O(),A||(N(),A=!0),x.add(t,e),e.B=0}}function Xt(e,t){var n;n=t?t.l:e.U++;const r=it(e.I);lt(r,"SID",e.K),lt(r,"RID",n),lt(r,"AID",e.T),Qt(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Le(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=Jt(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),Je(e.h,n),Ue(n,r,t)}function Qt(e,t){e.H&&v(e.H,function(e,n){lt(t,n,e)}),e.l&&tt({},function(e,n){lt(t,n,e)})}function Jt(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{Ct(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function Zt(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;N||O(),A||(N(),A=!0),x.add(t,e),e.v=0}}function en(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),on(e,e.v)),e.v++,!0)}function tn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function nn(e){e.g=new Le(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=it(e.qa);lt(t,"RID","rpc"),lt(t,"SID",e.K),lt(t,"AID",e.T),lt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&lt(t,"TO",e.ja),lt(t,"TYPE","xmlhttp"),Qt(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ct(it(t)),n.m=null,n.P=!0,je(n,e)}function rn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function sn(e,t){var n=null;if(e.g==t){rn(e),tn(e),e.g=null;var r=2}else{if(!Qe(e.h,t))return;n=t.D,Ze(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;te(r=_e(),new Ie(r,n)),Gt(e)}else Zt(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Xe(e.h)>=e.h.j-(e.s?1:0)||(e.s?(e.i=t.D.concat(e.i),0):1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa)||(e.s=Ce(c(e.Ga,e,t),on(e,e.B)),e.B++,0)))}(e,t)||2==r&&en(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:an(e,5);break;case 4:an(e,10);break;case 3:an(e,6);break;default:an(e,2)}}function on(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function an(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new rt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||st(r,"https"),ct(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=u(St,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(St,n,"TestLoadImage: error",!1,t,r),r.onabort=u(St,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(St,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout(()=>{n.abort(),St(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)}).catch(()=>{clearTimeout(r),St(0,0,!1,t)})}(r.toString(),n)}else Se(2);e.G=0,e.l&&e.l.sa(t),ln(e),Yt(e)}function ln(e){if(e.G=0,e.ka=[],e.l){const t=et(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function cn(e,t,n){var r=n instanceof rt?it(n):new rt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ot(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new rt(null);r&&st(o,r),t&&(o.g=t),s&&ot(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&lt(r,n,t),lt(r,"VER",e.la),Qt(e,r),r}function un(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new Nt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function hn(){}function dn(){}function fn(e,t){ee.call(this),this.g=new qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new gn(this)}function pn(e){ge.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function mn(){ye.call(this),this.status=1}function gn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xe.g(),this.v=this.o?fe(this.o):fe(xe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Ut(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(kt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Kt(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Ut(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,te(this,"complete"),te(this,"abort"),Vt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Vt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ft(this):this.bb())},e.bb=function(){Ft(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Bt(this)?this.g.status:-1}catch(e){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ue(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(e=qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Se(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=cn(this,null,this.W),Gt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Le(this,this.j,e);let s=this.o;if(this.S&&(s?(s=E(s),T(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Jt(this,i,t),lt(n=it(this.I),"RID",e),lt(n,"CVER",22),this.D&&lt(n,"X-HTTP-Session-Id",this.D),Qt(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Dt(s)))+"&"+t:this.m&&Lt(n,this.m,s)),Je(this.h,i),this.Ua&&lt(n,"TYPE","init"),this.P?(lt(n,"$req",t),lt(n,"SID","null"),i.T=!0,Ue(i,n,null)):Ue(i,n,t),this.G=2}}else 3==this.G&&(e?Xt(this,e):0==this.i.length||Ge(this.h)||Xt(this))},e.Fa=function(){if(this.u=null,nn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),Wt(this),nn(this))},e.Za=function(){null!=this.C&&(this.C=null,Wt(this),en(this),Se(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=hn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},dn.prototype.g=function(e,t){return new fn(e,t)},h(fn,ee),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){zt(this.g)},fn.prototype.o=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ce(e),e=n);t.i.push(new We(t.Ya++,e)),3==t.G&&Gt(t)},fn.prototype.N=function(){this.g.l=null,delete this.j,zt(this.g),delete this.g,fn.aa.N.call(this)},h(pn,ge),h(mn,ye),h(gn,hn),gn.prototype.ua=function(){te(this.g,"a")},gn.prototype.ta=function(e){te(this.g,new pn(e))},gn.prototype.sa=function(e){te(this.g,new mn)},gn.prototype.ra=function(){te(this.g,"b")},dn.prototype.createWebChannel=dn.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Qs=function(){return new dn},Xs=function(){return _e()},Gs=ve,Ys={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oe.NO_ERROR=0,Oe.TIMEOUT=8,Oe.HTTP_ERROR=6,Ws=Oe,Re.COMPLETE="complete",zs=Re,pe.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",ee.prototype.listen=ee.prototype.K,qs=pe,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,$s=Mt}).apply(void 0!==Js?Js:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});const Zs="@firebase/firestore",eo="4.7.9";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}to.UNAUTHENTICATED=new to(null),to.GOOGLE_CREDENTIALS=new to("google-credentials-uid"),to.FIRST_PARTY=new to("first-party-uid"),to.MOCK_USER=new to("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let no="11.4.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new vt("@firebase/firestore");function io(){return ro.logLevel}function so(e,...t){if(ro.logLevel<=dt.DEBUG){const n=t.map(lo);ro.debug(`Firestore (${no}): ${e}`,...n)}}function oo(e,...t){if(ro.logLevel<=dt.ERROR){const n=t.map(lo);ro.error(`Firestore (${no}): ${e}`,...n)}}function ao(e,...t){if(ro.logLevel<=dt.WARN){const n=t.map(lo);ro.warn(`Firestore (${no}): ${e}`,...n)}}function lo(e){if("string"==typeof e)return e;try{
/**
    * @license
    * Copyright 2020 Google LLC
    *
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    *   http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    */
return t=e,JSON.stringify(t)}catch(n){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(e="Unexpected state"){const t=`FIRESTORE (${no}) INTERNAL ASSERTION FAILED: `+e;throw oo(t),new Error(t)}function uo(e,t){e||co()}function ho(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class po extends Qe{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(to.UNAUTHENTICATED))}shutdown(){}}class vo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Eo{constructor(e){this.t=e,this.currentUser=to.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){uo(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new mo;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new mo,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{so("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(so("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new mo)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(so("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(uo("string"==typeof t.accessToken),new go(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return uo(null===e||"string"==typeof e),new to(e)}}class _o{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=to.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class To{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new _o(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(to.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bo{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,_n(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){uo(void 0===this.o);const n=e=>{null!=e.error&&so("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,so("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{so("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):so("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new wo(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(uo("string"==typeof e.token),this.R=e.token,new wo(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=So(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Co(e,t){return e<t?-1:e>t?1:0}function No(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=-62135596800,xo=1e6;class Oo{static now(){return Oo.fromMillis(Date.now())}static fromDate(e){return Oo.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*xo);return new Oo(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new po(fo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new po(fo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ao)throw new po(fo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new po(fo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xo}_compareTo(e){return this.seconds===e.seconds?Co(this.nanoseconds,e.nanoseconds):Co(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Ao;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{static fromTimestamp(e){return new Ro(e)}static min(){return new Ro(new Oo(0,0))}static max(){return new Ro(new Oo(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="__name__";class Lo{constructor(e,t,n){void 0===t?t=0:t>e.length&&co(),void 0===n?n=e.length-t:n>e.length-t&&co(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Lo.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Lo?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Lo.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Math.sign(e.length-t.length)}static compareSegments(e,t){const n=Lo.isNumericId(e),r=Lo.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Lo.extractNumericId(e).compare(Lo.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ks.fromString(e.substring(4,e.length-2))}}class Mo extends Lo{construct(e,t,n){return new Mo(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new po(fo.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new Mo(t)}static emptyPath(){return new Mo([])}}const Po=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ko extends Lo{construct(e,t,n){return new ko(e,t,n)}static isValidIdentifier(e){return Po.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ko.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Do}static keyField(){return new ko([Do])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new po(fo.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new po(fo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new po(fo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new po(fo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ko(t)}static emptyPath(){return new ko([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this.path=e}static fromPath(e){return new Uo(Mo.fromString(e))}static fromName(e){return new Uo(Mo.fromString(e).popFirst(5))}static empty(){return new Uo(Mo.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Mo.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Mo.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Uo(new Mo(e.slice()))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(e){return new Fo(e.readTime,e.key,-1)}class Fo{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Fo(Ro.min(),Uo.empty(),-1)}static max(){return new Fo(Ro.max(),Uo.empty(),-1)}}function Vo(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Uo.comparator(e.documentKey,t.documentKey),0!==n?n:Co(e.largestBatchId,t.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class Ko{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(e){if(e.code!==fo.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;so("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&co(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ho((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ho?t:Ho.resolve(t)}catch(t){return Ho.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ho.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ho.reject(t)}static resolve(e){return new Ho((t,n)=>{t(e)})}static reject(e){return new Ho((t,n)=>{n(e)})}static waitFor(e){return new Ho((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Ho.resolve(!1);for(const n of e)t=t.next(e=>e?Ho.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Ho((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Ho((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function $o(e){return"IndexedDbTransactionError"===e.name}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.oe(e),this._e=e=>t.writeSequenceNumber(e))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}qo.ae=-1;function zo(e){return null==e}function Wo(e){return 0===e&&1/e==-1/0}function Yo(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="";break;case"":n+="";break;default:n+=t}}return n}function Go(e){return e+""}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Qo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Jo(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,t){this.comparator=e,this.root=t||ta.EMPTY}insert(e,t){return new Zo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ta.BLACK,null,null))}remove(e){return new Zo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ta.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ea(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ea(this.root,e,this.comparator,!1)}getReverseIterator(){return new ea(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ea(this.root,e,this.comparator,!0)}}class ea{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ta{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ta.RED,this.left=null!=r?r:ta.EMPTY,this.right=null!=i?i:ta.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ta(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ta.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ta.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ta.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ta.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw co();if(this.right.isRed())throw co();const e=this.left.check();if(e!==this.right.check())throw co();return e+(this.isRed()?0:1)}}ta.EMPTY=null,ta.RED=!0,ta.BLACK=!1,ta.EMPTY=new class{constructor(){this.size=0}get key(){throw co()}get value(){throw co()}get color(){throw co()}get left(){throw co()}get right(){throw co()}copy(e,t,n,r,i){return this}insert(e,t,n){return new ta(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class na{constructor(e){this.comparator=e,this.data=new Zo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ra(this.data.getIterator())}getIteratorFrom(e){return new ra(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof na))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new na(this.comparator);return t.data=e,t}}class ra{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this.fields=e,e.sort(ko.comparator)}static empty(){return new ia([])}unionWith(e){let t=new na(ko.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new ia(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,(e,t)=>e.isEqual(t))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new sa("Invalid base64 string: "+t):t}}(e);return new oa(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new oa(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Co(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}oa.EMPTY_BYTE_STRING=new oa("");const aa=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function la(e){if(uo(!!e),"string"==typeof e){let t=0;const n=aa.exec(e);if(uo(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ca(e.seconds),nanos:ca(e.nanos)}}function ca(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ua(e){return"string"==typeof e?oa.fromBase64String(e):oa.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="server_timestamp",da="__type__",fa="__previous_value__",pa="__local_write_time__";function ma(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[da])||void 0===n?void 0:n.stringValue)===ha}function ga(e){const t=e.mapValue.fields[fa];return ma(t)?ga(t):t}function ya(e){const t=la(e.mapValue.fields[pa].timestampValue);return new Oo(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}const Ea="(default)";class _a{constructor(e,t){this.projectId=e,this.database=t||Ea}static empty(){return new _a("","")}get isDefaultDatabase(){return this.database===Ea}isEqual(e){return e instanceof _a&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta="__type__",wa="__max__",ba={},Sa="__vector__",Ia="value";function Ca(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ma(e)?4:function(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===wa}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)?9007199254740991:function(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[Ta])||void 0===n?void 0:n.stringValue)===Sa}(e)?10:11:co()}function Na(e,t){if(e===t)return!0;const n=Ca(e);if(n!==Ca(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ya(e).isEqual(ya(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=la(e.timestampValue),r=la(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r=t,ua(e.bytesValue).isEqual(ua(r.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ca(e.geoPointValue.latitude)===ca(t.geoPointValue.latitude)&&ca(e.geoPointValue.longitude)===ca(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ca(e.integerValue)===ca(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ca(e.doubleValue),r=ca(t.doubleValue);return n===r?Wo(n)===Wo(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return No(e.arrayValue.values||[],t.arrayValue.values||[],Na);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Xo(n)!==Xo(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Na(n[i],r[i])))return!1;return!0}(e,t);default:return co()}var r}function Aa(e,t){return void 0!==(e.values||[]).find(e=>Na(e,t))}function xa(e,t){if(e===t)return 0;const n=Ca(e),r=Ca(t);if(n!==r)return Co(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Co(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ca(e.integerValue||e.doubleValue),r=ca(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Oa(e.timestampValue,t.timestampValue);case 4:return Oa(ya(e),ya(t));case 5:return Co(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ua(e),r=ua(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Co(n[i],r[i]);if(0!==e)return e}return Co(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Co(ca(e.latitude),ca(t.latitude));return 0!==n?n:Co(ca(e.longitude),ca(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ra(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[Ia])||void 0===n?void 0:n.arrayValue,c=null===(r=a[Ia])||void 0===r?void 0:r.arrayValue,u=Co((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Ra(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===ba&&t===ba)return 0;if(e===ba)return 1;if(t===ba)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Co(r[o],s[o]);if(0!==e)return e;const t=xa(n[r[o]],i[s[o]]);if(0!==t)return t}return Co(r.length,s.length)}(e.mapValue,t.mapValue);default:throw co()}}function Oa(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Co(e,t);const n=la(e),r=la(t),i=Co(n.seconds,r.seconds);return 0!==i?i:Co(n.nanos,r.nanos)}function Ra(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=xa(n[i],r[i]);if(e)return e}return Co(n.length,r.length)}function Da(e){return La(e)}function La(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=la(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ua(e.bytesValue).toBase64():"referenceValue"in e?function(e){return Uo.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=La(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${La(e.fields[i])}`;return n+"}"}(e.mapValue):co()}function Ma(e){switch(Ca(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=ga(e);return t?16+Ma(t):16;case 5:return 2*e.stringValue.length;case 6:return ua(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(e.arrayValue.values||[]).reduce((e,t)=>e+Ma(t),0);case 10:case 11:return function(e){let t=0;return Qo(e.fields,(e,n)=>{t+=e.length+Ma(n)}),t}(e.mapValue);default:throw co()}}function Pa(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function ka(e){return!!e&&"integerValue"in e}function Ua(e){return!!e&&"arrayValue"in e}function ja(e){return!!e&&"nullValue"in e}function Fa(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Va(e){return!!e&&"mapValue"in e}function Ka(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Qo(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ka(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Ka(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Ba{constructor(e){this.value=e}static empty(){return new Ba({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Va(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ka(t)}setAll(e){let t=ko.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Ka(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Va(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Na(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Va(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Qo(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Ba(Ka(this.value))}}function Ha(e){const t=[];return Qo(e.fields,(e,n)=>{const r=new ko([e]);if(Va(n)){const e=Ha(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new ia(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class $a{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new $a(e,0,Ro.min(),Ro.min(),Ro.min(),Ba.empty(),0)}static newFoundDocument(e,t,n,r){return new $a(e,1,t,Ro.min(),n,r,0)}static newNoDocument(e,t){return new $a(e,2,t,Ro.min(),Ro.min(),Ba.empty(),0)}static newUnknownDocument(e,t){return new $a(e,3,t,Ro.min(),Ro.min(),Ba.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ro.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ba.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ba.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ro.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof $a&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $a(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,t){this.position=e,this.inclusive=t}}function za(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Uo.comparator(Uo.fromName(o.referenceValue),n.key):xa(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Wa(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Na(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ga(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{}class Qa extends Xa{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new il(e,t,n):"array-contains"===t?new ll(e,n):"in"===t?new cl(e,n):"not-in"===t?new ul(e,n):"array-contains-any"===t?new hl(e,n):new Qa(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new sl(e,n):new ol(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(xa(t,this.value)):null!==t&&Ca(this.value)===Ca(t)&&this.matchesComparison(xa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return co()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ja extends Xa{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Ja(e,t)}matches(e){return Za(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Za(e){return"and"===e.op}function el(e){return function(e){for(const t of e.filters)if(t instanceof Ja)return!1;return!0}(e)&&Za(e)}function tl(e){if(e instanceof Qa)return e.field.canonicalString()+e.op.toString()+Da(e.value);if(el(e))return e.filters.map(e=>tl(e)).join(",");{const t=e.filters.map(e=>tl(e)).join(",");return`${e.op}(${t})`}}function nl(e,t){return e instanceof Qa?(n=e,(r=t)instanceof Qa&&n.op===r.op&&n.field.isEqual(r.field)&&Na(n.value,r.value)):e instanceof Ja?function(e,t){return t instanceof Ja&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&nl(n,t.filters[r]),!0)}(e,t):void co();var n,r}function rl(e){return e instanceof Qa?`${(t=e).field.canonicalString()} ${t.op} ${Da(t.value)}`:e instanceof Ja?function(e){return e.op.toString()+" {"+e.getFilters().map(rl).join(" ,")+"}"}(e):"Filter";var t}class il extends Qa{constructor(e,t,n){super(e,t,n),this.key=Uo.fromName(n.referenceValue)}matches(e){const t=Uo.comparator(e.key,this.key);return this.matchesComparison(t)}}class sl extends Qa{constructor(e,t){super(e,"in",t),this.keys=al("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ol extends Qa{constructor(e,t){super(e,"not-in",t),this.keys=al("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function al(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Uo.fromName(e.referenceValue))}class ll extends Qa{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ua(t)&&Aa(t.arrayValue,this.value)}}class cl extends Qa{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Aa(this.value.arrayValue,t)}}class ul extends Qa{constructor(e,t){super(e,"not-in",t)}matches(e){if(Aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Aa(this.value.arrayValue,t)}}class hl extends Qa{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ua(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Aa(this.value.arrayValue,e))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.le=null}}function fl(e,t=null,n=[],r=[],i=null,s=null,o=null){return new dl(e,t,n,r,i,s,o)}function pl(e){const t=ho(e);if(null===t.le){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>tl(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),zo(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Da(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Da(e)).join(",")),t.le=e}return t.le}function ml(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ga(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!nl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Wa(e.startAt,t.startAt)&&Wa(e.endAt,t.endAt)}function gl(e){return Uo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function vl(e){return new yl(e)}function El(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function _l(e){return null!==e.collectionGroup}function Tl(e){const t=ho(e);if(null===t.he){t.he=[];const e=new Set;for(const r of t.explicitOrderBy)t.he.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(e){let t=new na(ko.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t})(t).forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.he.push(new Ya(r,n))}),e.has(ko.keyField().canonicalString())||t.he.push(new Ya(ko.keyField(),n))}return t.he}function wl(e){const t=ho(e);return t.Pe||(t.Pe=function(e,t){if("F"===e.limitType)return fl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Ya(e.field,t)});const n=e.endAt?new qa(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new qa(e.startAt.position,e.startAt.inclusive):null;return fl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,Tl(e))),t.Pe}function bl(e,t){const n=e.filters.concat([t]);return new yl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Sl(e,t,n){return new yl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Il(e,t){return ml(wl(e),wl(t))&&e.limitType===t.limitType}function Cl(e){return`${pl(wl(e))}|lt:${e.limitType}`}function Nl(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>rl(e)).join(", ")}]`),zo(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Da(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Da(e)).join(",")),`Target(${t})`}(wl(e))}; limitType=${e.limitType})`}function Al(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Uo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Tl(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!function(e,t,n){const r=za(e,t,n);return e.inclusive?r<=0:r<0}(n.startAt,Tl(n),r)||n.endAt&&!function(e,t,n){const r=za(e,t,n);return e.inclusive?r>=0:r>0}(n.endAt,Tl(n),r)));var n,r}function xl(e){return(t,n)=>{let r=!1;for(const i of Tl(e)){const e=Ol(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Ol(e,t,n){const r=e.field.isKeyField()?Uo.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?xa(r,i):co()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return co()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Qo(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Jo(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=new Zo(Uo.comparator);function Ll(){return Dl}const Ml=new Zo(Uo.comparator);function Pl(...e){let t=Ml;for(const n of e)t=t.insert(n.key,n);return t}function kl(e){let t=Ml;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Ul(){return Fl()}function jl(){return Fl()}function Fl(){return new Rl(e=>e.toString(),(e,t)=>e.isEqual(t))}const Vl=new Zo(Uo.comparator),Kl=new na(Uo.comparator);function Bl(...e){let t=Kl;for(const n of e)t=t.add(n);return t}const Hl=new na(Co);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function $l(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wo(t)?"-0":t}}function ql(e){return{integerValue:""+e}}function zl(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Wo(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)?ql(t):$l(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){this._=void 0}}function Yl(e,t,n){return e instanceof Ql?function(e,t){const n={fields:{[da]:{stringValue:ha},[pa]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ma(t)&&(t=ga(t)),t&&(n.fields[fa]=t),{mapValue:n}}(n,t):e instanceof Jl?Zl(e,t):e instanceof ec?tc(e,t):function(e,t){const n=Xl(e,t),r=rc(n)+rc(e.Ie);return ka(n)&&ka(e.Ie)?ql(r):$l(e.serializer,r)}(e,t)}function Gl(e,t,n){return e instanceof Jl?Zl(e,t):e instanceof ec?tc(e,t):n}function Xl(e,t){return e instanceof nc?ka(n=t)||(r=n)&&"doubleValue"in r?t:{integerValue:0}:null;var n,r}class Ql extends Wl{}class Jl extends Wl{constructor(e){super(),this.elements=e}}function Zl(e,t){const n=ic(t);for(const r of e.elements)n.some(e=>Na(e,r))||n.push(r);return{arrayValue:{values:n}}}class ec extends Wl{constructor(e){super(),this.elements=e}}function tc(e,t){let n=ic(t);for(const r of e.elements)n=n.filter(e=>!Na(e,r));return{arrayValue:{values:n}}}class nc extends Wl{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function rc(e){return ca(e.integerValue||e.doubleValue)}function ic(e){return Ua(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,t){this.field=e,this.transform=t}}class oc{constructor(e,t){this.version=e,this.transformResults=t}}class ac{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ac}static exists(e){return new ac(void 0,e)}static updateTime(e){return new ac(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class cc{}function uc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new _c(e.key,ac.none()):new mc(e.key,e.data,ac.none());{const n=e.data,r=Ba.empty();let i=new na(ko.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new gc(e.key,r,new ia(i.toArray()),ac.none())}}function hc(e,t,n){var r;e instanceof mc?function(e,t,n){const r=e.value.clone(),i=vc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof gc?function(e,t,n){if(!lc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=vc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(yc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):(r=n,t.convertToNoDocument(r.version).setHasCommittedMutations())}function dc(e,t,n,r){return e instanceof mc?function(e,t,n,r){if(!lc(e.precondition,t))return n;const i=e.value.clone(),s=Ec(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof gc?function(e,t,n,r){if(!lc(e.precondition,t))return n;const i=Ec(e.fieldTransforms,r,t),s=t.data;return s.setAll(yc(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):(i=t,s=n,lc(e.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):s);var i,s}function fc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Xl(r.transform,e||null);null!=i&&(null===n&&(n=Ba.empty()),n.set(r.field,i))}return n||null}function pc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(n=e.fieldTransforms,r=t.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&No(n,r,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(n=e.transform,r=t.transform,n instanceof Jl&&r instanceof Jl||n instanceof ec&&r instanceof ec?No(n.elements,r.elements,Na):n instanceof nc&&r instanceof nc?Na(n.Ie,r.Ie):n instanceof Ql&&r instanceof Ql);var n,r}(e,t)))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask)));var n,r}class mc extends cc{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class gc extends cc{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function yc(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function vc(e,t,n){const r=new Map;uo(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Gl(o,a,n[i]))}return r}function Ec(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Yl(e,s,t))}return r}class _c extends cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Tc extends cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&hc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=dc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=dc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=jl();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=uc(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Ro.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bl())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,(e,t)=>pc(e,t))&&No(this.baseMutations,e.baseMutations,(e,t)=>pc(e,t))}}class bc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){uo(e.mutations.length===n.length);let r=function(){return Vl}();const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new bc(e,t,n,r)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cc,Nc;function Ac(e){if(void 0===e)return oo("GRPC error has no .code"),fo.UNKNOWN;switch(e){case Cc.OK:return fo.OK;case Cc.CANCELLED:return fo.CANCELLED;case Cc.UNKNOWN:return fo.UNKNOWN;case Cc.DEADLINE_EXCEEDED:return fo.DEADLINE_EXCEEDED;case Cc.RESOURCE_EXHAUSTED:return fo.RESOURCE_EXHAUSTED;case Cc.INTERNAL:return fo.INTERNAL;case Cc.UNAVAILABLE:return fo.UNAVAILABLE;case Cc.UNAUTHENTICATED:return fo.UNAUTHENTICATED;case Cc.INVALID_ARGUMENT:return fo.INVALID_ARGUMENT;case Cc.NOT_FOUND:return fo.NOT_FOUND;case Cc.ALREADY_EXISTS:return fo.ALREADY_EXISTS;case Cc.PERMISSION_DENIED:return fo.PERMISSION_DENIED;case Cc.FAILED_PRECONDITION:return fo.FAILED_PRECONDITION;case Cc.ABORTED:return fo.ABORTED;case Cc.OUT_OF_RANGE:return fo.OUT_OF_RANGE;case Cc.UNIMPLEMENTED:return fo.UNIMPLEMENTED;case Cc.DATA_LOSS:return fo.DATA_LOSS;default:return co()}}(Nc=Cc||(Cc={}))[Nc.OK=0]="OK",Nc[Nc.CANCELLED=1]="CANCELLED",Nc[Nc.UNKNOWN=2]="UNKNOWN",Nc[Nc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nc[Nc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nc[Nc.NOT_FOUND=5]="NOT_FOUND",Nc[Nc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nc[Nc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nc[Nc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nc[Nc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nc[Nc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nc[Nc.ABORTED=10]="ABORTED",Nc[Nc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nc[Nc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nc[Nc.INTERNAL=13]="INTERNAL",Nc[Nc.UNAVAILABLE=14]="UNAVAILABLE",Nc[Nc.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const xc=new Ks([4294967295,4294967295],0);function Oc(e){const t=(new TextEncoder).encode(e),n=new Bs;return n.update(t),new Uint8Array(n.digest())}function Rc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ks([n,r],0),new Ks([i,s],0)]}class Dc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Lc(`Invalid padding: ${t}`);if(n<0)throw new Lc(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Lc(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Lc(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Ks.fromNumber(this.Ee)}Ae(e,t,n){let r=e.add(t.multiply(Ks.fromNumber(n)));return 1===r.compare(xc)&&(r=new Ks([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ee)return!1;const t=Oc(e),[n,r]=Rc(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);if(!this.Re(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Dc(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.Ee)return;const t=Oc(e),[n,r]=Rc(t);for(let i=0;i<this.hashCount;i++){const e=this.Ae(n,r,i);this.Ve(e)}}Ve(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Pc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Mc(Ro.min(),r,new Zo(Co),Ll(),Bl())}}class Pc{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Pc(n,t,Bl(),Bl(),Bl())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t,n,r){this.me=e,this.removedTargetIds=t,this.key=n,this.fe=r}}class Uc{constructor(e,t){this.targetId=e,this.ge=t}}class jc{constructor(e,t,n=oa.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Fc{constructor(){this.pe=0,this.ye=Bc(),this.we=oa.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return 0!==this.pe}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=Bl(),t=Bl(),n=Bl();return this.ye.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:co()}}),new Pc(this.we,this.be,e,t,n)}Me(){this.Se=!1,this.ye=Bc()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,uo(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class Vc{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ll(),this.$e=Kc(),this.Ke=Kc(),this.Ue=new Zo(Co)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Ce(e.resumeToken);break;case 1:n.Be(),n.De||n.Me(),n.Ce(e.resumeToken);break;case 2:n.Be(),n.De||this.removeTarget(t);break;case 3:this.Je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Ce(e.resumeToken));break;default:co()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((e,n)=>{this.Je(n)&&t(n)})}Ze(e){const t=e.targetId,n=e.ge.count,r=this.Xe(t);if(r){const i=r.target;if(gl(i))if(0===n){const e=new Uo(i.path);this.ze(t,e,$a.newNoDocument(e,Ro.min()))}else uo(1===n);else{const r=this.et(t);if(r!==n){const n=this.tt(e),i=n?this.nt(n,e,r):1;if(0!==i){this.Ye(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,e)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=ua(n).toUint8Array()}catch(a){if(a instanceof sa)return ao("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{o=new Dc(s,r,i)}catch(a){return ao(a instanceof Lc?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return 0===o.Ee?null:o}nt(e,t,n){return t.ge.count===n-this.st(e,t.targetId)?0:2}st(e,t){const n=this.ke.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.ke.it(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.ze(t,n,null),r++)}),r}ot(e){const t=new Map;this.qe.forEach((n,r)=>{const i=this.Xe(r);if(i){if(n.current&&gl(i.target)){const t=new Uo(i.target.path);this._t(t).has(r)||this.ut(r,t)||this.ze(r,t,$a.newNoDocument(t,e))}n.ve&&(t.set(r,n.Fe()),n.Me())}});let n=Bl();this.Ke.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Xe(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.Qe.forEach((t,n)=>n.setReadTime(e));const r=new Mc(e,t,this.Ue,this.Qe,n);return this.Qe=Ll(),this.$e=Kc(),this.Ke=Kc(),this.Ue=new Zo(Co),r}Ge(e,t){if(!this.Je(e))return;const n=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,n),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const r=this.He(e);this.ut(e,t)?r.xe(t,1):r.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),n&&(this.Qe=this.Qe.insert(t,n))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new Fc,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new na(Co),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new na(Co),this.$e=this.$e.insert(e,t)),t}Je(e){const t=null!==this.Xe(e);return t||so("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Fc),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Kc(){return new Zo(Uo.comparator)}function Bc(){return new Zo(Uo.comparator)}const Hc=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),$c=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),qc=(()=>({and:"AND",or:"OR"}))();class zc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wc(e,t){return e.useProto3Json||zo(t)?t:{value:t}}function Yc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Gc(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Xc(e,t){return Yc(e,t.toTimestamp())}function Qc(e){return uo(!!e),Ro.fromTimestamp(function(e){const t=la(e);return new Oo(t.seconds,t.nanos)}(e))}function Jc(e,t){return Zc(e,t).canonicalString()}function Zc(e,t){const n=(r=e,new Mo(["projects",r.projectId,"databases",r.database])).child("documents");var r;return void 0===t?n:n.child(t)}function eu(e){const t=Mo.fromString(e);return uo(vu(t)),t}function tu(e,t){return Jc(e.databaseId,t.path)}function nu(e,t){const n=eu(t);if(n.get(1)!==e.databaseId.projectId)throw new po(fo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new po(fo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Uo(su(n))}function ru(e,t){return Jc(e.databaseId,t)}function iu(e){return new Mo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function su(e){return uo(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ou(e,t,n){return{name:tu(e,t),fields:n.value.mapValue.fields}}function au(e,t){return{documents:[ru(e,t.path)]}}function lu(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ru(e,i);const s=function(e){if(0!==e.length)return gu(Ja.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>{return{field:pu((t=e).field),direction:hu(t.dir)};var t})}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Wc(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt={before:(l=t.startAt).inclusive,values:l.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ht:n,parent:i};var l}function cu(e){let t=function(e){const t=eu(e);return 4===t.length?Mo.emptyPath():su(t)}(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){uo(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=uu(e);return t instanceof Ja&&el(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>{return new Ya(mu((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,zo(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new qa(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new qa(n,t)}(n.endAt)),function(e,t,n,r,i,s,o,a){return new yl(e,t,n,r,i,s,o,a)}(t,i,o,s,a,"F",l,c)}function uu(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=mu(e.unaryFilter.field);return Qa.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=mu(e.unaryFilter.field);return Qa.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=mu(e.unaryFilter.field);return Qa.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=mu(e.unaryFilter.field);return Qa.create(i,"!=",{nullValue:"NULL_VALUE"});default:return co()}}(e):void 0!==e.fieldFilter?(t=e,Qa.create(mu(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return co()}}(t.fieldFilter.op),t.fieldFilter.value)):void 0!==e.compositeFilter?function(e){return Ja.create(e.compositeFilter.filters.map(e=>uu(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return co()}}(e.compositeFilter.op))}(e):co();var t}function hu(e){return Hc[e]}function du(e){return $c[e]}function fu(e){return qc[e]}function pu(e){return{fieldPath:e.canonicalString()}}function mu(e){return ko.fromServerFormat(e.fieldPath)}function gu(e){return e instanceof Qa?function(e){if("=="===e.op){if(Fa(e.value))return{unaryFilter:{field:pu(e.field),op:"IS_NAN"}};if(ja(e.value))return{unaryFilter:{field:pu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Fa(e.value))return{unaryFilter:{field:pu(e.field),op:"IS_NOT_NAN"}};if(ja(e.value))return{unaryFilter:{field:pu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pu(e.field),op:du(e.op),value:e.value}}}(e):e instanceof Ja?function(e){const t=e.getFilters().map(e=>gu(e));return 1===t.length?t[0]:{compositeFilter:{op:fu(e.op),filters:t}}}(e):co()}function yu(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function vu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,t,n,r,i=Ro.min(),s=Ro.min(),o=oa.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Eu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Eu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Eu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Eu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e){this.Tt=e}}function Tu(e){const t=cu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Sl(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(){this.Tn=new bu}addToCollectionParentIndex(e,t){return this.Tn.add(t),Ho.resolve()}getCollectionParents(e,t){return Ho.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return Ho.resolve()}deleteFieldIndex(e,t){return Ho.resolve()}deleteAllFieldIndexes(e){return Ho.resolve()}createTargetIndexes(e,t){return Ho.resolve()}getDocumentsMatchingTarget(e,t){return Ho.resolve(null)}getIndexType(e,t){return Ho.resolve(0)}getFieldIndexes(e,t){return Ho.resolve([])}getNextCollectionGroupToUpdate(e){return Ho.resolve(null)}getMinOffset(e,t){return Ho.resolve(Fo.min())}getMinOffsetFromCollectionGroup(e,t){return Ho.resolve(Fo.min())}updateCollectionGroup(e,t,n){return Ho.resolve()}updateIndexEntries(e,t){return Ho.resolve()}}class bu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new na(Mo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new na(Mo.comparator)).toArray()}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Iu=41943040;class Cu{static withCacheSize(e){return new Cu(e,Cu.DEFAULT_COLLECTION_PERCENTILE,Cu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cu.DEFAULT_COLLECTION_PERCENTILE=10,Cu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cu.DEFAULT=new Cu(Iu,Cu.DEFAULT_COLLECTION_PERCENTILE,Cu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cu.DISABLED=new Cu(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Nu{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Nu(0)}static Un(){return new Nu(-1)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au="LruGarbageCollector";function xu([e,t],[n,r]){const i=Co(e,n);return 0===i?Co(t,r):i}class Ou{constructor(e){this.Hn=e,this.buffer=new na(xu),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();xu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Ru{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Xn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return null!==this.Xn}er(e){so(Au,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){$o(e)?so(Au,"Ignoring IndexedDB error during garbage collection: ",e):await Bo(e)}await this.er(3e5)})}}class Du{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Ho.resolve(qo.ae);const n=new Ou(t);return this.tr.forEachTarget(e,e=>n.Zn(e.sequenceNumber)).next(()=>this.tr.rr(e,e=>n.Zn(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.tr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(so("LruGarbageCollector","Garbage collection skipped; disabled"),Ho.resolve(Su)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(so("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Su):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(so("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),io()<=dt.DEBUG&&so("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+`ms\n\tRemoved ${i} targets in `+(a-o)+`ms\n\tRemoved ${e} documents in `+(l-a)+`ms\nTotal Duration: ${l-c}ms`),Ho.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Lu{constructor(){this.changes=new Rl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$a.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ho.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&dc(n.mutation,e,ia.empty(),Oo.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Bl()).next(()=>t))}getLocalViewOfDocuments(e,t,n=Bl()){const r=Ul();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Pl();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Ul();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Bl()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Ll();const s=Fl(),o=Fl();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof gc)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),dc(o.mutation,t,o.mutation.getFieldMask(),Oo.now())):s.set(t.key,ia.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new Mu(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=Fl();let r=new Zo((e,t)=>e-t),i=Bl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||ia.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Bl()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=jl();l.forEach(e=>{if(!i.has(e)){const r=uc(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Ho.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return i=t,Uo.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):_l(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r);var i}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Ho.resolve(Ul());let o=-1,a=i;return s.next(t=>Ho.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Ho.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,Bl())).next(e=>({batchId:o,changes:kl(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Uo(t)).next(e=>{let t=Pl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Pl();return this.indexManager.getCollectionParents(e,i).next(o=>Ho.forEach(o,o=>{const a=(l=t,c=o.child(i),new yl(c,null,l.explicitOrderBy.slice(),l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt));var l,c;return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,$a.newInvalidDocument(r)))});let n=Pl();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&dc(s.mutation,r,ia.empty(),Oo.now()),Al(t,r)&&(n=n.insert(e,r))}),n})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return Ho.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,{id:(n=t).id,version:n.version,createTime:Qc(n.createTime)}),Ho.resolve();var n}getNamedQuery(e,t){return Ho.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,{name:(n=t).name,query:Tu(n.bundledQuery),readTime:Qc(n.readTime)}),Ho.resolve();var n}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(){this.overlays=new Zo(Uo.comparator),this.Rr=new Map}getOverlay(e,t){return Ho.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Ul();return Ho.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.Et(e,t,r)}),Ho.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Rr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Rr.delete(n)),Ho.resolve()}getOverlaysForCollection(e,t,n){const r=Ul(),i=t.length+1,s=new Uo(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ho.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Zo((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Ul(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Ul(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Ho.resolve(o)}Et(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Rr.get(r.largestBatchId).delete(n.key);this.Rr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Sc(t,n));let i=this.Rr.get(t);void 0===i&&(i=Bl(),this.Rr.set(t,i)),this.Rr.set(t,i.add(n.key))}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(){this.sessionToken=oa.EMPTY_BYTE_STRING}getSessionToken(e){return Ho.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ho.resolve()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(){this.Vr=new na(Vu.mr),this.gr=new na(Vu.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const n=new Vu(e,t);this.Vr=this.Vr.add(n),this.gr=this.gr.add(n)}yr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.wr(new Vu(e,t))}br(e,t){e.forEach(e=>this.removeReference(e,t))}Sr(e){const t=new Uo(new Mo([])),n=new Vu(t,e),r=new Vu(t,e+1),i=[];return this.gr.forEachInRange([n,r],e=>{this.wr(e),i.push(e.key)}),i}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Uo(new Mo([])),n=new Vu(t,e),r=new Vu(t,e+1);let i=Bl();return this.gr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Vu(e,0),n=this.Vr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Vu{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Uo.comparator(e.key,t.key)||Co(e.Cr,t.Cr)}static pr(e,t){return Co(e.Cr,t.Cr)||Uo.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new na(Vu.mr)}checkEmpty(e){return Ho.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new wc(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Mr=this.Mr.add(new Vu(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ho.resolve(s)}lookupMutationBatch(e,t){return Ho.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Nr(n),i=r<0?0:r;return Ho.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ho.resolve(0===this.mutationQueue.length?-1:this.Fr-1)}getAllMutationBatches(e){return Ho.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Vu(t,0),r=new Vu(t,Number.POSITIVE_INFINITY),i=[];return this.Mr.forEachInRange([n,r],e=>{const t=this.Or(e.Cr);i.push(t)}),Ho.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new na(Co);return t.forEach(e=>{const t=new Vu(e,0),r=new Vu(e,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([t,r],e=>{n=n.add(e.Cr)})}),Ho.resolve(this.Br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Uo.isDocumentKey(i)||(i=i.child(""));const s=new Vu(new Uo(i),0);let o=new na(Co);return this.Mr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Cr)),!0)},s),Ho.resolve(this.Br(o))}Br(e){const t=[];return e.forEach(e=>{const n=this.Or(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){uo(0===this.Lr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Mr;return Ho.forEach(t.mutations,r=>{const i=new Vu(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Mr=n})}qn(e){}containsKey(e,t){const n=new Vu(t,0),r=this.Mr.firstAfterOrEqual(n);return Ho.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ho.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e){this.kr=e,this.docs=new Zo(Uo.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.kr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ho.resolve(n?n.document.mutableCopy():$a.newInvalidDocument(t))}getEntries(e,t){let n=Ll();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():$a.newInvalidDocument(e))}),Ho.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Ll();const s=t.path,o=new Uo(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Vo(jo(o),n)<=0||(r.has(o.key)||Al(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Ho.resolve(i)}getAllFromCollectionGroup(e,t,n,r){co()}qr(e,t){return Ho.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Hu(this)}getSize(e){return Ho.resolve(this.size)}}class Hu extends Lu{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(n)}),Ho.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e){this.persistence=e,this.Qr=new Rl(e=>pl(e),ml),this.lastRemoteSnapshotVersion=Ro.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Fu,this.targetCount=0,this.Ur=Nu.Kn()}forEachTarget(e,t){return this.Qr.forEach((e,n)=>t(n)),Ho.resolve()}getLastRemoteSnapshotVersion(e){return Ho.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ho.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),Ho.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.$r&&(this.$r=t),Ho.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new Nu(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,Ho.resolve()}updateTargetData(e,t){return this.zn(t),Ho.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,Ho.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Qr.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Qr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Ho.waitFor(i).next(()=>r)}getTargetCount(e){return Ho.resolve(this.targetCount)}getTargetData(e,t){const n=this.Qr.get(t)||null;return Ho.resolve(n)}addMatchingKeys(e,t,n){return this.Kr.yr(t,n),Ho.resolve()}removeMatchingKeys(e,t,n){this.Kr.br(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Ho.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),Ho.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Kr.vr(t);return Ho.resolve(n)}containsKey(e,t){return Ho.resolve(this.Kr.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new qo(0),this.zr=!1,this.zr=!0,this.jr=new ju,this.referenceDelegate=e(this),this.Hr=new $u(this),this.indexManager=new wu,this.remoteDocumentCache=new Bu(e=>this.referenceDelegate.Jr(e)),this.serializer=new _u(t),this.Yr=new ku(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Uu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Wr[e.toKey()];return n||(n=new Ku(t,this.referenceDelegate),this.Wr[e.toKey()]=n),n}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,n){so("MemoryPersistence","Starting transaction:",e);const r=new zu(this.Gr.next());return this.referenceDelegate.Zr(),n(r).next(e=>this.referenceDelegate.Xr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}ei(e,t){return Ho.or(Object.values(this.Wr).map(n=>()=>n.containsKey(e,t)))}}class zu extends Ko{constructor(e){super(),this.currentSequenceNumber=e}}class Wu{constructor(e){this.persistence=e,this.ti=new Fu,this.ni=null}static ri(e){return new Wu(e)}get ii(){if(this.ni)return this.ni;throw co()}addReference(e,t,n){return this.ti.addReference(n,t),this.ii.delete(n.toString()),Ho.resolve()}removeReference(e,t,n){return this.ti.removeReference(n,t),this.ii.add(n.toString()),Ho.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),Ho.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(e=>this.ii.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.ii.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ho.forEach(this.ii,n=>{const r=Uo.fromPath(n);return this.si(e,r).next(e=>{e||t.removeEntry(r,Ro.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(e=>{e?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return Ho.or([()=>Ho.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class Yu{constructor(e,t){this.persistence=e,this.oi=new Rl(e=>function(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Go(t)),t=Yo(e.get(n),t);return Go(t)}(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=function(e,t){return new Du(e,t)}(this,t)}static ri(e,t){return new Yu(e,t)}Zr(){}Xr(e){return Ho.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}sr(e){let t=0;return this.rr(e,e=>{t++}).next(()=>t)}rr(e,t){return Ho.forEach(this.oi,(n,r)=>this.ar(e,n,r).next(e=>e?Ho.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.qr(e,r=>this.ar(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Ro.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),Ho.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),Ho.resolve()}removeReference(e,t,n){return this.oi.set(n,e.currentSequenceNumber),Ho.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),Ho.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ma(e.data.value)),t}ar(e,t,n){return Ho.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.oi.get(t);return Ho.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Hi=n,this.Ji=r}static Yi(e,t){let n=Bl(),r=Bl();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Gu(e,t.fromCache,n,r)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=Xe()?8:function(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}(Ge())>0?6:4}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.rs(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ss(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Xu;return this._s(e,t,n).next(r=>{if(i.result=r,this.Xi)return this.us(e,t,n,r.size)})}).next(()=>i.result)}us(e,t,n,r){return n.documentReadCount<this.es?(io()<=dt.DEBUG&&so("QueryEngine","SDK will not create cache indexes for query:",Nl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Ho.resolve()):(io()<=dt.DEBUG&&so("QueryEngine","Query:",Nl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.ts*r?(io()<=dt.DEBUG&&so("QueryEngine","The SDK decides to create cache indexes for query:",Nl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wl(t))):Ho.resolve())}rs(e,t){if(El(t))return Ho.resolve(null);let n=wl(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Sl(t,null,"F"),n=wl(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Bl(...r);return this.ns.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.cs(t,r);return this.ls(t,s,i,n.readTime)?this.rs(e,Sl(t,null,"F")):this.hs(e,s,t,n)}))})))}ss(e,t,n,r){return El(t)||r.isEqual(Ro.min())?Ho.resolve(null):this.ns.getDocuments(e,n).next(i=>{const s=this.cs(t,i);return this.ls(t,s,n,r)?Ho.resolve(null):(io()<=dt.DEBUG&&so("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Nl(t)),this.hs(e,s,t,function(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Ro.fromTimestamp(1e9===r?new Oo(n+1,0):new Oo(n,r));return new Fo(i,Uo.empty(),t)}(r,-1)).next(e=>e))})}cs(e,t){let n=new na(xl(e));return t.forEach((t,r)=>{Al(e,r)&&(n=n.add(r))}),n}ls(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}_s(e,t,n){return io()<=dt.DEBUG&&so("QueryEngine","Using full collection scan to execute query:",Nl(t)),this.ns.getDocumentsMatchingQuery(e,t,Fo.min(),n)}hs(e,t,n,r){return this.ns.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju="LocalStore";class Zu{constructor(e,t,n,r){this.persistence=e,this.Ps=t,this.serializer=r,this.Ts=new Zo(Co),this.Is=new Rl(e=>pl(e),ml),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(n)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pu(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}async function eh(e,t){const n=ho(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.As(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=Bl();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Rs:e,removedBatchIds:i,addedBatchIds:s}))})})}function th(e){const t=ho(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Hr.getLastRemoteSnapshotVersion(e))}function nh(e,t){const n=ho(e),r=t.snapshotVersion;let i=n.Ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.ds.newChangeBuffer({trackRemovals:!0});i=n.Ts;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Hr.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Hr.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(oa.EMPTY_BYTE_STRING,Ro.min()).withLastLimboFreeSnapshotVersion(Ro.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){if(0===e.resumeToken.approximateByteSize())return!0;if(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8)return!0;return n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Hr.updateTargetData(e,c))});let a=Ll(),l=Bl();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(function(e,t,n){let r=Bl(),i=Bl();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Ll();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Ro.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):so(Ju,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{Vs:r,fs:i}})}(e,s,t.documentUpdates).next(e=>{a=e.Vs,l=e.fs})),!r.isEqual(Ro.min())){const t=n.Hr.getLastRemoteSnapshotVersion(e).next(t=>n.Hr.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Ho.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ts=i,e))}function rh(e,t){const n=ho(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}async function ih(e,t,n){const r=ho(e),i=r.Ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(o){if(!$o(o))throw o;so(Ju,`Failed to update sequence numbers for target ${t}: ${o}`)}r.Ts=r.Ts.remove(t),r.Is.delete(i.target)}function sh(e,t,n){const r=ho(e);let i=Ro.min(),s=Bl();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=ho(e),i=r.Is.get(n);return void 0!==i?Ho.resolve(r.Ts.get(i)):r.Hr.getTargetData(t,n)}(r,e,wl(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Ps.getDocumentsMatchingQuery(e,t,n?i:Ro.min(),n?s:Bl())).next(e=>(function(e,t,n){let r=e.Es.get(t)||Ro.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Es.set(t,r)}(r,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,gs:s})))}class oh{constructor(){this.activeTargetIds=Hl}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ah{constructor(){this.ho=new oh,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,n){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new oh,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{To(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch="ConnectivityMonitor";class uh{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){so(ch,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){so(ch,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hh=null;function dh(){return null===hh?hh=268435456+Math.round(2147483648*Math.random()):hh++,"0x"+hh.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const fh="RestConnection",ph={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class mh{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${n}/databases/${r}`,this.wo=this.databaseId.database===Ea?`project_id=${n}`:`project_id=${n}&database_id=${r}`}bo(e,t,n,r,i){const s=dh(),o=this.So(e,t.toUriEncodedString());so(fh,`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(a,r,i),this.vo(e,o,a,n).then(t=>(so(fh,`Received RPC '${e}' ${s}: `,t),t),t=>{throw ao(fh,`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t})}Co(e,t,n,r,i,s){return this.bo(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+no,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}So(e,t){const n=ph[e];return`${this.po}/v1/${t}:${n}`}terminate(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh="WebChannelConnection";class vh extends mh{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,n,r){const i=dh();return new Promise((s,o)=>{const a=new $s;a.setWithCredentials(!0),a.listenOnce(zs.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Ws.NO_ERROR:const t=a.getResponseJson();so(yh,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case Ws.TIMEOUT:so(yh,`RPC '${e}' ${i} timed out`),o(new po(fo.DEADLINE_EXCEEDED,"Request time out"));break;case Ws.HTTP_ERROR:const n=a.getStatus();if(so(yh,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(fo).indexOf(t)>=0?t:fo.UNKNOWN}(t.status);o(new po(e,t.message))}else o(new po(fo.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new po(fo.UNAVAILABLE,"Connection failed."));break;default:co()}}finally{so(yh,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);so(yh,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)})}Wo(e,t,n){const r=dh(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Qs(),o=Xs(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");so(yh,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new gh({Fo:t=>{d?so(yh,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(so(yh,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),so(yh,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Mo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(t){setTimeout(()=>{throw t},0)}})};return p(u,qs.EventType.OPEN,()=>{d||(so(yh,`RPC '${e}' stream ${r} transport opened.`),f.Qo())}),p(u,qs.EventType.CLOSE,()=>{d||(d=!0,so(yh,`RPC '${e}' stream ${r} transport closed`),f.Ko())}),p(u,qs.EventType.ERROR,t=>{d||(d=!0,ao(yh,`RPC '${e}' stream ${r} transport errored:`,t),f.Ko(new po(fo.UNAVAILABLE,"The operation could not be completed")))}),p(u,qs.EventType.MESSAGE,t=>{var n;if(!d){const i=t.data[0];uo(!!i);const s=i,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){so(yh,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Cc[e];if(void 0!==t)return Ac(t)}(t),i=o.message;void 0===n&&(n=fo.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Ko(new po(n,i)),u.close()}else so(yh,`RPC '${e}' stream ${r} received:`,i),f.Uo(i)}}),p(o,Gs.STAT_EVENT,t=>{t.stat===Ys.PROXY?so(yh,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Ys.NOPROXY&&so(yh,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.$o()},0),f}}function Eh(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(e){return new zc(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Ti=e,this.timerId=t,this.Go=n,this.zo=r,this.jo=i,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),n=Math.max(0,Date.now()-this.Yo),r=Math.max(0,t-n);r>0&&so("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){null!==this.Jo&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){null!==this.Jo&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh="PersistentStream";class bh{constructor(e,t,n,r,i,s,o,a){this.Ti=e,this.n_=n,this.r_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Th(e,t)}u_(){return 1===this.state||5===this.state||this.c_()}c_(){return 2===this.state||3===this.state}start(){this.__=0,4!==this.state?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&null===this.s_&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,4!==e?this.a_.reset():t&&t.code===fo.RESOURCE_EXHAUSTED?(oo(t.toString()),oo("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===fo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.i_===t&&this.V_(e,n)},t=>{e(()=>{const e=new po(fo.UNKNOWN,"Fetching auth token failed: "+t.message);return this.m_(e)})})}V_(e,t){const n=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{n(()=>this.listener.xo())}),this.stream.No(()=>{n(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(e=>{n(()=>this.m_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.__?this.g_(e):this.onNext(e))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return so(wh,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(so(wh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sh extends bh{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:co(),s=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(uo(void 0===t||"string"==typeof t),oa.fromBase64String(t||"")):(uo(void 0===t||t instanceof Buffer||t instanceof Uint8Array),oa.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(e){const t=void 0===e.code?fo.UNKNOWN:Ac(e.code);return new po(t,e.message||"")}(a);n=new jc(i,s,o,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=nu(e,r.document.name),s=Qc(r.document.updateTime),o=r.document.createTime?Qc(r.document.createTime):Ro.min(),a=new Ba({mapValue:{fields:r.document.fields}}),l=$a.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new kc(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=nu(e,r.document),s=r.readTime?Qc(r.readTime):Ro.min(),o=$a.newNoDocument(i,s),a=r.removedTargetIds||[];n=new kc([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=nu(e,r.document),s=r.removedTargetIds||[];n=new kc([],s,i,null)}else{if(!("filter"in t))return co();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Ic(r,i),o=e.targetId;n=new Uc(o,s)}}var r;return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Ro.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Ro.min():t.readTime?Qc(t.readTime):Ro.min()}(e);return this.listener.p_(t,n)}y_(e){const t={};t.database=iu(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=gl(r)?{documents:au(e,r)}:{query:lu(e,r).ht},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Gc(e,t.resumeToken);const r=Wc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ro.min())>0){n.readTime=Yc(e,t.snapshotVersion.toTimestamp());const r=Wc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return co()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.I_(t)}w_(e){const t={};t.database=iu(this.serializer),t.removeTarget=e,this.I_(t)}}class Ih extends bh{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return uo(!!e.streamToken),this.lastStreamToken=e.streamToken,uo(!e.writeResults||0===e.writeResults.length),this.listener.D_()}onNext(e){uo(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=function(e,t){return e&&e.length>0?(uo(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Qc(e.updateTime):Qc(t);return n.isEqual(Ro.min())&&(n=Qc(t)),new oc(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Qc(e.commitTime);return this.listener.v_(n,t)}C_(){const e={};e.database=iu(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>function(e,t){let n;if(t instanceof mc)n={update:ou(e,t.key,t.value)};else if(t instanceof _c)n={delete:tu(e,t.key)};else if(t instanceof gc)n={update:ou(e,t.key,t.data),updateMask:yu(t.fieldMask)};else{if(!(t instanceof Tc))return co();n={verify:tu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Ql)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Jl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ec)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof nc)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw co()}(0,e))),t.precondition.isNone||(n.currentDocument=(r=e,void 0!==(i=t.precondition).updateTime?{updateTime:Xc(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:co())),n;var r,i}(this.serializer,e))};this.I_(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{}class Nh extends Ch{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new po(fo.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,n,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.bo(e,Zc(t,n),r,i,s)).catch(e=>{throw"FirebaseError"===e.name?(e.code===fo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new po(fo.UNKNOWN,e.toString())})}Co(e,t,n,r,i){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,Zc(t,n),r,s,o,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===fo.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new po(fo.UNKNOWN,e.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Ah{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){0===this.x_&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){"Online"===this.state?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,"Online"===e&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(oo(t),this.N_=!1):so("OnlineStateTracker",t)}Q_(){null!==this.O_&&(this.O_.cancel(),this.O_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh="RemoteStore";class Oh{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=i,this.z_.To(e=>{n.enqueueAndForget(async()=>{Fh(this)&&(so(xh,"Restarting streams for network reachability change."),await async function(e){const t=ho(e);t.W_.add(4),await Dh(t),t.j_.set("Unknown"),t.W_.delete(4),await Rh(t)}(this))})}),this.j_=new Ah(n,r)}}async function Rh(e){if(Fh(e))for(const t of e.G_)await t(!0)}async function Dh(e){for(const t of e.G_)await t(!1)}function Lh(e,t){const n=ho(e);n.U_.has(t.targetId)||(n.U_.set(t.targetId,t),jh(n)?Uh(n):rd(n).c_()&&Ph(n,t))}function Mh(e,t){const n=ho(e),r=rd(n);n.U_.delete(t),r.c_()&&kh(n,t),0===n.U_.size&&(r.c_()?r.P_():Fh(n)&&n.j_.set("Unknown"))}function Ph(e,t){if(e.H_.Ne(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ro.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}rd(e).y_(t)}function kh(e,t){e.H_.Ne(t),rd(e).w_(t)}function Uh(e){e.H_=new Vc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),lt:t=>e.U_.get(t)||null,it:()=>e.datastore.serializer.databaseId}),rd(e).start(),e.j_.B_()}function jh(e){return Fh(e)&&!rd(e).u_()&&e.U_.size>0}function Fh(e){return 0===ho(e).W_.size}function Vh(e){e.H_=void 0}async function Kh(e){e.j_.set("Online")}async function Bh(e){e.U_.forEach((t,n)=>{Ph(e,t)})}async function Hh(e,t){Vh(e),jh(e)?(e.j_.q_(t),Uh(e)):e.j_.set("Unknown")}async function $h(e,t,n){if(e.j_.set("Online"),t instanceof jc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.U_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.U_.delete(r),e.H_.removeTarget(r))}(e,t)}catch(r){so(xh,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await qh(e,r)}else if(t instanceof kc?e.H_.We(t):t instanceof Uc?e.H_.Ze(t):e.H_.je(t),!n.isEqual(Ro.min()))try{const t=await th(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.H_.ot(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.U_.get(r);i&&e.U_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.U_.get(t);if(!r)return;e.U_.set(t,r.withResumeToken(oa.EMPTY_BYTE_STRING,r.snapshotVersion)),kh(e,t);const i=new Eu(r.target,t,n,r.sequenceNumber);Ph(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(i){so(xh,"Failed to raise snapshot:",i),await qh(e,i)}}async function qh(e,t,n){if(!$o(t))throw t;e.W_.add(1),await Dh(e),e.j_.set("Offline"),n||(n=()=>th(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{so(xh,"Retrying IndexedDB access"),await n(),e.W_.delete(1),await Rh(e)})}function zh(e,t){return t().catch(n=>qh(e,n,t))}async function Wh(e){const t=ho(e),n=id(t);let r=t.K_.length>0?t.K_[t.K_.length-1].batchId:-1;for(;Yh(t);)try{const e=await rh(t.localStore,r);if(null===e){0===t.K_.length&&n.P_();break}r=e.batchId,Gh(t,e)}catch(i){await qh(t,i)}Xh(t)&&Qh(t)}function Yh(e){return Fh(e)&&e.K_.length<10}function Gh(e,t){e.K_.push(t);const n=id(e);n.c_()&&n.b_&&n.S_(t.mutations)}function Xh(e){return Fh(e)&&!id(e).u_()&&e.K_.length>0}function Qh(e){id(e).start()}async function Jh(e){id(e).C_()}async function Zh(e){const t=id(e);for(const n of e.K_)t.S_(n.mutations)}async function ed(e,t,n){const r=e.K_.shift(),i=bc.from(r,t,n);await zh(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Wh(e)}async function td(e,t){t&&id(e).b_&&await async function(e,t){if(function(e){switch(e){case fo.OK:return co();case fo.CANCELLED:case fo.UNKNOWN:case fo.DEADLINE_EXCEEDED:case fo.RESOURCE_EXHAUSTED:case fo.INTERNAL:case fo.UNAVAILABLE:case fo.UNAUTHENTICATED:return!1;case fo.INVALID_ARGUMENT:case fo.NOT_FOUND:case fo.ALREADY_EXISTS:case fo.PERMISSION_DENIED:case fo.FAILED_PRECONDITION:case fo.ABORTED:case fo.OUT_OF_RANGE:case fo.UNIMPLEMENTED:case fo.DATA_LOSS:return!0;default:return co()}}(n=t.code)&&n!==fo.ABORTED){const n=e.K_.shift();id(e).h_(),await zh(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Wh(e)}var n}(e,t),Xh(e)&&Qh(e)}async function nd(e,t){const n=ho(e);n.asyncQueue.verifyOperationInProgress(),so(xh,"RemoteStore received new credentials");const r=Fh(n);n.W_.add(3),await Dh(n),r&&n.j_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.W_.delete(3),await Rh(n)}function rd(e){return e.J_||(e.J_=function(e,t,n){const r=ho(e);return r.M_(),new Sh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:Kh.bind(null,e),No:Bh.bind(null,e),Lo:Hh.bind(null,e),p_:$h.bind(null,e)}),e.G_.push(async t=>{t?(e.J_.h_(),jh(e)?Uh(e):e.j_.set("Unknown")):(await e.J_.stop(),Vh(e))})),e.J_}function id(e){return e.Y_||(e.Y_=function(e,t,n){const r=ho(e);return r.M_(),new Ih(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{xo:()=>Promise.resolve(),No:Jh.bind(null,e),Lo:td.bind(null,e),D_:Zh.bind(null,e),v_:ed.bind(null,e)}),e.G_.push(async t=>{t?(e.Y_.h_(),await Wh(e)):(await e.Y_.stop(),e.K_.length>0&&(so(xh,`Stopping write stream with ${e.K_.length} pending writes`),e.K_=[]))})),e.Y_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class sd{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new mo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new sd(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new po(fo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function od(e,t){if(oo("AsyncQueue",`${t}: ${e}`),$o(e))return new po(fo.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{static emptySet(e){return new ad(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||Uo.comparator(t.key,n.key):(e,t)=>Uo.comparator(e.key,t.key),this.keyedMap=Pl(),this.sortedSet=new Zo(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ad))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ad;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(){this.Z_=new Zo(Uo.comparator)}track(e){const t=e.doc.key,n=this.Z_.get(t);n?0!==e.type&&3===n.type?this.Z_=this.Z_.insert(t,e):3===e.type&&1!==n.type?this.Z_=this.Z_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Z_=this.Z_.remove(t):1===e.type&&2===n.type?this.Z_=this.Z_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):co():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,n)=>{e.push(n)}),e}}class cd{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new cd(e,t,ad.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Il(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class hd{constructor(){this.queries=dd(),this.onlineState="Unknown",this.ia=new Set}terminate(){!function(e,t){const n=ho(e),r=n.queries;n.queries=dd(),r.forEach((e,n)=>{for(const r of n.ta)r.onError(t)})}(this,new po(fo.ABORTED,"Firestore shutting down"))}}function dd(){return new Rl(e=>Cl(e),Il)}function fd(e,t){const n=ho(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.ta)e.oa(i)&&(r=!0);t.ea=i}}r&&md(n)}function pd(e,t,n){const r=ho(e),i=r.queries.get(t);if(i)for(const s of i.ta)s.onError(n);r.queries.delete(t)}function md(e){e.ia.forEach(e=>{e.next()})}var gd,yd;(yd=gd||(gd={}))._a="default",yd.Cache="cache";class vd{constructor(e,t,n){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=n||{}}oa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new cd(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache)return!0;if(!this.ra())return!0;const n="Offline"!==t;return(!this.options.Ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Pa(e){e=cd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==gd.Cache}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this.key=e}}class _d{constructor(e){this.key=e}}class Td{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Bl(),this.mutatedKeys=Bl(),this.ya=xl(e),this.wa=new ad(this.ya)}get ba(){return this.fa}Sa(e,t){const n=t?t.Da:new ld,r=t?t.wa:this.wa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Al(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.va(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ya(u,a)>0||l&&this.ya(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{wa:s,Da:n,ls:o,mutatedKeys:i}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const s=e.Da.X_();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return co()}};return n(e)-n(t)}(e.type,t.type)||this.ya(e.doc,t.doc)),this.Ca(n),r=null!=r&&r;const o=t&&!r?this.Fa():[],a=0===this.pa.size&&this.current&&!r?1:0,l=a!==this.ga;return this.ga=a,0!==s.length||l?{snapshot:new cd(this.query,e.wa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ma:o}:{Ma:o}}sa(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({wa:this.wa,Da:new ld,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(e=>this.fa=this.fa.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.fa=this.fa.delete(e)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Bl(),this.wa.forEach(e=>{this.xa(e.key)&&(this.pa=this.pa.add(e.key))});const t=[];return e.forEach(e=>{this.pa.has(e)||t.push(new _d(e))}),this.pa.forEach(n=>{e.has(n)||t.push(new Ed(n))}),t}Oa(e){this.fa=e.gs,this.pa=Bl();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return cd.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,0===this.ga,this.hasCachedResults)}}const wd="SyncEngine";class bd{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Sd{constructor(e){this.key=e,this.Ba=!1}}class Id{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.La={},this.ka=new Rl(e=>Cl(e),Il),this.qa=new Map,this.Qa=new Set,this.$a=new Zo(Uo.comparator),this.Ka=new Map,this.Ua=new Fu,this.Wa={},this.Ga=new Map,this.za=Nu.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return!0===this.ja}}async function Cd(e,t,n=!0){const r=Wd(e);let i;const s=r.ka.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Na()):i=await Ad(r,t,n,!0),i}async function Nd(e,t){const n=Wd(e);await Ad(n,t,!0,!1)}async function Ad(e,t,n,r){const i=await function(e,t){const n=ho(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Hr.getTargetData(e,t).next(i=>i?(r=i,Ho.resolve(r)):n.Hr.allocateTargetId(e).next(i=>(r=new Eu(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Hr.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ts=n.Ts.insert(e.targetId,e),n.Is.set(t,e.targetId)),e})}(e.localStore,wl(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await async function(e,t,n,r,i){e.Ha=(t,n,r)=>async function(e,t,n,r){let i=t.view.Sa(n);i.ls&&(i=await sh(e.localStore,t.query,!1).then(({documents:e})=>t.view.Sa(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Kd(e,t.targetId,a.Ma),a.snapshot}(e,t,n,r);const s=await sh(e.localStore,t,!0),o=new Td(t,s.gs),a=o.Sa(s.documents),l=Pc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Kd(e,n,c.Ma);const u=new bd(t,n,o);return e.ka.set(t,u),e.qa.has(n)?e.qa.get(n).push(t):e.qa.set(n,[t]),c.snapshot}(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Lh(e.remoteStore,i),a}async function xd(e,t,n){const r=ho(e),i=r.ka.get(t),s=r.qa.get(i.targetId);if(s.length>1)return r.qa.set(i.targetId,s.filter(e=>!Il(e,t))),void r.ka.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ih(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Mh(r.remoteStore,i.targetId),Fd(r,i.targetId)}).catch(Bo)):(Fd(r,i.targetId),await ih(r.localStore,i.targetId,!0))}async function Od(e,t){const n=ho(e),r=n.ka.get(t),i=n.qa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mh(n.remoteStore,r.targetId))}async function Rd(e,t,n){const r=function(e){const t=ho(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Pd.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=kd.bind(null,t),t}(e);try{const e=await function(e,t){const n=ho(e),r=Oo.now(),i=t.reduce((e,t)=>e.add(t.key),Bl());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Ll(),l=Bl();return n.ds.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=fc(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new gc(e.key,t,Ha(t.value.mapValue),ac.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:kl(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Wa[e.currentUser.toKey()];r||(r=new Zo(Co)),r=r.insert(t,n),e.Wa[e.currentUser.toKey()]=r}(r,e.batchId,n),await $d(r,e.changes),await Wh(r.remoteStore)}catch(i){const e=od(i,"Failed to persist write");n.reject(e)}}async function Dd(e,t){const n=ho(e);try{const e=await nh(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Ka.get(t);r&&(uo(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ba=!0:e.modifiedDocuments.size>0?uo(r.Ba):e.removedDocuments.size>0&&(uo(r.Ba),r.Ba=!1))}),await $d(n,e,t)}catch(r){await Bo(r)}}function Ld(e,t,n){const r=ho(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ka.forEach((n,r)=>{const i=r.view.sa(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=ho(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.ta)i.sa(t)&&(r=!0)}),r&&md(n)}(r.eventManager,t),e.length&&r.La.p_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Md(e,t,n){const r=ho(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ka.get(t),s=i&&i.key;if(s){let e=new Zo(Uo.comparator);e=e.insert(s,$a.newNoDocument(s,Ro.min()));const n=Bl().add(s),i=new Mc(Ro.min(),new Map,new Zo(Co),e,n);await Dd(r,i),r.$a=r.$a.remove(s),r.Ka.delete(t),Hd(r)}else await ih(r.localStore,t,!1).then(()=>Fd(r,t,n)).catch(Bo)}async function Pd(e,t){const n=ho(e),r=t.batch.batchId;try{const e=await function(e,t){const n=ho(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.ds.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Ho.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);uo(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Bl();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);jd(n,r,null),Ud(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $d(n,e)}catch(i){await Bo(i)}}async function kd(e,t,n){const r=ho(e);try{const e=await function(e,t){const n=ho(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(uo(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);jd(r,t,n),Ud(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await $d(r,e)}catch(i){await Bo(i)}}function Ud(e,t){(e.Ga.get(t)||[]).forEach(e=>{e.resolve()}),e.Ga.delete(t)}function jd(e,t,n){const r=ho(e);let i=r.Wa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Wa[r.currentUser.toKey()]=i}}function Fd(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.qa.get(t))e.ka.delete(r),n&&e.La.Ja(r,n);e.qa.delete(t),e.isPrimaryClient&&e.Ua.Sr(t).forEach(t=>{e.Ua.containsKey(t)||Vd(e,t)})}function Vd(e,t){e.Qa.delete(t.path.canonicalString());const n=e.$a.get(t);null!==n&&(Mh(e.remoteStore,n),e.$a=e.$a.remove(t),e.Ka.delete(n),Hd(e))}function Kd(e,t,n){for(const r of n)r instanceof Ed?(e.Ua.addReference(r.key,t),Bd(e,r)):r instanceof _d?(so(wd,"Document no longer in limbo: "+r.key),e.Ua.removeReference(r.key,t),e.Ua.containsKey(r.key)||Vd(e,r.key)):co()}function Bd(e,t){const n=t.key,r=n.path.canonicalString();e.$a.get(n)||e.Qa.has(r)||(so(wd,"New document in limbo: "+n),e.Qa.add(r),Hd(e))}function Hd(e){for(;e.Qa.size>0&&e.$a.size<e.maxConcurrentLimboResolutions;){const t=e.Qa.values().next().value;e.Qa.delete(t);const n=new Uo(Mo.fromString(t)),r=e.za.next();e.Ka.set(r,new Sd(n)),e.$a=e.$a.insert(n,r),Lh(e.remoteStore,new Eu(wl(vl(n.path)),r,"TargetPurposeLimboResolution",qo.ae))}}async function $d(e,t,n){const r=ho(e),i=[],s=[],o=[];r.ka.isEmpty()||(r.ka.forEach((e,a)=>{o.push(r.Ha(a,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Gu.Yi(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.La.p_(i),await async function(e,t){const n=ho(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Ho.forEach(t,t=>Ho.forEach(t.Hi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Ho.forEach(t.Ji,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(r){if(!$o(r))throw r;so(Ju,"Failed to update sequence numbers: "+r)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.Ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ts=n.Ts.insert(e,i)}}}(r.localStore,s))}async function qd(e,t){const n=ho(e);if(!n.currentUser.isEqual(t)){so(wd,"User change. New user:",t.toKey());const e=await eh(n.localStore,t);n.currentUser=t,i="'waitForPendingWrites' promise is rejected due to a user change.",(r=n).Ga.forEach(e=>{e.forEach(e=>{e.reject(new po(fo.CANCELLED,i))})}),r.Ga.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await $d(n,e.Rs)}var r,i}function zd(e,t){const n=ho(e),r=n.Ka.get(t);if(r&&r.Ba)return Bl().add(r.key);{let e=Bl();const r=n.qa.get(t);if(!r)return e;for(const t of r){const r=n.ka.get(t);e=e.unionWith(r.view.ba)}return e}}function Wd(e){const t=ho(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Dd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=zd.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Md.bind(null,t),t.La.p_=fd.bind(null,t.eventManager),t.La.Ja=pd.bind(null,t.eventManager),t}class Yd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_h(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return function(e,t,n,r){return new Zu(e,t,n,r)}(this.persistence,new Qu,e.initialUser,this.serializer)}Xa(e){return new qu(Wu.ri,this.serializer)}Za(e){return new ah}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yd.provider={build:()=>new Yd};class Gd extends Yd{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){uo(this.persistence.referenceDelegate instanceof Yu);const n=this.persistence.referenceDelegate.garbageCollector;return new Ru(n,e.asyncQueue,t)}Xa(e){const t=void 0!==this.cacheSizeBytes?Cu.withCacheSize(this.cacheSizeBytes):Cu.DEFAULT;return new qu(e=>Yu.ri(e,t),this.serializer)}}class Xd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ld(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=qd.bind(null,this.syncEngine),await async function(e,t){const n=ho(e);t?(n.W_.delete(2),await Rh(n)):t||(n.W_.add(2),await Dh(n),n.j_.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new hd}createDatastore(e){const t=_h(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new vh(r));var r;return function(e,t,n,r){return new Nh(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Ld(this.syncEngine,e,0),s=uh.D()?new uh:new lh,new Oh(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Id(e,t,n,r,i,s);return o&&(a.ja=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=ho(e);so(xh,"RemoteStore shutting down."),t.W_.add(5),await Dh(t),t.z_.shutdown(),t.j_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Xd.provider={build:()=>new Xd};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Qd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):oo("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="FirestoreClient";class Zd{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=to.UNAUTHENTICATED,this.clientId=Io.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{so(Jd,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(so(Jd,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=od(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function ef(e,t){e.asyncQueue.verifyOperationInProgress(),so(Jd,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await eh(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function tf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){so(Jd,"Using user provided OfflineComponentProvider");try{await ef(e,e._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!("FirebaseError"===(n=i).name?n.code===fo.FAILED_PRECONDITION||n.code===fo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code))throw i;ao("Error using user provided cache. Falling back to memory cache: "+i),await ef(e,new Yd)}}else so(Jd,"Using default OfflineComponentProvider"),await ef(e,new Gd(void 0));var n;return e._offlineComponents}(e);so(Jd,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>nd(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>nd(t.remoteStore,n)),e._onlineComponents=t}async function nf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(so(Jd,"Using user provided OnlineComponentProvider"),await tf(e,e._uninitializedComponentsProvider._online)):(so(Jd,"Using default OnlineComponentProvider"),await tf(e,new Xd))),e._onlineComponents}async function rf(e){const t=await nf(e),n=t.eventManager;return n.onListen=Cd.bind(null,t.syncEngine),n.onUnlisten=xd.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Nd.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Od.bind(null,t.syncEngine),n}function sf(e,t,n={}){const r=new mo;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Qd({next:n=>{s.su(),t.enqueueAndForget(()=>async function(e,t){const n=ho(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.ta.indexOf(t);e>=0&&(s.ta.splice(e,1),0===s.ta.length?i=t.ra()?0:1:!s.na()&&t.ra()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}(e,o)),n.fromCache&&"server"===r.source?i.reject(new po(fo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new vd(n,s,{includeMetadataChanges:!0,Ta:!0});return async function(t,n){const r=ho(t);let i=3;const s=n.query;let o=r.queries.get(s);o?!o.na()&&n.ra()&&(i=2):(o=new ud,i=n.ra()?0:1);try{switch(i){case 0:o.ea=await r.onListen(s,!0);break;case 1:o.ea=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(e){const r=od(e,`Initialization of query '${Nl(n.query)}' failed`);return void n.onError(r)}r.queries.set(s,o),o.ta.push(n),n.sa(r.onlineState),o.ea&&n.oa(o.ea)&&md(r)}(e,o)}(await rf(e),e.asyncQueue,t,n,r)),r.promise
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function of(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const af=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(e,t,n){if(!n)throw new po(fo.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function cf(e){if(!Uo.isDocumentKey(e))throw new po(fo.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function uf(e){if(Uo.isDocumentKey(e))throw new po(fo.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function hf(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":co()}function df(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new po(fo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=hf(e);throw new po(fo.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff="firestore.googleapis.com",pf=!0;class mf{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new po(fo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ff,this.ssl=pf}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:pf;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Iu;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new po(fo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new po(fo.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=of(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new po(fo.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new po(fo.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new po(fo.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class gf{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new po(fo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new po(fo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mf(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new yo;switch(e.type){case"firstParty":return new To(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new po(fo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=af.get(e);t&&(so("ComponentProvider","Removing Datastore"),af.delete(e),t.terminate())}(this),Promise.resolve()}}function yf(e,t,n,r={}){var i;const s=(e=df(e,gf))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:e._getEmulatorOptions()}),a=`${t}:${n}`;s.host!==ff&&s.host!==a&&ao("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:r});if(!et(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=to.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ke(JSON.stringify({alg:"none",type:"JWT"})),Ke(JSON.stringify(s)),""].join(".")}(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new po(fo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new to(s)}e._authCredentials=new vo(new go(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new vf(this.firestore,e,this._query)}}class Ef{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _f(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ef(this.firestore,e,this._key)}}class _f extends vf{constructor(e,t,n){super(e,t,vl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ef(this.firestore,null,new Uo(e))}withConverter(e){return new _f(this.firestore,e,this._path)}}function Tf(e,t,...n){if(e=at(e),lf("collection","path",t),e instanceof gf){const r=Mo.fromString(t,...n);return uf(r),new _f(e,null,r)}{if(!(e instanceof Ef||e instanceof _f))throw new po(fo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Mo.fromString(t,...n));return uf(r),new _f(e.firestore,null,r)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const wf="AsyncQueue";class bf{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Th(this,"async_queue_retry"),this.bu=()=>{const e=Eh();e&&so(wf,"Visibility state changed to "+e.visibilityState),this.a_.t_()},this.Su=e;const t=Eh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Eh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new mo;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(0!==this.Vu.length){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!$o(e))throw e;so(wf,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(e=>{this.gu=e,this.pu=!1;throw oo("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.pu=!1,e))));return this.Su=t,t}enqueueAfterDelay(e,t,n){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const r=sd.createAndSchedule(this,e,t,n,e=>this.Fu(e));return this.fu.push(r),r}Du(){this.gu&&co()}verifyOperationInProgress(){}async Mu(){let e;do{e=this.Su,await e}while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}class Sf extends gf{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new bf,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bf(e),this._firestoreClient=void 0,await e}}}function If(e){if(e._terminated)throw new po(fo.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,n,r;const i=e._freezeSettings(),s=(o=e._databaseId,a=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",l=e._persistenceKey,c=i,new va(o,a,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,of(c.experimentalLongPollingOptions),c.useFetchStreams));var o,a,l,c;e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Zd(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e),e._firestoreClient}class Cf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cf(oa.fromBase64String(e))}catch(t){throw new po(fo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Cf(oa.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new po(fo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ko(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new po(fo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new po(fo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Co(this._lat,e._lat)||Co(this._long,e._long)}}
/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf=/^__.*__$/;class Df{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new gc(e,this.data,this.fieldMask,t,this.fieldTransforms):new mc(e,this.data,t,this.fieldTransforms)}}function Lf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw co()}}class Mf{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Bu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new Mf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.$u(e),r}Ku(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ku({path:n,Qu:!1});return r.Bu(),r}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return zf(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(0===e.length)throw this.Wu("Document fields must not be empty");if(Lf(this.Lu)&&Rf.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class Pf{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||_h(e)}ju(e,t,n,r=!1){return new Mf({Lu:e,methodName:t,zu:n,path:ko.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kf(e){const t=e._freezeSettings(),n=_h(e._databaseId);return new Pf(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Uf(e,t,n,r,i,s={}){const o=e.ju(s.merge||s.mergeFields?2:0,t,n,i);Bf("Data must be an object, but it was:",o,r);const a=Vf(r,o);let l,c;if(s.merge)l=new ia(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Hf(t,r,n);if(!o.contains(i))throw new po(fo.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Wf(e,i)||e.push(i)}l=new ia(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new Df(new Ba(a),l,c)}class jf extends Af{_toFieldTransform(e){return new sc(e.path,new Ql)}isEqual(e){return e instanceof jf}}function Ff(e,t){if(Kf(e=at(e)))return Bf("Unsupported field value:",t,e),Vf(e,t);if(e instanceof Af)return function(e,t){if(!Lf(t.Lu))throw t.Wu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Wu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Qu&&4!==t.Lu)throw t.Wu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Ff(i,t.Uu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=at(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return zl(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Oo.fromDate(e);return{timestampValue:Yc(t.serializer,n)}}if(e instanceof Oo){const n=new Oo(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Yc(t.serializer,n)}}if(e instanceof xf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Cf)return{bytesValue:Gc(t.serializer,e._byteString)};if(e instanceof Ef){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Wu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Jc(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Of)return n=e,r=t,{mapValue:{fields:{[Ta]:{stringValue:Sa},[Ia]:{arrayValue:{values:n.toArray().map(e=>{if("number"!=typeof e)throw r.Wu("VectorValues must only contain numeric values.");return $l(r.serializer,e)})}}}}};var n,r;throw t.Wu(`Unsupported field value: ${hf(e)}`)}(e,t)}function Vf(e,t){const n={};return Jo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qo(e,(e,r)=>{const i=Ff(r,t.qu(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Kf(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Oo||e instanceof xf||e instanceof Cf||e instanceof Ef||e instanceof Af||e instanceof Of)}function Bf(e,t,n){if(!Kf(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){const r=hf(n);throw"an object"===r?t.Wu(e+" a custom object"):t.Wu(e+" "+r)}var r}function Hf(e,t,n){if((t=at(t))instanceof Nf)return t._internalPath;if("string"==typeof t)return qf(e,t);throw zf("Field path arguments must be of type string or ",e,!1,void 0,n)}const $f=new RegExp("[~\\*/\\[\\]]");function qf(e,t,n){if(t.search($f)>=0)throw zf(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Nf(...t.split("."))._internalPath}catch(r){throw zf(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function zf(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new po(fo.INVALID_ARGUMENT,a+e+l)}function Wf(e,t){return e.some(e=>e.isEqual(t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ef(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Gf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Xf("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Gf extends Yf{data(){return super.data()}}function Xf(e,t){return"string"==typeof t?qf(e,t):t instanceof Nf?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{}class Jf extends Qf{}function Zf(e,t,...n){let r=[];t instanceof Qf&&r.push(t),r=r.concat(n),function(e){const t=e.filter(e=>e instanceof np).length,n=e.filter(e=>e instanceof ep).length;if(t>1||t>0&&n>0)throw new po(fo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class ep extends Jf{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new ep(e,t,n)}_apply(e){const t=this._parse(e);return ap(e._query,t),new vf(e.firestore,e.converter,bl(e._query,t))}_parse(e){const t=kf(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new po(fo.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){op(o,s);const t=[];for(const n of o)t.push(sp(r,e,n));a={arrayValue:{values:t}}}else a=sp(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||op(o,s),a=function(e,t,n,r=!1){return Ff(n,e.ju(r?4:3,t))}(n,t,o,"in"===s||"not-in"===s);return Qa.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function tp(e,t,n){const r=t,i=Xf("where",e);return ep._create(i,r,n)}class np extends Qf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new np(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Ja.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)ap(n,i),n=bl(n,i)}(e._query,t),new vf(e.firestore,e.converter,bl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class rp extends Jf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new rp(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new po(fo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new po(fo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ya(t,n)}(e._query,this._field,this._direction);return new vf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new yl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function ip(e,t="asc"){const n=t,r=Xf("orderBy",e);return rp._create(r,n)}function sp(e,t,n){if("string"==typeof(n=at(n))){if(""===n)throw new po(fo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_l(t)&&-1!==n.indexOf("/"))throw new po(fo.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Mo.fromString(n));if(!Uo.isDocumentKey(r))throw new po(fo.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Pa(e,new Uo(r))}if(n instanceof Ef)return Pa(e,n._key);throw new po(fo.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hf(n)}.`)}function op(e,t){if(!Array.isArray(e)||0===e.length)throw new po(fo.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function ap(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new po(fo.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new po(fo.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class lp{convertValue(e,t="none"){switch(Ca(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ca(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ua(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw co()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Qo(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t[Ia].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>ca(e.doubleValue));return new Of(i)}convertGeoPoint(e){return new xf(ca(e.latitude),ca(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ga(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ya(e));default:return null}}convertTimestamp(e){const t=la(e);return new Oo(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Mo.fromString(e);uo(vu(n));const r=new _a(n.get(1),n.get(3)),i=new Uo(n.popFirst(5));return r.isEqual(t)||oo(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class cp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class up extends Yf{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Xf("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class hp extends up{data(e={}){return super.data(e)}}class dp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new cp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new hp(this._firestore,this._userDataWriter,n.key,n,new cp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new po(fo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new hp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new cp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new hp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new cp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:fp(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return co()}}class pp extends lp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ef(this.firestore,null,t)}}function mp(e){e=df(e,vf);const t=df(e.firestore,Sf),n=If(t),r=new pp(t);return function(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new po(fo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}(e._query),sf(n,e._query).then(n=>new dp(t,r,e,n))}function gp(e,t){const n=df(e.firestore,Sf),r=function(e,t,...n){if(e=at(e),1===arguments.length&&(t=Io.newId()),lf("doc","path",t),e instanceof gf){const r=Mo.fromString(t,...n);return cf(r),new Ef(e,null,new Uo(r))}{if(!(e instanceof Ef||e instanceof _f))throw new po(fo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Mo.fromString(t,...n));return cf(r),new Ef(e.firestore,e instanceof _f?e.converter:null,new Uo(r))}}(e),i=function(e,t){let n;return n=e?e.toFirestore(t):t,n}(e.converter,t);return function(e,t){return function(e,t){const n=new mo;return e.asyncQueue.enqueueAndForget(async()=>Rd(await function(e){return nf(e).then(e=>e.syncEngine)}(e),t,n)),n.promise}(If(e),t)}(n,[Uf(kf(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ac.exists(!1))]).then(()=>r)}function yp(){return new jf("serverTimestamp")}!function(e,t=!0){no=bn,vn(new lt("firestore",(e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new Sf(new Eo(e.getProvider("auth-internal")),new bo(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new po(fo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _a(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),Cn(Zs,eo,e),Cn(Zs,eo,"esm2017")}();const vp=Sn({apiKey:"AIzaSyAox5F9sZf-IupjWqUM2OaBVeLwNa2iboI",authDomain:"snresturent-ae70b.firebaseapp.com",projectId:"snresturent-ae70b",storageBucket:"snresturent-ae70b.firebasestorage.app",messagingSenderId:"827661719570",appId:"1:827661719570:web:fb1779a3fb94691b5820cb"}),Ep=function(e=In()){const t=En(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=En(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(et(n.getOptions(),null!=t?t:{}))return e;Bn(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ms,persistence:[Qi,Mi,ki]}),r=We("authTokenSyncURL");if(r&&"boolean"==typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>js)return;const r=null==t?void 0:t.token;Fs!==r&&(Fs=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){at(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){at(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=qe("auth");return s&&ii(n,`http://${s}`),n}(vp),_p=function(e){const t="object"==typeof e?e:In(),n="string"==typeof e?e:Ea,r=En(t,"firestore").getImmediate({identifier:n});if(!r._initialized){const e=(e=>{const t=qe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&yf(r,...e)}return r}(vp),Tp=_.createContext(null);function wp(){return _.useContext(Tp)}function bp({children:t}){const[n,r]=_.useState(null),[i,s]=_.useState(!0);_.useEffect(()=>{var e,t,n;return e=e=>{r(e),s(!1)},at(Ep).onAuthStateChanged(e,t,n)},[]);const o={currentUser:n,loading:i,login:function(e,t){return xi(Ep,e,t)},register:async function(e,t,n){const r=await async function(e,t,n){if(_n(e.app))return Promise.reject(qn(e));const r=Yr(e),i=ri(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",wi),s=await i.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&Ai(e),t}),o=await bi._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(Ep,e,t);return r.user&&await Oi(r.user,{displayName:n}),r},logout:function(){return at(Ep).signOut()},resetPassword:function(e){return async function(e,t){const n=Yr(e),r={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};await ri(n,r,"getOobCode",ui)}(Ep,e)},updateUserProfile:function(e){if(!n)throw new Error("No user logged in");return Oi(n,{displayName:e})}};return e.jsx(Tp.Provider,{value:o,children:!i&&t})}const Sp=({children:t})=>{const{cartItems:n,removeFromCart:r,updateQuantity:i,cartTotal:s,cartCount:o}=ne(),{currentUser:a}=wp(),l=T(),[c,u]=w.useState(!1),h=e=>`${e.toFixed(2)}`;return e.jsxs(Ne,{open:c,onOpenChange:u,children:[e.jsx(Ae,{asChild:!0,children:t||e.jsxs(oe,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(P,{className:"h-5 w-5"}),o>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-amber-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:o})]})}),e.jsxs(Le,{className:"w-full sm:max-w-md flex flex-col",children:[e.jsxs(Me,{className:"space-y-2 pb-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(ke,{className:"text-xl font-bold",children:"Your Cart"})}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[o," ",1===o?"item":"items"," in your cart"]})]}),0===n.length?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-4 py-12",children:[e.jsx(P,{className:"h-12 w-12 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Your cart is empty"}),e.jsx(xe,{asChild:!0,children:e.jsx(oe,{variant:"default",className:"bg-amber-600 hover:bg-amber-700 text-white",children:"Continue Shopping"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 overflow-auto py-4",children:e.jsx("div",{className:"space-y-4",children:n.map(t=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"h-20 w-20 rounded-md overflow-hidden bg-muted",children:e.jsx("img",{src:t.image,alt:t.name,className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h4",{className:"font-medium",children:t.name}),e.jsx(oe,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-destructive",onClick:()=>r(t.id),children:e.jsx(k,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:t.description}),e.jsxs("div",{className:"mt-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center border rounded-md",children:[e.jsx(oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-none",onClick:()=>i(t.id,t.quantity-1),children:e.jsx(U,{className:"h-3 w-3"})}),e.jsx("span",{className:"w-8 text-center",children:t.quantity}),e.jsx(oe,{variant:"ghost",size:"icon",className:"h-8 w-8 rounded-none",onClick:()=>i(t.id,t.quantity+1),children:e.jsx(j,{className:"h-3 w-3"})})]}),e.jsx("p",{className:"font-medium",children:h(t.price*t.quantity)})]})]})]},t.id))})}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(he,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:h(s)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Delivery"}),e.jsx("span",{children:s>0?"Free":h(0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tax (5%)"}),e.jsx("span",{children:h(.05*s)})]}),e.jsx(he,{}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:h(s+.05*s)})]})]}),e.jsxs(Pe,{className:"flex-col gap-2 sm:flex-col",children:[e.jsx(oe,{className:"w-full bg-amber-600 hover:bg-amber-700 text-white",onClick:()=>{a?(u(!1),l("/checkout")):(u(!1),l("/login"))},children:"Checkout"}),e.jsx(xe,{asChild:!0,children:e.jsx(oe,{variant:"outline",className:"w-full",children:"Continue Shopping"})})]})]})]})]})]})},Ip=_.forwardRef(({className:t,children:n,...r},i)=>e.jsxs(d,{ref:i,className:ie("relative z-10 flex max-w-max flex-1 items-center justify-center",t),...r,children:[n,e.jsx(Op,{})]}));Ip.displayName=d.displayName;const Cp=_.forwardRef(({className:t,...n},r)=>e.jsx(f,{ref:r,className:ie("group flex flex-1 list-none items-center justify-center space-x-1",t),...n}));Cp.displayName=f.displayName;const Np=v,Ap=M("group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-accent/50 data-[state=open]:bg-accent/50");_.forwardRef(({className:t,children:n,...r},i)=>e.jsxs(p,{ref:i,className:ie(Ap(),"group",t),...r,children:[n," ",e.jsx(ve,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-300 group-data-[state=open]:rotate-180","aria-hidden":"true"})]})).displayName=p.displayName;_.forwardRef(({className:t,...n},r)=>e.jsx(m,{ref:r,className:ie("left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",t),...n})).displayName=m.displayName;const xp=E,Op=_.forwardRef(({className:t,...n},r)=>e.jsx("div",{className:ie("absolute left-0 top-full flex justify-center"),children:e.jsx(g,{className:ie("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",t),ref:r,...n})}));Op.displayName=g.displayName;_.forwardRef(({className:t,...n},r)=>e.jsx(y,{ref:r,className:ie("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",t),...n,children:e.jsx("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})})).displayName=y.displayName;const Rp=({cartItemCount:t=0,isLandingPage:n=!1})=>{const{currentUser:r,logout:i}=wp(),s=!!r,[o,a]=_.useState(!1),[l,c]=_.useState(!1),u=b(),{cartCount:h}=ne();_.useEffect(()=>{a(!1)},[u]),_.useEffect(()=>{const e=()=>{window.scrollY>50?c(!0):c(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const d=()=>{a(!o)},f=async()=>{try{await i()}catch(e){}};return e.jsx(e.Fragment,{children:e.jsxs("nav",{className:"fixed top-0 left-0 w-full h-20 z-50 "+(n?l?"bg-slate-900/80 backdrop-blur-sm shadow-md":"bg-transparent":"bg-slate-900 shadow-md"),style:{transform:"translate3d(0, 0, 0)",willChange:"auto",backfaceVisibility:"hidden",contain:"layout",overflow:"visible"},children:[e.jsxs("div",{className:"container mx-auto px-4 h-full flex items-center justify-between",style:{minHeight:"80px",maxHeight:"80px",position:"relative",isolation:"isolate",overflow:"hidden"},children:[e.jsx(S,{to:"/",className:"flex items-center group",children:e.jsx("img",{src:"./assets/images/logo/bengal-bay.png",alt:"Bengal Bay Logo",className:"h-10 w-auto transition-all duration-300 group-hover:scale-110 group-hover:drop-shadow-lg"})}),e.jsx("div",{className:"hidden md:block",children:e.jsx(Ip,{children:e.jsxs(Cp,{children:[e.jsx(Np,{children:e.jsx(xp,{className:"px-4 py-2 transition-all duration-300 relative font-medium text-lg rounded-lg hover:bg-white/10 hover:scale-105 "+("/menu"===u.pathname?"text-amber-600":"text-white hover:text-amber-600"),asChild:!0,children:e.jsxs(S,{to:"/menu",children:["Menu","/menu"===u.pathname&&e.jsx("span",{className:"absolute left-1/2 -translate-x-1/2 bottom-0 w-8 h-1 bg-gradient-to-r from-amber-400 to-amber-600 rounded-full animate-fade-in"})]})})}),e.jsx(Np,{children:e.jsx(xp,{className:"px-4 py-2 transition-all duration-300 relative font-medium text-lg rounded-lg hover:bg-white/10 hover:scale-105 "+("/gallery"===u.pathname?"text-amber-600":"text-white hover:text-amber-600"),asChild:!0,children:e.jsxs(S,{to:"/gallery",children:["Gallery","/gallery"===u.pathname&&e.jsx("span",{className:"absolute left-1/2 -translate-x-1/2 bottom-0 w-8 h-1 bg-gradient-to-r from-amber-400 to-amber-600 rounded-full animate-fade-in"})]})})}),e.jsx(Np,{children:e.jsx(xp,{className:"px-4 py-2 transition-all duration-300 relative font-medium text-lg rounded-lg hover:bg-white/10 hover:scale-105 "+("/reservations"===u.pathname?"text-amber-600":"text-white hover:text-amber-600"),asChild:!0,children:e.jsxs(S,{to:"/reservations",children:["Reservations","/reservations"===u.pathname&&e.jsx("span",{className:"absolute left-1/2 -translate-x-1/2 bottom-0 w-8 h-1 bg-gradient-to-r from-amber-400 to-amber-600 rounded-full animate-fade-in"})]})})}),e.jsx(Np,{children:e.jsx(xp,{className:"px-4 py-2 transition-all duration-300 relative font-medium text-lg rounded-lg hover:bg-white/10 hover:scale-105 "+("/about"===u.pathname?"text-amber-600":"text-white hover:text-amber-600"),asChild:!0,children:e.jsxs(S,{to:"/about",children:["About","/about"===u.pathname&&e.jsx("span",{className:"absolute left-1/2 -translate-x-1/2 bottom-0 w-8 h-1 bg-gradient-to-r from-amber-400 to-amber-600 rounded-full animate-fade-in"})]})})}),e.jsx(Np,{children:e.jsx(xp,{className:"px-4 py-2 transition-all duration-300 relative font-medium text-lg rounded-lg hover:bg-white/10 hover:scale-105 "+("/contact"===u.pathname?"text-amber-600":"text-white hover:text-amber-600"),asChild:!0,children:e.jsxs(S,{to:"/contact",children:["Contact","/contact"===u.pathname&&e.jsx("span",{className:"absolute left-1/2 -translate-x-1/2 bottom-0 w-8 h-1 bg-gradient-to-r from-amber-400 to-amber-600 rounded-full animate-fade-in"})]})})})]})})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-4",style:{position:"relative",zIndex:1e3},children:[s?e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(oe,{variant:"ghost",size:"icon",className:"relative rounded-full text-white hover:bg-amber-100 hover:text-amber-600",style:{minWidth:"40px",minHeight:"40px",maxWidth:"40px",maxHeight:"40px"},asChild:!0,children:e.jsx(S,{to:"/profile",children:(null==r?void 0:r.photoURL)?e.jsx("img",{src:r.photoURL,alt:"Profile",className:"h-7 w-7 rounded-full object-cover border-2 border-amber-400"}):e.jsx(F,{className:"h-5 w-5"})})}),e.jsx(oe,{variant:"ghost",className:"text-white hover:text-amber-600 hover:bg-amber-50 transition-all duration-300 hover:scale-105 hover:shadow-md text-lg",onClick:f,children:"Logout"})]}):e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(oe,{variant:"ghost",className:"text-white hover:text-amber-600 hover:bg-amber-50 transition-all duration-300 hover:scale-105 hover:shadow-md text-lg",asChild:!0,children:e.jsx(S,{to:"/login",children:"Login"})}),e.jsx(oe,{variant:"default",className:"bg-amber-600 hover:bg-amber-700 text-white transition-all duration-300 hover:scale-105 hover:shadow-lg text-lg",asChild:!0,children:e.jsx(S,{to:"/register",children:"Register"})})]}),e.jsx("div",{className:"relative flex items-center",style:{position:"relative",zIndex:1e3},children:e.jsx(Sp,{children:e.jsxs(oe,{variant:"ghost",size:"icon",className:"relative rounded-full text-white hover:bg-amber-100 hover:text-amber-600","aria-label":"Open cart",style:{minWidth:"40px",minHeight:"40px",maxWidth:"40px",maxHeight:"40px"},children:[e.jsx(P,{className:"h-5 w-5"}),h>0&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-amber-600 text-white text-xs font-bold rounded-full px-1.5 py-0.5 animate-fade-in border-2 border-white",children:h})]})})})]}),e.jsx("div",{className:"md:hidden",children:e.jsx(oe,{variant:"ghost",size:"icon",onClick:d,className:"text-white hover:bg-amber-100 hover:text-amber-600 transition-all duration-300 hover:scale-110 hover:shadow-lg",style:{minWidth:"40px",minHeight:"40px"},children:o?e.jsx(V,{className:"h-6 w-6"}):e.jsx(K,{className:"h-6 w-6"})})})]}),o&&e.jsx("div",{className:"md:hidden bg-white shadow-lg absolute w-full max-h-[80vh] overflow-y-auto animate-slide-in-down",children:e.jsxs("div",{className:"flex flex-col p-4 space-y-4",children:[e.jsx(S,{to:"/menu",className:"py-2 border-b border-gray-100 "+("/menu"===u.pathname?"text-amber-600 font-medium":"text-black hover:text-amber-600"),onClick:d,children:"Menu"}),e.jsx(S,{to:"/gallery",className:"py-2 border-b border-gray-100 "+("/gallery"===u.pathname?"text-amber-600 font-medium":"text-black hover:text-amber-600"),onClick:d,children:"Gallery"}),e.jsx(S,{to:"/reservations",className:"py-2 border-b border-gray-100 "+("/reservations"===u.pathname?"text-amber-600 font-medium":"text-black hover:text-amber-600"),onClick:d,children:"Reservations"}),e.jsx(S,{to:"/about",className:"py-2 border-b border-gray-100 "+("/about"===u.pathname?"text-amber-600 font-medium":"text-black hover:text-amber-600"),onClick:d,children:"About"}),e.jsx(S,{to:"/contact",className:"py-2 border-b border-gray-100 "+("/contact"===u.pathname?"text-amber-600 font-medium":"text-black hover:text-amber-600"),onClick:d,children:"Contact"}),e.jsxs("div",{className:"pt-4 border-t border-gray-100",children:[s?e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{to:"/profile",className:"block py-2 text-black hover:text-amber-600",onClick:d,children:"My Profile"}),e.jsx(S,{to:"/profile?tab=orders",className:"block py-2 text-black hover:text-amber-600",onClick:d,children:"My Orders"}),e.jsx(S,{to:"/profile?tab=bookings",className:"block py-2 text-black hover:text-amber-600",onClick:d,children:"My Bookings"}),e.jsx(S,{to:"/profile?tab=payment",className:"block py-2 text-black hover:text-amber-600",onClick:d,children:"Payment Methods"}),e.jsx("button",{className:"block w-full text-left py-2 text-black hover:text-amber-600",onClick:()=>{f(),d()},children:"Logout"})]}):e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(oe,{variant:"ghost",className:"justify-center text-black hover:text-amber-600 hover:bg-amber-50",asChild:!0,children:e.jsx(S,{to:"/login",onClick:d,children:"Login"})}),e.jsx(oe,{variant:"default",className:"justify-center bg-amber-600 hover:bg-amber-700 text-white",asChild:!0,children:e.jsx(S,{to:"/register",onClick:d,children:"Register"})})]}),e.jsx("button",{className:"flex items-center justify-between py-3 mt-4 border-t border-gray-100 text-black hover:text-amber-600 w-full",onClick:()=>{var e;d(),null==(e=document.querySelector('[aria-label="Open cart"]'))||e.click()},children:e.jsx("span",{className:"flex items-center",children:e.jsx(Sp,{children:e.jsx("span",{className:"flex items-center",children:"Cart"})})})})]})]})})]})})},Dp=_.forwardRef(({className:t,type:n,...r},i)=>e.jsx("input",{type:n,className:ie("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),ref:i,...r}));Dp.displayName="Input";const Lp=M("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Mp=_.forwardRef(({className:t,variant:n,...r},i)=>e.jsx("div",{ref:i,role:"alert",className:ie(Lp({variant:n}),t),...r}));Mp.displayName="Alert";_.forwardRef(({className:t,...n},r)=>e.jsx("h5",{ref:r,className:ie("mb-1 font-medium leading-none tracking-tight",t),...n})).displayName="AlertTitle";const Pp=_.forwardRef(({className:t,...n},r)=>e.jsx("div",{ref:r,className:ie("text-sm [&_p]:leading-relaxed",t),...n}));Pp.displayName="AlertDescription";const kp=({className:t})=>{const[n,r]=_.useState(""),[i,s]=_.useState(!1),[o,a]=_.useState("");return e.jsxs("div",{className:t,children:[i?e.jsxs(Mp,{className:"bg-green-50 text-green-800 border-green-200 mb-4",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),e.jsx(Pp,{children:"Thank you for subscribing to our newsletter!"})]}):o?e.jsx(Mp,{className:"bg-red-50 text-red-800 border-red-200 mb-4",children:e.jsx(Pp,{children:o})}):null,e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),n&&n.includes("@"))try{await fetch("https://formsubmit.co/ajax/snresturent@gmail.com",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:n,message:`New newsletter subscription: ${n} has subscribed to Bengal Bay newsletter.`})}),s(!0),a(""),r("")}catch(t){a("Failed to subscribe. Please try again later.")}else a("Please enter a valid email address")},className:"flex gap-2",children:[e.jsx(Dp,{type:"email",placeholder:"Your email",value:n,onChange:e=>r(e.target.value),className:"bg-slate-800 border-slate-700 text-white"}),e.jsx(oe,{type:"submit",variant:"default",className:"bg-amber-500 hover:bg-amber-600",children:"Subscribe"})]})]})},Up=()=>e.jsx("footer",{className:"w-full bg-slate-900 text-white py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Bengal Bay"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(H,{size:18}),e.jsx("span",{children:"Shantipur, Landmark Station Rd, PIN: 741404"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx($,{size:18}),e.jsx("span",{children:"(555) 123-4567"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(q,{size:18}),e.jsx("span",{children:"snresturent@gmail.com"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Opening Hours"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(z,{size:18}),e.jsxs("div",{children:[e.jsx("p",{children:"Monday - Friday"}),e.jsx("p",{className:"text-gray-400",children:"11:00 AM - 10:00 PM"})]})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(z,{size:18}),e.jsxs("div",{children:[e.jsx("p",{children:"Saturday - Sunday"}),e.jsx("p",{className:"text-gray-400",children:"10:00 AM - 11:00 PM"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"/menu",className:"hover:text-amber-400 transition-colors",children:"Menu"})}),e.jsx("li",{children:e.jsx("a",{href:"/reservations",className:"hover:text-amber-400 transition-colors",children:"Reservations"})}),e.jsx("li",{children:e.jsx("a",{href:"/about",className:"hover:text-amber-400 transition-colors",children:"About Us"})}),e.jsx("li",{children:e.jsx("a",{href:"/contact",className:"hover:text-amber-400 transition-colors",children:"Contact"})}),e.jsx("li",{children:e.jsx("a",{href:"/privacy-policy",className:"hover:text-amber-400 transition-colors",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx("a",{href:"/terms-of-service",className:"hover:text-amber-400 transition-colors",children:"Terms of Service"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Newsletter"}),e.jsx("p",{className:"mb-4",children:"Subscribe to our newsletter for special offers and updates."}),e.jsx(kp,{}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-amber-400 transition-colors",children:e.jsx(W,{size:20})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-amber-400 transition-colors",children:e.jsx(Y,{size:20})}),e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"hover:text-amber-400 transition-colors",children:e.jsx(G,{size:20})})]})]})]}),e.jsx(he,{className:"my-8 bg-slate-700"}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[e.jsx("div",{className:"flex flex-col items-center md:items-start",children:e.jsxs("p",{className:"text-gray-400 text-sm",children:[" ",(new Date).getFullYear()," Bengal Bay. All rights reserved."]})}),e.jsx("p",{className:"text-gray-500 text-center text-xl mt-1",children:"Design by Soumik & Nilimesh"}),e.jsxs("div",{className:"flex gap-4 mt-4 md:mt-0",children:[e.jsx("a",{href:"/privacy-policy",className:"text-gray-400 hover:text-amber-400 text-sm transition-colors",children:"Privacy Policy"}),e.jsx("a",{href:"/terms-of-service",className:"text-gray-400 hover:text-amber-400 text-sm transition-colors",children:"Terms of Service"})]})]})]})}),jp=({size:t="md",className:n=""})=>e.jsx("div",{className:`flex justify-center items-center ${n}`,children:e.jsxs("svg",{className:`animate-spin ${{sm:"h-4 w-4",md:"h-8 w-8",lg:"h-12 w-12"}[t]} text-amber-600`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})]})}),Fp=()=>{const{cartItems:t}=ne(),[n,r]=_.useState(!1),i=_.useRef(t.length),s=_.useRef(null);_.useEffect(()=>{t.length>i.current&&(r(!0),s.current&&clearTimeout(s.current),s.current=setTimeout(()=>r(!1),12e3)),i.current=t.length},[t.length]);return n?e.jsx("div",{style:{position:"fixed",bottom:"16px",right:"16px",zIndex:99999,pointerEvents:"auto"},children:e.jsx("button",{onClick:()=>{r(!1);const e=document.querySelector('[aria-label="Open cart"]');e&&e.click()},style:{backgroundColor:"#d97706",color:"white",fontWeight:"bold",padding:"12px 24px",borderRadius:"9999px",border:"none",boxShadow:"0 4px 24px 0 rgba(0,0,0,0.18)",cursor:"pointer",fontSize:"16px",display:"flex",alignItems:"center",gap:"8px",transition:"background-color 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#b45309"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#d97706"},children:" Buy Now"})}):null},Vp=e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>t(),r.onerror=n,r.src=e}),Kp=_.lazy(()=>ee(()=>import("./home-Cwq6QgCp.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Bp=_.lazy(()=>ee(()=>import("./menu-DzdlUTqb.js"),__vite__mapDeps([9,1,2,3,10,6,5,7,8,4,11]))),Hp=_.lazy(()=>ee(()=>import("./gallery-CoEPgx3Z.js"),__vite__mapDeps([12,1,2,3,10,11,4,8]))),$p=_.lazy(()=>ee(()=>import("./about-CEvu2vs5.js"),__vite__mapDeps([13,1,2,3,5,7,8,4]))),qp=_.lazy(()=>ee(()=>import("./reservations-CO48WZHx.js"),__vite__mapDeps([14,1,2,3,5,15,8,16,17,11,4]))),zp=_.lazy(()=>ee(()=>import("./contact-CNdx1iQ6.js"),__vite__mapDeps([18,1,2,3,16,15,8,5,11,4]))),Wp=_.lazy(()=>ee(()=>import("./login-DFkRVTiR.js"),__vite__mapDeps([19,1,2,3,15,8,5,4]))),Yp=_.lazy(()=>ee(()=>import("./register-HafamOeg.js"),__vite__mapDeps([20,1,2,3,15,8,5,4]))),Gp=_.lazy(()=>ee(()=>import("./profile-LfTb2gNI.js"),__vite__mapDeps([21,1,2,3,10,5,15,8,4,7]))),Xp=_.lazy(()=>ee(()=>import("./checkout-BUS523jF.js"),__vite__mapDeps([22,1,2,3,10,5,15,8,17,11,4]))),Qp=_.lazy(()=>ee(()=>import("./NotFound-2ecoTl0M.js"),__vite__mapDeps([23,1,2,3]))),Jp=_.lazy(()=>ee(()=>import("./OrderReceipt-CKzKh7iC.js"),__vite__mapDeps([24,1,2,3,5,4,8]))),Zp=_.lazy(()=>ee(()=>import("./privacy-policy-BOcEbgvA.js"),__vite__mapDeps([25,1,2,3,8,4]))),em=_.lazy(()=>ee(()=>import("./terms-of-service-C3id9skn.js"),__vite__mapDeps([26,1,2,3,8,4])));function tm(){const t="/"===b().pathname;return w.useEffect(()=>{"undefined"!=typeof window&&"performance"in window&&performance.getEntriesByType("navigation")[0],(async()=>{const e=["./assets/images/home/p1.webp","./assets/images/logo/bengal-bay.png"];try{await Promise.all(e.map(Vp))}catch(t){}})()},[]),e.jsx(bp,{children:e.jsxs(re,{children:[e.jsx(Fp,{}),e.jsx(_.Suspense,{fallback:e.jsx(jp,{size:"lg",className:"min-h-[40vh]"}),children:e.jsxs("div",{className:"flex flex-col min-h-screen",children:[!t&&e.jsx(Rp,{isLandingPage:!1}),e.jsx("main",{className:"scroll-smooth flex-grow "+(t?"":"pt-20"),children:e.jsxs(I,{children:[e.jsx(C,{path:"/",element:e.jsx(Kp,{})}),e.jsx(C,{path:"/menu",element:e.jsx(Bp,{})}),e.jsx(C,{path:"/gallery",element:e.jsx(Hp,{})}),e.jsx(C,{path:"/about",element:e.jsx($p,{})}),e.jsx(C,{path:"/reservations",element:e.jsx(qp,{})}),e.jsx(C,{path:"/contact",element:e.jsx(zp,{})}),e.jsx(C,{path:"/login",element:e.jsx(Wp,{})}),e.jsx(C,{path:"/register",element:e.jsx(Yp,{})}),e.jsx(C,{path:"/profile",element:e.jsx(Gp,{})}),e.jsx(C,{path:"/checkout",element:e.jsx(Xp,{})}),e.jsx(C,{path:"/privacy-policy",element:e.jsx(Zp,{})}),e.jsx(C,{path:"/terms-of-service",element:e.jsx(em,{})}),e.jsx(C,{path:"/order/:id",element:e.jsx(Jp,{})}),e.jsx(C,{path:"*",element:e.jsx(Qp,{})})]})}),e.jsx(Up,{})]})})]})})}var nm,rm={},im={},sm={},om={};function am(){return nm||(nm=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.findElementInTree=e.getElementName=e.getDomElementForReactNode=e.buildNodeTree=e.getElementNameString=e.getRootReactElement=e.findReactInstance=void 0;e.findReactInstance=e=>{if(e.hasOwnProperty("_reactRootContainer"))return e._reactRootContainer._internalRoot?e._reactRootContainer._internalRoot.current:e._reactRootContainer.current;const t=Object.keys(e).find(e=>e.startsWith("__reactInternalInstance")||e.startsWith("__reactFiber")||e.startsWith("__reactContainer"));return t?e[t]:void 0};e.getRootReactElement=()=>{var t;let n="#root";document.querySelector(n)||(n="#__next");const r=document.querySelector(n);let i=null;if(r)i=(0,e.findReactInstance)(r);else{let t=function(n){var r;i||(i=(0,e.findReactInstance)(n),i||null===(r=n.childNodes)||void 0===r||r.forEach(e=>{t(e)}))};t(document.getElementsByTagName("body")[0])}return i&&!i.child&&(null===(t=i.alternate)||void 0===t?void 0:t.child)&&(i=i.alternate),i};e.getElementNameString=t=>{var n;const r=(0,e.getElementName)(t.type);return"string"!=typeof r?null===(n=null==r?void 0:r.toString)||void 0===n?void 0:n.call(r):r};e.buildNodeTree=(t,n)=>{let r={children:[]};if(r.element=t,r.parent=n,!t)return r;r.name=(0,e.getElementNameString)(t),r.props=(e=>{if(!e||"string"==typeof e)return e;const t=Object.assign({},e);return delete t.children,t})(t.memoizedProps),r.state=(e=>{if(!e)return;const{baseState:t}=e;return t||e})(t.memoizedState);let{child:i}=t;if(i)for(r.children.push(i);i.sibling;)r.children.push(i.sibling),i=i.sibling;return r.children=r.children.map(t=>(0,e.buildNodeTree)(t,r)),r};e.getDomElementForReactNode=e=>{var t,n;let r=null===(t=null==e?void 0:e.element)||void 0===t?void 0:t.stateNode;return r&&"FiberRootNode"===(null===(n=null==r?void 0:r.constructor)||void 0===n?void 0:n.name)&&(r=r.containerInfo),i=r,("object"==typeof HTMLElement?i instanceof HTMLElement:i&&"object"==typeof i&&null!==i&&1===i.nodeType&&"string"==typeof i.nodeName)?r:null;var i};const t=e=>"function"==typeof e;e.getElementName=e=>{var n;return e&&(t(e)||(e=>"object"==typeof e)(e))?e.displayName?t(e.displayName)?e.displayName():e.displayName:e.name?t(e.name)?e.name():e.name:(null===(n=e.render)||void 0===n?void 0:n.name)?e.render.name:null:e};e.findElementInTree=(e,t,n)=>{let r=[e];const i=[];for(;r.length>0;){const e=r.shift();if(t(e)&&(i.push(e),n))break;r=r.concat(e.children||[])}return i}}(om)),om}var lm,cm={exports:{}};var um,hm={};var dm,fm={},pm={},mm={},gm={exports:{}},ym=gm.exports;function vm(){return dm?gm.exports:(dm=1,e="undefined"!=typeof window?window:ym,t=function(e,t){var n=[],r=Object.getPrototypeOf,i=n.slice,s=n.flat?function(e){return n.flat.call(e)}:function(e){return n.concat.apply([],e)},o=n.push,a=n.indexOf,l={},c=l.toString,u=l.hasOwnProperty,h=u.toString,d=h.call(Object),f={},p=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},m=function(e){return null!=e&&e===e.window},g=e.document,y={type:!0,src:!0,nonce:!0,noModule:!0};function v(e,t,n){var r,i,s=(n=n||g).createElement("script");if(s.text=e,t)for(r in y)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&s.setAttribute(r,i);n.head.appendChild(s).parentNode.removeChild(s)}function E(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var _="3.7.1",T=/HTML$/i,w=function(e,t){return new w.fn.init(e,t)};function b(e){var t=!!e&&"length"in e&&e.length,n=E(e);return!p(e)&&!m(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function S(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}w.fn=w.prototype={jquery:_,constructor:w,length:0,toArray:function(){return i.call(this)},get:function(e){return null==e?i.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(w.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[a]||{},a++),"object"==typeof o||p(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(e=arguments[a]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(c&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(n=o[t],s=i&&!Array.isArray(n)?[]:i||w.isPlainObject(n)?n:{},i=!1,o[t]=w.extend(c,s,r)):void 0!==r&&(o[t]=r));return o},w.extend({expando:"jQuery"+(_+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e)||(t=r(e))&&("function"!=typeof(n=u.call(t,"constructor")&&t.constructor)||h.call(n)!==d))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){v(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(b(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r++];)n+=w.text(t);return 1===i||11===i?e.textContent:9===i?e.documentElement.textContent:3===i||4===i?e.nodeValue:n},makeArray:function(e,t){var n=t||[];return null!=e&&(b(Object(e))?w.merge(n,"string"==typeof e?[e]:e):o.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:a.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!T.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,s=e.length,o=!n;i<s;i++)!t(e[i],i)!==o&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(b(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return s(a)},guid:1,support:f}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()});var I=n.pop,C=n.sort,N=n.splice,A="[\\x20\\t\\r\\n\\f]",x=new RegExp("^"+A+"+|((?:^|[^\\\\])(?:\\\\.)*)"+A+"+$","g");w.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var O=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function R(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}w.escapeSelector=function(e){return(e+"").replace(O,R)};var D=g,L=o;!function(){var t,r,s,o,l,c,h,d,p,m,g=L,y=w.expando,v=0,E=0,_=ee(),T=ee(),b=ee(),O=ee(),R=function(e,t){return e===t&&(l=!0),0},M="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",P="(?:\\\\[\\da-fA-F]{1,6}"+A+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",k="\\["+A+"*("+P+")(?:"+A+"*([*^$|!~]?=)"+A+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+P+"))|)"+A+"*\\]",U=":("+P+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+k+")*)|.*)\\)|)",j=new RegExp(A+"+","g"),F=new RegExp("^"+A+"*,"+A+"*"),V=new RegExp("^"+A+"*([>+~]|"+A+")"+A+"*"),K=new RegExp(A+"|>"),B=new RegExp(U),H=new RegExp("^"+P+"$"),$={ID:new RegExp("^#("+P+")"),CLASS:new RegExp("^\\.("+P+")"),TAG:new RegExp("^("+P+"|[*])"),ATTR:new RegExp("^"+k),PSEUDO:new RegExp("^"+U),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+A+"*(even|odd|(([+-]|)(\\d*)n|)"+A+"*(?:([+-]|)"+A+"*(\\d+)|))"+A+"*\\)|)","i"),bool:new RegExp("^(?:"+M+")$","i"),needsContext:new RegExp("^"+A+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+A+"*((?:-\\d)?\\d*)"+A+"*\\)|)(?=[^-]|$)","i")},q=/^(?:input|select|textarea|button)$/i,z=/^h\d$/i,W=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Y=/[+~]/,G=new RegExp("\\\\[\\da-fA-F]{1,6}"+A+"?|\\\\([^\\r\\n\\f])","g"),X=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},Q=function(){le()},J=de(function(e){return!0===e.disabled&&S(e,"fieldset")},{dir:"parentNode",next:"legend"});try{g.apply(n=i.call(D.childNodes),D.childNodes),n[D.childNodes.length].nodeType}catch(Ee){g={apply:function(e,t){L.apply(e,i.call(t))},call:function(e){L.apply(e,i.call(arguments,1))}}}function Z(e,t,n,r){var i,s,o,a,l,u,h,m=t&&t.ownerDocument,v=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==v&&9!==v&&11!==v)return n;if(!r&&(le(t),t=t||c,d)){if(11!==v&&(l=W.exec(e)))if(i=l[1]){if(9===v){if(!(o=t.getElementById(i)))return n;if(o.id===i)return g.call(n,o),n}else if(m&&(o=m.getElementById(i))&&Z.contains(t,o)&&o.id===i)return g.call(n,o),n}else{if(l[2])return g.apply(n,t.getElementsByTagName(e)),n;if((i=l[3])&&t.getElementsByClassName)return g.apply(n,t.getElementsByClassName(i)),n}if(!(O[e+" "]||p&&p.test(e))){if(h=e,m=t,1===v&&(K.test(e)||V.test(e))){for((m=Y.test(e)&&ae(t.parentNode)||t)==t&&f.scope||((a=t.getAttribute("id"))?a=w.escapeSelector(a):t.setAttribute("id",a=y)),s=(u=ue(e)).length;s--;)u[s]=(a?"#"+a:":scope")+" "+he(u[s]);h=u.join(",")}try{return g.apply(n,m.querySelectorAll(h)),n}catch(E){O(e,!0)}finally{a===y&&t.removeAttribute("id")}}}return ve(e.replace(x,"$1"),t,n,r)}function ee(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function te(e){return e[y]=!0,e}function ne(e){var t=c.createElement("fieldset");try{return!!e(t)}catch(Ee){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function re(e){return function(t){return S(t,"input")&&t.type===e}}function ie(e){return function(t){return(S(t,"input")||S(t,"button"))&&t.type===e}}function se(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&J(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function oe(e){return te(function(t){return t=+t,te(function(n,r){for(var i,s=e([],n.length,t),o=s.length;o--;)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ae(e){return e&&void 0!==e.getElementsByTagName&&e}function le(e){var t,n=e?e.ownerDocument||e:D;return n!=c&&9===n.nodeType&&n.documentElement?(h=(c=n).documentElement,d=!w.isXMLDoc(c),m=h.matches||h.webkitMatchesSelector||h.msMatchesSelector,h.msMatchesSelector&&D!=c&&(t=c.defaultView)&&t.top!==t&&t.addEventListener("unload",Q),f.getById=ne(function(e){return h.appendChild(e).id=w.expando,!c.getElementsByName||!c.getElementsByName(w.expando).length}),f.disconnectedMatch=ne(function(e){return m.call(e,"*")}),f.scope=ne(function(){return c.querySelectorAll(":scope")}),f.cssHas=ne(function(){try{return c.querySelector(":has(*,:jqfake)"),!1}catch(Ee){return!0}}),f.getById?(r.filter.ID=function(e){var t=e.replace(G,X);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&d){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(G,X);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&d){var n,r,i,s=t.getElementById(e);if(s){if((n=s.getAttributeNode("id"))&&n.value===e)return[s];for(i=t.getElementsByName(e),r=0;s=i[r++];)if((n=s.getAttributeNode("id"))&&n.value===e)return[s]}return[]}}),r.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},r.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&d)return t.getElementsByClassName(e)},p=[],ne(function(e){var t;h.appendChild(e).innerHTML="<a id='"+y+"' href='' disabled='disabled'></a><select id='"+y+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||p.push("\\["+A+"*(?:value|"+M+")"),e.querySelectorAll("[id~="+y+"-]").length||p.push("~="),e.querySelectorAll("a#"+y+"+*").length||p.push(".#.+[+~]"),e.querySelectorAll(":checked").length||p.push(":checked"),(t=c.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),h.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&p.push(":enabled",":disabled"),(t=c.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||p.push("\\["+A+"*name"+A+"*="+A+"*(?:''|\"\")")}),f.cssHas||p.push(":has"),p=p.length&&new RegExp(p.join("|")),R=function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!f.sortDetached&&t.compareDocumentPosition(e)===n?e===c||e.ownerDocument==D&&Z.contains(D,e)?-1:t===c||t.ownerDocument==D&&Z.contains(D,t)?1:o?a.call(o,e)-a.call(o,t):0:4&n?-1:1)},c):c}for(t in Z.matches=function(e,t){return Z(e,null,null,t)},Z.matchesSelector=function(e,t){if(le(e),d&&!O[t+" "]&&(!p||!p.test(t)))try{var n=m.call(e,t);if(n||f.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(Ee){O(t,!0)}return Z(t,c,null,[e]).length>0},Z.contains=function(e,t){return(e.ownerDocument||e)!=c&&le(e),w.contains(e,t)},Z.attr=function(e,t){(e.ownerDocument||e)!=c&&le(e);var n=r.attrHandle[t.toLowerCase()],i=n&&u.call(r.attrHandle,t.toLowerCase())?n(e,t,!d):void 0;return void 0!==i?i:e.getAttribute(t)},Z.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},w.uniqueSort=function(e){var t,n=[],r=0,s=0;if(l=!f.sortStable,o=!f.sortStable&&i.call(e,0),C.call(e,R),l){for(;t=e[s++];)t===e[s]&&(r=n.push(s));for(;r--;)N.call(e,n[r],1)}return o=null,e},w.fn.uniqueSort=function(){return this.pushStack(w.uniqueSort(i.apply(this)))},(r=w.expr={cacheLength:50,createPseudo:te,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(G,X),e[3]=(e[3]||e[4]||e[5]||"").replace(G,X),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Z.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Z.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return $.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&B.test(n)&&(t=ue(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(G,X).toLowerCase();return"*"===e?function(){return!0}:function(e){return S(e,t)}},CLASS:function(e){var t=_[e+" "];return t||(t=new RegExp("(^|"+A+")"+e+"("+A+"|$)"))&&_(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=Z.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(j," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var c,u,h,d,f,p=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=a&&t.nodeName.toLowerCase(),E=!l&&!a,_=!1;if(m){if(s){for(;p;){for(h=t;h=h[p];)if(a?S(h,g):1===h.nodeType)return!1;f=p="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?m.firstChild:m.lastChild],o&&E){for(_=(d=(c=(u=m[y]||(m[y]={}))[e]||[])[0]===v&&c[1])&&c[2],h=d&&m.childNodes[d];h=++d&&h&&h[p]||(_=d=0)||f.pop();)if(1===h.nodeType&&++_&&h===t){u[e]=[v,d,_];break}}else if(E&&(_=d=(c=(u=t[y]||(t[y]={}))[e]||[])[0]===v&&c[1]),!1===_)for(;(h=++d&&h&&h[p]||(_=d=0)||f.pop())&&(!(a?S(h,g):1===h.nodeType)||!++_||(E&&((u=h[y]||(h[y]={}))[e]=[v,_]),h!==t)););return(_-=i)===r||_%r===0&&_/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||Z.error("unsupported pseudo: "+e);return i[y]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?te(function(e,n){for(var r,s=i(e,t),o=s.length;o--;)e[r=a.call(e,s[o])]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:te(function(e){var t=[],n=[],r=ye(e.replace(x,"$1"));return r[y]?te(function(e,t,n,i){for(var s,o=r(e,null,i,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),t[0]=null,!n.pop()}}),has:te(function(e){return function(t){return Z(e,t).length>0}}),contains:te(function(e){return e=e.replace(G,X),function(t){return(t.textContent||w.text(t)).indexOf(e)>-1}}),lang:te(function(e){return H.test(e||"")||Z.error("unsupported lang: "+e),e=e.replace(G,X).toLowerCase(),function(t){var n;do{if(n=d?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===function(){try{return c.activeElement}catch(e){}}()&&c.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:se(!1),disabled:se(!0),checked:function(e){return S(e,"input")&&!!e.checked||S(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return z.test(e.nodeName)},input:function(e){return q.test(e.nodeName)},button:function(e){return S(e,"input")&&"button"===e.type||S(e,"button")},text:function(e){var t;return S(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:oe(function(){return[0]}),last:oe(function(e,t){return[t-1]}),eq:oe(function(e,t,n){return[n<0?n+t:n]}),even:oe(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:oe(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:oe(function(e,t,n){var r;for(r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e}),gt:oe(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=re(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=ie(t);function ce(){}function ue(e,t){var n,i,s,o,a,l,c,u=T[e+" "];if(u)return t?0:u.slice(0);for(a=e,l=[],c=r.preFilter;a;){for(o in n&&!(i=F.exec(a))||(i&&(a=a.slice(i[0].length)||a),l.push(s=[])),n=!1,(i=V.exec(a))&&(n=i.shift(),s.push({value:n,type:i[0].replace(x," ")}),a=a.slice(n.length)),r.filter)!(i=$[o].exec(a))||c[o]&&!(i=c[o](i))||(n=i.shift(),s.push({value:n,type:o,matches:i}),a=a.slice(n.length));if(!n)break}return t?a.length:a?Z.error(e):T(e,l).slice(0)}function he(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function de(e,t,n){var r=t.dir,i=t.next,s=i||r,o=n&&"parentNode"===s,a=E++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i);return!1}:function(t,n,l){var c,u,h=[v,a];if(l){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(u=t[y]||(t[y]={}),i&&S(t,i))t=t[r]||t;else{if((c=u[s])&&c[0]===v&&c[1]===a)return h[2]=c[2];if(u[s]=h,h[2]=e(t,n,l))return!0}return!1}}function fe(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function pe(e,t,n,r,i){for(var s,o=[],a=0,l=e.length,c=null!=t;a<l;a++)(s=e[a])&&(n&&!n(s,r,i)||(o.push(s),c&&t.push(a)));return o}function me(e,t,n,r,i,s){return r&&!r[y]&&(r=me(r)),i&&!i[y]&&(i=me(i,s)),te(function(s,o,l,c){var u,h,d,f,p=[],m=[],y=o.length,v=s||function(e,t,n){for(var r=0,i=t.length;r<i;r++)Z(e,t[r],n);return n}(t||"*",l.nodeType?[l]:l,[]),E=!e||!s&&t?v:pe(v,p,e,l,c);if(n?n(E,f=i||(s?e:y||r)?[]:o,l,c):f=E,r)for(u=pe(f,m),r(u,[],l,c),h=u.length;h--;)(d=u[h])&&(f[m[h]]=!(E[m[h]]=d));if(s){if(i||e){if(i){for(u=[],h=f.length;h--;)(d=f[h])&&u.push(E[h]=d);i(null,f=[],u,c)}for(h=f.length;h--;)(d=f[h])&&(u=i?a.call(s,d):p[h])>-1&&(s[u]=!(o[u]=d))}}else f=pe(f===o?f.splice(y,f.length):f),i?i(null,o,f,c):g.apply(o,f)})}function ge(e){for(var t,n,i,o=e.length,l=r.relative[e[0].type],c=l||r.relative[" "],u=l?1:0,h=de(function(e){return e===t},c,!0),d=de(function(e){return a.call(t,e)>-1},c,!0),f=[function(e,n,r){var i=!l&&(r||n!=s)||((t=n).nodeType?h(e,n,r):d(e,n,r));return t=null,i}];u<o;u++)if(n=r.relative[e[u].type])f=[de(fe(f),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[y]){for(i=++u;i<o&&!r.relative[e[i].type];i++);return me(u>1&&fe(f),u>1&&he(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(x,"$1"),n,u<i&&ge(e.slice(u,i)),i<o&&ge(e=e.slice(i)),i<o&&he(e))}f.push(n)}return fe(f)}function ye(e,t){var n,i=[],o=[],a=b[e+" "];if(!a){for(t||(t=ue(e)),n=t.length;n--;)(a=ge(t[n]))[y]?i.push(a):o.push(a);a=b(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,l,u,h){var f,p,m,y=0,E="0",_=o&&[],T=[],b=s,S=o||i&&r.find.TAG("*",h),C=v+=null==b?1:Math.random()||.1,N=S.length;for(h&&(s=a==c||a||h);E!==N&&null!=(f=S[E]);E++){if(i&&f){for(p=0,a||f.ownerDocument==c||(le(f),l=!d);m=e[p++];)if(m(f,a||c,l)){g.call(u,f);break}h&&(v=C)}n&&((f=!m&&f)&&y--,o&&_.push(f))}if(y+=E,n&&E!==y){for(p=0;m=t[p++];)m(_,T,a,l);if(o){if(y>0)for(;E--;)_[E]||T[E]||(T[E]=I.call(u));T=pe(T)}g.apply(u,T),h&&!o&&T.length>0&&y+t.length>1&&w.uniqueSort(u)}return h&&(v=C,s=b),_};return n?te(o):o}(o,i)),a.selector=e}return a}function ve(e,t,n,i){var s,o,a,l,c,u="function"==typeof e&&e,h=!i&&ue(e=u.selector||e);if(n=n||[],1===h.length){if((o=h[0]=h[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&9===t.nodeType&&d&&r.relative[o[1].type]){if(!(t=(r.find.ID(a.matches[0].replace(G,X),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(s=$.needsContext.test(e)?0:o.length;s--&&(a=o[s],!r.relative[l=a.type]);)if((c=r.find[l])&&(i=c(a.matches[0].replace(G,X),Y.test(o[0].type)&&ae(t.parentNode)||t))){if(o.splice(s,1),!(e=i.length&&he(o)))return g.apply(n,i),n;break}}return(u||ye(e,h))(i,t,!d,n,!t||Y.test(e)&&ae(t.parentNode)||t),n}ce.prototype=r.filters=r.pseudos,r.setFilters=new ce,f.sortStable=y.split("").sort(R).join("")===y,le(),f.sortDetached=ne(function(e){return 1&e.compareDocumentPosition(c.createElement("fieldset"))}),w.find=Z,w.expr[":"]=w.expr.pseudos,w.unique=w.uniqueSort,Z.compile=ye,Z.select=ve,Z.setDocument=le,Z.tokenize=ue,Z.escape=w.escapeSelector,Z.getText=w.text,Z.isXML=w.isXMLDoc,Z.selectors=w.expr,Z.support=w.support,Z.uniqueSort=w.uniqueSort}();var M=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&w(e).is(n))break;r.push(e)}return r},P=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=w.expr.match.needsContext,U=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,t,n){return p(t)?w.grep(e,function(e,r){return!!t.call(e,r,e)!==n}):t.nodeType?w.grep(e,function(e){return e===t!==n}):"string"!=typeof t?w.grep(e,function(e){return a.call(t,e)>-1!==n}):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,function(e){return 1===e.nodeType}))},w.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(w(e).filter(function(){for(t=0;t<r;t++)if(w.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,i[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&k.test(e)?w(e):e||[],!1).length}});var F,V=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||F,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:V.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:g,!0)),U.test(r[1])&&w.isPlainObject(t))for(r in t)p(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=g.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):p(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,F=w(g);var K=/^(?:parents|prev(?:Until|All))/,B={children:!0,contents:!0,next:!0,prev:!0};function H(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,s=[],o="string"!=typeof e&&w(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?w.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?a.call(w(e),this[0]):a.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return M(e,"parentNode")},parentsUntil:function(e,t,n){return M(e,"parentNode",n)},next:function(e){return H(e,"nextSibling")},prev:function(e){return H(e,"previousSibling")},nextAll:function(e){return M(e,"nextSibling")},prevAll:function(e){return M(e,"previousSibling")},nextUntil:function(e,t,n){return M(e,"nextSibling",n)},prevUntil:function(e,t,n){return M(e,"previousSibling",n)},siblings:function(e){return P((e.parentNode||{}).firstChild,e)},children:function(e){return P(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(S(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(B[e]||w.uniqueSort(i),K.test(e)&&i.reverse()),this.pushStack(i)}});var $=/[^\x20\t\r\n\f]+/g;function q(e){return e}function z(e){throw e}function W(e,t,n,r){var i;try{e&&p(i=e.promise)?i.call(e).done(t).fail(n):e&&p(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(s){n.apply(void 0,[s])}}w.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return w.each(e.match($)||[],function(e,n){t[n]=!0}),t}(e):w.extend({},e);var t,n,r,i,s=[],o=[],a=-1,l=function(){for(i=i||e.once,r=t=!0;o.length;a=-1)for(n=o.shift();++a<s.length;)!1===s[a].apply(n[0],n[1])&&e.stopOnFalse&&(a=s.length,n=!1);e.memory||(n=!1),t=!1,i&&(s=n?[]:"")},c={add:function(){return s&&(n&&!t&&(a=s.length-1,o.push(n)),function t(n){w.each(n,function(n,r){p(r)?e.unique&&c.has(r)||s.push(r):r&&r.length&&"string"!==E(r)&&t(r)})}(arguments),n&&!t&&l()),this},remove:function(){return w.each(arguments,function(e,t){for(var n;(n=w.inArray(t,s,n))>-1;)s.splice(n,1),n<=a&&a--}),this},has:function(e){return e?w.inArray(e,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return i=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return i=o=[],n||t||(s=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return w.Deferred(function(t){w.each(n,function(n,r){var i=p(e[r[4]])&&e[r[4]];s[r[1]](function(){var e=i&&i.apply(this,arguments);e&&p(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)})}),e=null}).promise()},then:function(t,r,i){var s=0;function o(t,n,r,i){return function(){var a=this,l=arguments,c=function(){var e,c;if(!(t<s)){if((e=r.apply(a,l))===n.promise())throw new TypeError("Thenable self-resolution");c=e&&("object"==typeof e||"function"==typeof e)&&e.then,p(c)?i?c.call(e,o(s,n,q,i),o(s,n,z,i)):(s++,c.call(e,o(s,n,q,i),o(s,n,z,i),o(s,n,q,n.notifyWith))):(r!==q&&(a=void 0,l=[e]),(i||n.resolveWith)(a,l))}},u=i?c:function(){try{c()}catch(e){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e,u.error),t+1>=s&&(r!==z&&(a=void 0,l=[e]),n.rejectWith(a,l))}};t?u():(w.Deferred.getErrorHook?u.error=w.Deferred.getErrorHook():w.Deferred.getStackHook&&(u.error=w.Deferred.getStackHook()),e.setTimeout(u))}}return w.Deferred(function(e){n[0][3].add(o(0,e,p(i)?i:q,e.notifyWith)),n[1][3].add(o(0,e,p(t)?t:q)),n[2][3].add(o(0,e,p(r)?r:z))}).promise()},promise:function(e){return null!=e?w.extend(e,i):i}},s={};return w.each(n,function(e,t){var o=t[2],a=t[5];i[t[1]]=o.add,a&&o.add(function(){r=a},n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),o.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=o.fireWith}),i.promise(s),t&&t.call(s,s),s},when:function(e){var t=arguments.length,n=t,r=Array(n),s=i.call(arguments),o=w.Deferred(),a=function(e){return function(n){r[e]=this,s[e]=arguments.length>1?i.call(arguments):n,--t||o.resolveWith(r,s)}};if(t<=1&&(W(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||p(s[n]&&s[n].then)))return o.then();for(;n--;)W(s[n],a(n),o.reject);return o.promise()}});var Y=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&Y.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout(function(){throw t})};var G=w.Deferred();function X(){g.removeEventListener("DOMContentLoaded",X),e.removeEventListener("load",X),w.ready()}w.fn.ready=function(e){return G.then(e).catch(function(e){w.readyException(e)}),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||G.resolveWith(g,[w]))}}),w.ready.then=G.then,"complete"===g.readyState||"loading"!==g.readyState&&!g.documentElement.doScroll?e.setTimeout(w.ready):(g.addEventListener("DOMContentLoaded",X),e.addEventListener("load",X));var Q=function(e,t,n,r,i,s,o){var a=0,l=e.length,c=null==n;if("object"===E(n))for(a in i=!0,n)Q(e,t,a,n[a],!0,s,o);else if(void 0!==r&&(i=!0,p(r)||(o=!0),c&&(o?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(w(e),n)})),t))for(;a<l;a++)t(e[a],n,o?r:r.call(e[a],a,t(e[a],n)));return i?e:c?t.call(e):l?t(e[0],n):s},J=/^-ms-/,Z=/-([a-z])/g;function ee(e,t){return t.toUpperCase()}function te(e){return e.replace(J,"ms-").replace(Z,ee)}var ne=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function re(){this.expando=w.expando+re.uid++}re.uid=1,re.prototype={cache:function(e){var t=e[this.expando];return t||(t={},ne(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[te(t)]=n;else for(r in t)i[te(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][te(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(te):(t=te(t))in r?[t]:t.match($)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var ie=new re,se=new re,oe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ae=/[A-Z]/g;function le(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(ae,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:oe.test(e)?JSON.parse(e):e)}(n)}catch(i){}se.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return se.hasData(e)||ie.hasData(e)},data:function(e,t,n){return se.access(e,t,n)},removeData:function(e,t){se.remove(e,t)},_data:function(e,t,n){return ie.access(e,t,n)},_removeData:function(e,t){ie.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(i=se.get(s),1===s.nodeType&&!ie.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=te(r.slice(5)),le(s,r,i[r]));ie.set(s,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){se.set(this,e)}):Q(this,function(t){var n;if(s&&void 0===t)return void 0!==(n=se.get(s,e))||void 0!==(n=le(s,e))?n:void 0;this.each(function(){se.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){se.remove(this,e)})}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=ie.get(e,t),n&&(!r||Array.isArray(n)?r=ie.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),s=w._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete s.stop,i.call(e,function(){w.dequeue(e,t)},s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ie.get(e,n)||ie.access(e,n,{empty:w.Callbacks("once memory").add(function(){ie.remove(e,[t+"queue",n])})})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each(function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)})},dequeue:function(e){return this.each(function(){w.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=w.Deferred(),s=this,o=this.length,a=function(){--r||i.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=ie.get(s[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var ce=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ue=new RegExp("^(?:([+-])=|)("+ce+")([a-z%]*)$","i"),he=["Top","Right","Bottom","Left"],de=g.documentElement,fe=function(e){return w.contains(e.ownerDocument,e)},pe={composed:!0};de.getRootNode&&(fe=function(e){return w.contains(e.ownerDocument,e)||e.getRootNode(pe)===e.ownerDocument});var me=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&fe(e)&&"none"===w.css(e,"display")};function ge(e,t,n,r){var i,s,o=20,a=r?function(){return r.cur()}:function(){return w.css(e,t,"")},l=a(),c=n&&n[3]||(w.cssNumber[t]?"":"px"),u=e.nodeType&&(w.cssNumber[t]||"px"!==c&&+l)&&ue.exec(w.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;o--;)w.style(e,t,u+c),(1-s)*(1-(s=a()/l||.5))<=0&&(o=0),u/=s;u*=2,w.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=u,r.end=i)),i}var ye={};function ve(e){var t,n=e.ownerDocument,r=e.nodeName,i=ye[r];return i||(t=n.body.appendChild(n.createElement(r)),i=w.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),ye[r]=i,i)}function Ee(e,t){for(var n,r,i=[],s=0,o=e.length;s<o;s++)(r=e[s]).style&&(n=r.style.display,t?("none"===n&&(i[s]=ie.get(r,"display")||null,i[s]||(r.style.display="")),""===r.style.display&&me(r)&&(i[s]=ve(r))):"none"!==n&&(i[s]="none",ie.set(r,"display",n)));for(s=0;s<o;s++)null!=i[s]&&(e[s].style.display=i[s]);return e}w.fn.extend({show:function(){return Ee(this,!0)},hide:function(){return Ee(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){me(this)?w(this).show():w(this).hide()})}});var _e,Te,we=/^(?:checkbox|radio)$/i,be=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Se=/^$|^module$|\/(?:java|ecma)script/i;_e=g.createDocumentFragment().appendChild(g.createElement("div")),(Te=g.createElement("input")).setAttribute("type","radio"),Te.setAttribute("checked","checked"),Te.setAttribute("name","t"),_e.appendChild(Te),f.checkClone=_e.cloneNode(!0).cloneNode(!0).lastChild.checked,_e.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!_e.cloneNode(!0).lastChild.defaultValue,_e.innerHTML="<option></option>",f.option=!!_e.lastChild;var Ie={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Ce(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&S(e,t)?w.merge([e],n):n}function Ne(e,t){for(var n=0,r=e.length;n<r;n++)ie.set(e[n],"globalEval",!t||ie.get(t[n],"globalEval"))}Ie.tbody=Ie.tfoot=Ie.colgroup=Ie.caption=Ie.thead,Ie.th=Ie.td,f.option||(Ie.optgroup=Ie.option=[1,"<select multiple='multiple'>","</select>"]);var Ae=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var s,o,a,l,c,u,h=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if((s=e[f])||0===s)if("object"===E(s))w.merge(d,s.nodeType?[s]:s);else if(Ae.test(s)){for(o=o||h.appendChild(t.createElement("div")),a=(be.exec(s)||["",""])[1].toLowerCase(),l=Ie[a]||Ie._default,o.innerHTML=l[1]+w.htmlPrefilter(s)+l[2],u=l[0];u--;)o=o.lastChild;w.merge(d,o.childNodes),(o=h.firstChild).textContent=""}else d.push(t.createTextNode(s));for(h.textContent="",f=0;s=d[f++];)if(r&&w.inArray(s,r)>-1)i&&i.push(s);else if(c=fe(s),o=Ce(h.appendChild(s),"script"),c&&Ne(o),n)for(u=0;s=o[u++];)Se.test(s.type||"")&&n.push(s);return h}var Oe=/^([^.]*)(?:\.(.+)|)/;function Re(){return!0}function De(){return!1}function Le(e,t,n,r,i,s){var o,a;if("object"==typeof t){for(a in"string"!=typeof n&&(r=r||n,n=void 0),t)Le(e,a,n,r,t[a],s);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=De;else if(!i)return e;return 1===s&&(o=i,i=function(e){return w().off(e),o.apply(this,arguments)},i.guid=o.guid||(o.guid=w.guid++)),e.each(function(){w.event.add(this,t,i,r,n)})}function Me(e,t,n){n?(ie.set(e,t,!1),w.event.add(e,t,{namespace:!1,handler:function(e){var n,r=ie.get(this,t);if(1&e.isTrigger&&this[t]){if(r)(w.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=i.call(arguments),ie.set(this,t,r),this[t](),n=ie.get(this,t),ie.set(this,t,!1),r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else r&&(ie.set(this,t,w.event.trigger(r[0],r.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Re)}})):void 0===ie.get(e,t)&&w.event.add(e,t,Re)}w.event={global:{},add:function(e,t,n,r,i){var s,o,a,l,c,u,h,d,f,p,m,g=ie.get(e);if(ne(e))for(n.handler&&(n=(s=n).handler,i=s.selector),i&&w.find.matchesSelector(de,i),n.guid||(n.guid=w.guid++),(l=g.events)||(l=g.events=Object.create(null)),(o=g.handle)||(o=g.handle=function(t){return void 0!==w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match($)||[""]).length;c--;)f=m=(a=Oe.exec(t[c])||[])[1],p=(a[2]||"").split(".").sort(),f&&(h=w.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,h=w.event.special[f]||{},u=w.extend({type:f,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:p.join(".")},s),(d=l[f])||((d=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,p,o)||e.addEventListener&&e.addEventListener(f,o)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,u):d.push(u),w.event.global[f]=!0)},remove:function(e,t,n,r,i){var s,o,a,l,c,u,h,d,f,p,m,g=ie.hasData(e)&&ie.get(e);if(g&&(l=g.events)){for(c=(t=(t||"").match($)||[""]).length;c--;)if(f=m=(a=Oe.exec(t[c])||[])[1],p=(a[2]||"").split(".").sort(),f){for(h=w.event.special[f]||{},d=l[f=(r?h.delegateType:h.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)u=d[s],!i&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(d.splice(s,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));o&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,p,g.handle)||w.removeEvent(e,f,g.handle),delete l[f])}else for(f in l)w.event.remove(e,f+t[c],n,r,!0);w.isEmptyObject(l)&&ie.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,s,o,a=new Array(arguments.length),l=w.event.fix(e),c=(ie.get(this,"events")||Object.create(null))[l.type]||[],u=w.event.special[l.type]||{};for(a[0]=l,t=1;t<arguments.length;t++)a[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(o=w.event.handlers.call(this,l,c),t=0;(i=o[t++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,n=0;(s=i.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==s.namespace&&!l.rnamespace.test(s.namespace)||(l.handleObj=s,l.data=s.data,void 0!==(r=((w.event.special[s.origType]||{}).handle||s.handler).apply(i.elem,a))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,r,i,s,o,a=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(s=[],o={},n=0;n<l;n++)void 0===o[i=(r=t[n]).selector+" "]&&(o[i]=r.needsContext?w(i,this).index(c)>-1:w.find(i,this,null,[c]).length),o[i]&&s.push(r);s.length&&a.push({elem:c,handlers:s})}return c=this,l<t.length&&a.push({elem:c,handlers:t.slice(l)}),a},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:p(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return we.test(t.type)&&t.click&&S(t,"input")&&Me(t,"click",!0),!1},trigger:function(e){var t=this||e;return we.test(t.type)&&t.click&&S(t,"input")&&Me(t,"click"),!0},_default:function(e){var t=e.target;return we.test(t.type)&&t.click&&S(t,"input")&&ie.get(t,"click")||S(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Re:De,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:De,isPropagationStopped:De,isImmediatePropagationStopped:De,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Re,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Re,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Re,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},function(e,t){function n(e){if(g.documentMode){var n=ie.get(this,"handle"),r=w.event.fix(e);r.type="focusin"===e.type?"focus":"blur",r.isSimulated=!0,n(e),r.target===r.currentTarget&&n(r)}else w.event.simulate(t,e.target,w.event.fix(e))}w.event.special[e]={setup:function(){var r;if(Me(this,e,!0),!g.documentMode)return!1;(r=ie.get(this,t))||this.addEventListener(t,n),ie.set(this,t,(r||0)+1)},trigger:function(){return Me(this,e),!0},teardown:function(){var e;if(!g.documentMode)return!1;(e=ie.get(this,t)-1)?ie.set(this,t,e):(this.removeEventListener(t,n),ie.remove(this,t))},_default:function(t){return ie.get(t.target,e)},delegateType:t},w.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=g.documentMode?this:r,s=ie.get(i,t);s||(g.documentMode?this.addEventListener(t,n):r.addEventListener(e,n,!0)),ie.set(i,t,(s||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=g.documentMode?this:r,s=ie.get(i,t)-1;s?ie.set(i,t,s):(g.documentMode?this.removeEventListener(t,n):r.removeEventListener(e,n,!0),ie.remove(i,t))}}}),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=e.relatedTarget,i=e.handleObj;return r&&(r===this||w.contains(this,r))||(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),w.fn.extend({on:function(e,t,n,r){return Le(this,e,t,n,r)},one:function(e,t,n,r){return Le(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=De),this.each(function(){w.event.remove(this,e,n,t)})}});var Pe=/<script|<style|<link/i,ke=/checked\s*(?:[^=]|=\s*.checked.)/i,Ue=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function je(e,t){return S(e,"table")&&S(11!==t.nodeType?t:t.firstChild,"tr")&&w(e).children("tbody")[0]||e}function Fe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ve(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ke(e,t){var n,r,i,s,o,a;if(1===t.nodeType){if(ie.hasData(e)&&(a=ie.get(e).events))for(i in ie.remove(t,"handle events"),a)for(n=0,r=a[i].length;n<r;n++)w.event.add(t,i,a[i][n]);se.hasData(e)&&(s=se.access(e),o=w.extend({},s),se.set(t,o))}}function Be(e,t){var n=t.nodeName.toLowerCase();"input"===n&&we.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function He(e,t,n,r){t=s(t);var i,o,a,l,c,u,h=0,d=e.length,m=d-1,g=t[0],y=p(g);if(y||d>1&&"string"==typeof g&&!f.checkClone&&ke.test(g))return e.each(function(i){var s=e.eq(i);y&&(t[0]=g.call(this,i,s.html())),He(s,t,n,r)});if(d&&(o=(i=xe(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(l=(a=w.map(Ce(i,"script"),Fe)).length;h<d;h++)c=i,h!==m&&(c=w.clone(c,!0,!0),l&&w.merge(a,Ce(c,"script"))),n.call(e[h],c,h);if(l)for(u=a[a.length-1].ownerDocument,w.map(a,Ve),h=0;h<l;h++)c=a[h],Se.test(c.type||"")&&!ie.access(c,"globalEval")&&w.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?w._evalUrl&&!c.noModule&&w._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):v(c.textContent.replace(Ue,""),c,u))}return e}function $e(e,t,n){for(var r,i=t?w.filter(t,e):e,s=0;null!=(r=i[s]);s++)n||1!==r.nodeType||w.cleanData(Ce(r)),r.parentNode&&(n&&fe(r)&&Ne(Ce(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,s,o,a=e.cloneNode(!0),l=fe(e);if(!(f.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(o=Ce(a),r=0,i=(s=Ce(e)).length;r<i;r++)Be(s[r],o[r]);if(t)if(n)for(s=s||Ce(e),o=o||Ce(a),r=0,i=s.length;r<i;r++)Ke(s[r],o[r]);else Ke(e,a);return(o=Ce(a,"script")).length>0&&Ne(o,!l&&Ce(e,"script")),a},cleanData:function(e){for(var t,n,r,i=w.event.special,s=0;void 0!==(n=e[s]);s++)if(ne(n)){if(t=n[ie.expando]){if(t.events)for(r in t.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[ie.expando]=void 0}n[se.expando]&&(n[se.expando]=void 0)}}}),w.fn.extend({detach:function(e){return $e(this,e,!0)},remove:function(e){return $e(this,e)},text:function(e){return Q(this,function(e){return void 0===e?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return He(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(Ce(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return w.clone(this,e,t)})},html:function(e){return Q(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Pe.test(e)&&!Ie[(be.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(Ce(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return He(this,arguments,function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(Ce(this)),n&&n.replaceChild(t,this))},e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){w.fn[e]=function(e){for(var n,r=[],i=w(e),s=i.length-1,a=0;a<=s;a++)n=a===s?this:this.clone(!0),w(i[a])[t](n),o.apply(r,n.get());return this.pushStack(r)}});var qe=new RegExp("^("+ce+")(?!px)[a-z%]+$","i"),ze=/^--/,We=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Ye=function(e,t,n){var r,i,s={};for(i in t)s[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=s[i];return r},Ge=new RegExp(he.join("|"),"i");function Xe(e,t,n){var r,i,s,o,a=ze.test(t),l=e.style;return(n=n||We(e))&&(o=n.getPropertyValue(t)||n[t],a&&o&&(o=o.replace(x,"$1")||void 0),""!==o||fe(e)||(o=w.style(e,t)),!f.pixelBoxStyles()&&qe.test(o)&&Ge.test(t)&&(r=l.width,i=l.minWidth,s=l.maxWidth,l.minWidth=l.maxWidth=l.width=o,o=n.width,l.width=r,l.minWidth=i,l.maxWidth=s)),void 0!==o?o+"":o}function Qe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",de.appendChild(c).appendChild(u);var t=e.getComputedStyle(u);r="1%"!==t.top,l=12===n(t.marginLeft),u.style.right="60%",o=36===n(t.right),i=36===n(t.width),u.style.position="absolute",s=12===n(u.offsetWidth/3),de.removeChild(c),u=null}}function n(e){return Math.round(parseFloat(e))}var r,i,s,o,a,l,c=g.createElement("div"),u=g.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===u.style.backgroundClip,w.extend(f,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),s},reliableTrDimensions:function(){var t,n,r,i;return null==a&&(t=g.createElement("table"),n=g.createElement("tr"),r=g.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="box-sizing:content-box;border:1px solid",n.style.height="1px",r.style.height="9px",r.style.display="block",de.appendChild(t).appendChild(n).appendChild(r),i=e.getComputedStyle(n),a=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===n.offsetHeight,de.removeChild(t)),a}}))}();var Je=["Webkit","Moz","ms"],Ze=g.createElement("div").style,et={};function tt(e){var t=w.cssProps[e]||et[e];return t||(e in Ze?e:et[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Je.length;n--;)if((e=Je[n]+t)in Ze)return e}(e)||e)}var nt=/^(none|table(?!-c[ea]).+)/,rt={position:"absolute",visibility:"hidden",display:"block"},it={letterSpacing:"0",fontWeight:"400"};function st(e,t,n){var r=ue.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function ot(e,t,n,r,i,s){var o="width"===t?1:0,a=0,l=0,c=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(c+=w.css(e,n+he[o],!0,i)),r?("content"===n&&(l-=w.css(e,"padding"+he[o],!0,i)),"margin"!==n&&(l-=w.css(e,"border"+he[o]+"Width",!0,i))):(l+=w.css(e,"padding"+he[o],!0,i),"padding"!==n?l+=w.css(e,"border"+he[o]+"Width",!0,i):a+=w.css(e,"border"+he[o]+"Width",!0,i));return!r&&s>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-l-a-.5))||0),l+c}function at(e,t,n){var r=We(e),i=(!f.boxSizingReliable()||n)&&"border-box"===w.css(e,"boxSizing",!1,r),s=i,o=Xe(e,t,r),a="offset"+t[0].toUpperCase()+t.slice(1);if(qe.test(o)){if(!n)return o;o="auto"}return(!f.boxSizingReliable()&&i||!f.reliableTrDimensions()&&S(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===w.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===w.css(e,"boxSizing",!1,r),(s=a in e)&&(o=e[a])),(o=parseFloat(o)||0)+ot(e,t,n||(i?"border":"content"),s,r,o)+"px"}function lt(e,t,n,r,i){return new lt.prototype.init(e,t,n,r,i)}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Xe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,s,o,a=te(t),l=ze.test(t),c=e.style;if(l||(t=tt(a)),o=w.cssHooks[t]||w.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:c[t];"string"==(s=typeof n)&&(i=ue.exec(n))&&i[1]&&(n=ge(e,t,i),s="number"),null!=n&&n==n&&("number"!==s||l||(n+=i&&i[3]||(w.cssNumber[a]?"":"px")),f.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var i,s,o,a=te(t);return ze.test(t)||(t=tt(a)),(o=w.cssHooks[t]||w.cssHooks[a])&&"get"in o&&(i=o.get(e,!0,n)),void 0===i&&(i=Xe(e,t,r)),"normal"===i&&t in it&&(i=it[t]),""===n||n?(s=parseFloat(i),!0===n||isFinite(s)?s||0:i):i}}),w.each(["height","width"],function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!nt.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?at(e,t,r):Ye(e,rt,function(){return at(e,t,r)})},set:function(e,n,r){var i,s=We(e),o=!f.scrollboxSize()&&"absolute"===s.position,a=(o||r)&&"border-box"===w.css(e,"boxSizing",!1,s),l=r?ot(e,t,r,a,s):0;return a&&o&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(s[t])-ot(e,t,"border",!1,s)-.5)),l&&(i=ue.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),st(0,n,l)}}}),w.cssHooks.marginLeft=Qe(f.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Xe(e,"marginLeft"))||e.getBoundingClientRect().left-Ye(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+he[r]+t]=s[r]||s[r-2]||s[0];return i}},"margin"!==e&&(w.cssHooks[e+t].set=st)}),w.fn.extend({css:function(e,t){return Q(this,function(e,t,n){var r,i,s={},o=0;if(Array.isArray(t)){for(r=We(e),i=t.length;o<i;o++)s[t[o]]=w.css(e,t[o],!1,r);return s}return void 0!==n?w.style(e,t,n):w.css(e,t)},e,t,arguments.length>1)}}),w.Tween=lt,lt.prototype={constructor:lt,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(w.cssNumber[n]?"":"px")},cur:function(){var e=lt.propHooks[this.prop];return e&&e.get?e.get(this):lt.propHooks._default.get(this)},run:function(e){var t,n=lt.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):lt.propHooks._default.set(this),this}},lt.prototype.init.prototype=lt.prototype,lt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||!w.cssHooks[e.prop]&&null==e.elem.style[tt(e.prop)]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},lt.propHooks.scrollTop=lt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=lt.prototype.init,w.fx.step={};var ct,ut,ht=/^(?:toggle|show|hide)$/,dt=/queueHooks$/;function ft(){ut&&(!1===g.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(ft):e.setTimeout(ft,w.fx.interval),w.fx.tick())}function pt(){return e.setTimeout(function(){ct=void 0}),ct=Date.now()}function mt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=he[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function gt(e,t,n){for(var r,i=(yt.tweeners[t]||[]).concat(yt.tweeners["*"]),s=0,o=i.length;s<o;s++)if(r=i[s].call(n,t,e))return r}function yt(e,t,n){var r,i,s=0,o=yt.prefilters.length,a=w.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=ct||pt(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),s=0,o=c.tweens.length;s<o;s++)c.tweens[s].run(r);return a.notifyWith(e,[c,r,n]),r<1&&o?n:(o||a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:ct||pt(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return t?(a.notifyWith(e,[c,1,0]),a.resolveWith(e,[c,t])):a.rejectWith(e,[c,t]),this}}),u=c.props;for(function(e,t){var n,r,i,s,o;for(n in e)if(i=t[r=te(n)],s=e[n],Array.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),(o=w.cssHooks[r])&&"expand"in o)for(n in s=o.expand(s),delete e[r],s)n in e||(e[n]=s[n],t[n]=i);else t[r]=i}(u,c.opts.specialEasing);s<o;s++)if(r=yt.prefilters[s].call(c,e,u,c.opts))return p(r.stop)&&(w._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return w.map(u,gt,c),p(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),w.fx.timer(w.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}w.Animation=w.extend(yt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return ge(n.elem,e,ue.exec(t),n),n}]},tweener:function(e,t){p(e)?(t=e,e=["*"]):e=e.match($);for(var n,r=0,i=e.length;r<i;r++)n=e[r],yt.tweeners[n]=yt.tweeners[n]||[],yt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,s,o,a,l,c,u,h="width"in t||"height"in t,d=this,f={},p=e.style,m=e.nodeType&&me(e),g=ie.get(e,"fxshow");for(r in n.queue||(null==(o=w._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,d.always(function(){d.always(function(){o.unqueued--,w.queue(e,"fx").length||o.empty.fire()})})),t)if(i=t[r],ht.test(i)){if(delete t[r],s=s||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;m=!0}f[r]=g&&g[r]||w.style(e,r)}if((l=!w.isEmptyObject(t))||!w.isEmptyObject(f))for(r in h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=g&&g.display)&&(c=ie.get(e,"display")),"none"===(u=w.css(e,"display"))&&(c?u=c:(Ee([e],!0),c=e.style.display||c,u=w.css(e,"display"),Ee([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===w.css(e,"float")&&(l||(d.done(function(){p.display=c}),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),l=!1,f)l||(g?"hidden"in g&&(m=g.hidden):g=ie.access(e,"fxshow",{display:c}),s&&(g.hidden=!m),m&&Ee([e],!0),d.done(function(){for(r in m||Ee([e]),ie.remove(e,"fxshow"),f)w.style(e,r,f[r])})),l=gt(m?g[r]:0,r,d),r in g||(g[r]=l.start,m&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||p(e)&&e,duration:e,easing:n&&t||t&&!p(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){p(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(me).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),s=w.speed(t,n,r),o=function(){var t=yt(this,w.extend({},e),s);(i||ie.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",s=w.timers,o=ie.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&dt.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(n),t=!1,s.splice(i,1));!t&&n||w.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=ie.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=w.timers,o=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),w.each(["toggle","show","hide"],function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(mt(t,!0),e,r,i)}}),w.each({slideDown:mt("show"),slideUp:mt("hide"),slideToggle:mt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(ct=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),ct=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){ut||(ut=!0,ft())},w.fx.stop=function(){ut=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx&&w.fx.speeds[t]||t,n=n||"fx",this.queue(n,function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}})},function(){var e=g.createElement("input"),t=g.createElement("select").appendChild(g.createElement("option"));e.type="checkbox",f.checkOn=""!==e.value,f.optSelected=t.selected,(e=g.createElement("input")).value="t",e.type="radio",f.radioValue="t"===e.value}();var vt,Et=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return Q(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){w.removeAttr(this,e)})}}),w.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?w.prop(e,t,n):(1===s&&w.isXMLDoc(e)||(i=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?vt:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!f.radioValue&&"radio"===t&&S(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match($);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),vt={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Et[t]||w.find.attr;Et[t]=function(e,t,r){var i,s,o=t.toLowerCase();return r||(s=Et[o],Et[o]=i,i=null!=n(e,t,r)?o:null,Et[o]=s),i}});var _t=/^(?:input|select|textarea|button)$/i,Tt=/^(?:a|area)$/i;function wt(e){return(e.match($)||[]).join(" ")}function bt(e){return e.getAttribute&&e.getAttribute("class")||""}function St(e){return Array.isArray(e)?e:"string"==typeof e&&e.match($)||[]}w.fn.extend({prop:function(e,t){return Q(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[w.propFix[e]||e]})}}),w.extend({prop:function(e,t,n){var r,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&w.isXMLDoc(e)||(t=w.propFix[t]||t,i=w.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):_t.test(e.nodeName)||Tt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(e){var t,n,r,i,s,o;return p(e)?this.each(function(t){w(this).addClass(e.call(this,t,bt(this)))}):(t=St(e)).length?this.each(function(){if(r=bt(this),n=1===this.nodeType&&" "+wt(r)+" "){for(s=0;s<t.length;s++)i=t[s],n.indexOf(" "+i+" ")<0&&(n+=i+" ");o=wt(n),r!==o&&this.setAttribute("class",o)}}):this},removeClass:function(e){var t,n,r,i,s,o;return p(e)?this.each(function(t){w(this).removeClass(e.call(this,t,bt(this)))}):arguments.length?(t=St(e)).length?this.each(function(){if(r=bt(this),n=1===this.nodeType&&" "+wt(r)+" "){for(s=0;s<t.length;s++)for(i=t[s];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");o=wt(n),r!==o&&this.setAttribute("class",o)}}):this:this.attr("class","")},toggleClass:function(e,t){var n,r,i,s,o=typeof e,a="string"===o||Array.isArray(e);return p(e)?this.each(function(n){w(this).toggleClass(e.call(this,n,bt(this),t),t)}):"boolean"==typeof t&&a?t?this.addClass(e):this.removeClass(e):(n=St(e),this.each(function(){if(a)for(s=w(this),i=0;i<n.length;i++)r=n[i],s.hasClass(r)?s.removeClass(r):s.addClass(r);else void 0!==e&&"boolean"!==o||((r=bt(this))&&ie.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":ie.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+wt(bt(n))+" ").indexOf(t)>-1)return!0;return!1}});var It=/\r/g;w.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=p(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,w(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,function(e){return null==e?"":e+""})),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(It,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:wt(w.text(e))}},select:{get:function(e){var t,n,r,i=e.options,s=e.selectedIndex,o="select-one"===e.type,a=o?null:[],l=o?s+1:i.length;for(r=s<0?l:o?s:0;r<l;r++)if(((n=i[r]).selected||r===s)&&!n.disabled&&(!n.parentNode.disabled||!S(n.parentNode,"optgroup"))){if(t=w(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,s=w.makeArray(t),o=i.length;o--;)((r=i[o]).selected=w.inArray(w.valHooks.option.get(r),s)>-1)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},f.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var Ct=e.location,Nt={guid:Date.now()},At=/\?/;w.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(i){}return r=n&&n.getElementsByTagName("parsererror")[0],n&&!r||w.error("Invalid XML: "+(r?w.map(r.childNodes,function(e){return e.textContent}).join("\n"):t)),n};var xt=/^(?:focusinfocus|focusoutblur)$/,Ot=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,r,i){var s,o,a,l,c,h,d,f,y=[r||g],v=u.call(t,"type")?t.type:t,E=u.call(t,"namespace")?t.namespace.split("."):[];if(o=f=a=r=r||g,3!==r.nodeType&&8!==r.nodeType&&!xt.test(v+w.event.triggered)&&(v.indexOf(".")>-1&&(E=v.split("."),v=E.shift(),E.sort()),c=v.indexOf(":")<0&&"on"+v,(t=t[w.expando]?t:new w.Event(v,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=E.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+E.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:w.makeArray(n,[t]),d=w.event.special[v]||{},i||!d.trigger||!1!==d.trigger.apply(r,n))){if(!i&&!d.noBubble&&!m(r)){for(l=d.delegateType||v,xt.test(l+v)||(o=o.parentNode);o;o=o.parentNode)y.push(o),a=o;a===(r.ownerDocument||g)&&y.push(a.defaultView||a.parentWindow||e)}for(s=0;(o=y[s++])&&!t.isPropagationStopped();)f=o,t.type=s>1?l:d.bindType||v,(h=(ie.get(o,"events")||Object.create(null))[t.type]&&ie.get(o,"handle"))&&h.apply(o,n),(h=c&&o[c])&&h.apply&&ne(o)&&(t.result=h.apply(o,n),!1===t.result&&t.preventDefault());return t.type=v,i||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(y.pop(),n)||!ne(r)||c&&p(r[v])&&!m(r)&&((a=r[c])&&(r[c]=null),w.event.triggered=v,t.isPropagationStopped()&&f.addEventListener(v,Ot),r[v](),t.isPropagationStopped()&&f.removeEventListener(v,Ot),w.event.triggered=void 0,a&&(r[c]=a)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each(function(){w.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}});var Rt=/\[\]$/,Dt=/\r?\n/g,Lt=/^(?:submit|button|image|reset|file)$/i,Mt=/^(?:input|select|textarea|keygen)/i;function Pt(e,t,n,r){var i;if(Array.isArray(t))w.each(t,function(t,i){n||Rt.test(e)?r(e,i):Pt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)});else if(n||"object"!==E(t))r(e,t);else for(i in t)Pt(e+"["+i+"]",t[i],n,r)}w.param=function(e,t){var n,r=[],i=function(e,t){var n=p(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,function(){i(this.name,this.value)});else for(n in e)Pt(n,e[n],t,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&Mt.test(this.nodeName)&&!Lt.test(e)&&(this.checked||!we.test(e))}).map(function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:n.replace(Dt,"\r\n")}}).get()}});var kt=/%20/g,Ut=/#.*$/,jt=/([?&])_=[^&]*/,Ft=/^(.*?):[ \t]*([^\r\n]*)$/gm,Vt=/^(?:GET|HEAD)$/,Kt=/^\/\//,Bt={},Ht={},$t="*/".concat("*"),qt=g.createElement("a");function zt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match($)||[];if(p(n))for(;r=s[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Wt(e,t,n,r){var i={},s=e===Ht;function o(a){var l;return i[a]=!0,w.each(e[a]||[],function(e,a){var c=a(t,n,r);return"string"!=typeof c||s||i[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),o(c),!1)}),l}return o(t.dataTypes[0])||!i["*"]&&o("*")}function Yt(e,t){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}qt.href=Ct.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Yt(Yt(e,w.ajaxSettings),t):Yt(w.ajaxSettings,e)},ajaxPrefilter:zt(Bt),ajaxTransport:zt(Ht),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var r,i,s,o,a,l,c,u,h,d,f=w.ajaxSetup({},n),p=f.context||f,m=f.context&&(p.nodeType||p.jquery)?w(p):w.event,y=w.Deferred(),v=w.Callbacks("once memory"),E=f.statusCode||{},_={},T={},b="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(c){if(!o)for(o={};t=Ft.exec(s);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?s:null},setRequestHeader:function(e,t){return null==c&&(e=T[e.toLowerCase()]=T[e.toLowerCase()]||e,_[e]=t),this},overrideMimeType:function(e){return null==c&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)S.always(e[S.status]);else for(t in e)E[t]=[E[t],e[t]];return this},abort:function(e){var t=e||b;return r&&r.abort(t),I(0,t),this}};if(y.promise(S),f.url=((t||f.url||Ct.href)+"").replace(Kt,Ct.protocol+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match($)||[""],null==f.crossDomain){l=g.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=qt.protocol+"//"+qt.host!=l.protocol+"//"+l.host}catch(C){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=w.param(f.data,f.traditional)),Wt(Bt,f,n,S),c)return S;for(h in(u=w.event&&f.global)&&0===w.active++&&w.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Vt.test(f.type),i=f.url.replace(Ut,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(kt,"+")):(d=f.url.slice(i.length),f.data&&(f.processData||"string"==typeof f.data)&&(i+=(At.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(i=i.replace(jt,"$1"),d=(At.test(i)?"&":"?")+"_="+Nt.guid+++d),f.url=i+d),f.ifModified&&(w.lastModified[i]&&S.setRequestHeader("If-Modified-Since",w.lastModified[i]),w.etag[i]&&S.setRequestHeader("If-None-Match",w.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||n.contentType)&&S.setRequestHeader("Content-Type",f.contentType),S.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+$t+"; q=0.01":""):f.accepts["*"]),f.headers)S.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(p,S,f)||c))return S.abort();if(b="abort",v.add(f.complete),S.done(f.success),S.fail(f.error),r=Wt(Ht,f,n,S)){if(S.readyState=1,u&&m.trigger("ajaxSend",[S,f]),c)return S;f.async&&f.timeout>0&&(a=e.setTimeout(function(){S.abort("timeout")},f.timeout));try{c=!1,r.send(_,I)}catch(C){if(c)throw C;I(-1,C)}}else I(-1,"No Transport");function I(t,n,o,l){var h,d,g,_,T,b=n;c||(c=!0,a&&e.clearTimeout(a),r=void 0,s=l||"",S.readyState=t>0?4:0,h=t>=200&&t<300||304===t,o&&(_=function(e,t,n){for(var r,i,s,o,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){l.unshift(i);break}if(l[0]in n)s=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){s=i;break}o||(o=i)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),n[s]}(f,S,o)),!h&&w.inArray("script",f.dataTypes)>-1&&w.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),_=function(e,t,n,r){var i,s,o,a,l,c={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(s=u.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(o=c[l+" "+s]||c["* "+s]))for(i in c)if((a=i.split(" "))[1]===s&&(o=c[l+" "+a[0]]||c["* "+a[0]])){!0===o?o=c[i]:!0!==c[i]&&(s=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(C){return{state:"parsererror",error:o?C:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}(f,_,S,h),h?(f.ifModified&&((T=S.getResponseHeader("Last-Modified"))&&(w.lastModified[i]=T),(T=S.getResponseHeader("etag"))&&(w.etag[i]=T)),204===t||"HEAD"===f.type?b="nocontent":304===t?b="notmodified":(b=_.state,d=_.data,h=!(g=_.error))):(g=b,!t&&b||(b="error",t<0&&(t=0))),S.status=t,S.statusText=(n||b)+"",h?y.resolveWith(p,[d,b,S]):y.rejectWith(p,[S,b,g]),S.statusCode(E),E=void 0,u&&m.trigger(h?"ajaxSuccess":"ajaxError",[S,f,h?d:g]),v.fireWith(p,[S,b]),u&&(m.trigger("ajaxComplete",[S,f]),--w.active||w.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],function(e,t){w[t]=function(e,n,r,i){return p(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:i,data:n,success:r},w.isPlainObject(e)&&e))}}),w.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),w._evalUrl=function(e,t,n){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){w.globalEval(e,t,n)}})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(p(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return p(e)?this.each(function(t){w(this).wrapInner(e.call(this,t))}):this.each(function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=p(e);return this.each(function(n){w(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(t){}};var Gt={0:200,1223:204},Xt=w.ajaxSettings.xhr();f.cors=!!Xt&&"withCredentials"in Xt,f.ajax=Xt=!!Xt,w.ajaxTransport(function(t){var n,r;if(f.cors||Xt&&!t.crossDomain)return{send:function(i,s){var o,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];for(o in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)a.setRequestHeader(o,i[o]);n=function(e){return function(){n&&(n=r=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===e?a.abort():"error"===e?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Gt[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=n(),r=a.onerror=a.ontimeout=n("error"),void 0!==a.onabort?a.onabort=r:a.onreadystatechange=function(){4===a.readyState&&e.setTimeout(function(){n&&r()})},n=n("abort");try{a.send(t.hasContent&&t.data||null)}catch(l){if(n)throw l}},abort:function(){n&&n()}}}),w.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),w.ajaxTransport("script",function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=w("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),g.head.appendChild(t[0])},abort:function(){n&&n()}}});var Qt,Jt=[],Zt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Jt.pop()||w.expando+"_"+Nt.guid++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",function(t,n,r){var i,s,o,a=!1!==t.jsonp&&(Zt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=p(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(Zt,"$1"+i):!1!==t.jsonp&&(t.url+=(At.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||w.error(i+" was not called"),o[0]},t.dataTypes[0]="json",s=e[i],e[i]=function(){o=arguments},r.always(function(){void 0===s?w(e).removeProp(i):e[i]=s,t[i]&&(t.jsonpCallback=n.jsonpCallback,Jt.push(i)),o&&p(s)&&s(o[0]),o=s=void 0}),"script"}),f.createHTMLDocument=((Qt=g.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Qt.childNodes.length),w.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(f.createHTMLDocument?((r=(t=g.implementation.createHTMLDocument("")).createElement("base")).href=g.location.href,t.head.appendChild(r)):t=g),s=!n&&[],(i=U.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,s),s&&s.length&&w(s).remove(),w.merge([],i.childNodes)));var r,i,s},w.fn.load=function(e,t,n){var r,i,s,o=this,a=e.indexOf(" ");return a>-1&&(r=wt(e.slice(a)),e=e.slice(0,a)),p(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),o.length>0&&w.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){s=arguments,o.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)}).always(n&&function(e,t){o.each(function(){n.apply(this,s||[e.responseText,t,e])})}),this},w.expr.pseudos.animated=function(e){return w.grep(w.timers,function(t){return e===t.elem}).length},w.offset={setOffset:function(e,t,n){var r,i,s,o,a,l,c=w.css(e,"position"),u=w(e),h={};"static"===c&&(e.style.position="relative"),a=u.offset(),s=w.css(e,"top"),l=w.css(e,"left"),("absolute"===c||"fixed"===c)&&(s+l).indexOf("auto")>-1?(o=(r=u.position()).top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(l)||0),p(t)&&(t=t.call(e,n,w.extend({},a))),null!=t.top&&(h.top=t.top-a.top+o),null!=t.left&&(h.left=t.left-a.left+i),"using"in t?t.using.call(e,h):u.css(h)}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){w.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),i.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-w.css(r,"marginTop",!0),left:t.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===w.css(e,"position");)e=e.offsetParent;return e||de})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return Q(this,function(e,r,i){var s;if(m(e)?s=e:9===e.nodeType&&(s=e.defaultView),void 0===i)return s?s[t]:e[r];s?s.scrollTo(n?s.pageXOffset:i,n?i:s.pageYOffset):e[r]=i},e,r,arguments.length)}}),w.each(["top","left"],function(e,t){w.cssHooks[t]=Qe(f.pixelPosition,function(e,n){if(n)return n=Xe(e,t),qe.test(n)?w(e).position()[t]+"px":n})}),w.each({Height:"height",Width:"width"},function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){w.fn[r]=function(i,s){var o=arguments.length&&(n||"boolean"!=typeof i),a=n||(!0===i||!0===s?"margin":"border");return Q(this,function(t,n,i){var s;return m(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(s=t.documentElement,Math.max(t.body["scroll"+e],s["scroll"+e],t.body["offset"+e],s["offset"+e],s["client"+e])):void 0===i?w.css(t,n,a):w.style(t,n,i,a)},t,o?i:void 0,o)}})}),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){w.fn[t]=function(e){return this.on(t,e)}}),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}});var en=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;w.proxy=function(e,t){var n,r,s;if("string"==typeof t&&(n=e[t],t=e,e=n),p(e))return r=i.call(arguments,2),s=function(){return e.apply(t||this,r.concat(i.call(arguments)))},s.guid=e.guid=e.guid||w.guid++,s},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=S,w.isFunction=p,w.isWindow=m,w.camelCase=te,w.type=E,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},w.trim=function(e){return null==e?"":(e+"").replace(en,"$1")};var tn=e.jQuery,nn=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=nn),t&&e.jQuery===w&&(e.jQuery=tn),w},void 0===t&&(e.jQuery=e.$=w),w},gm.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)});var e,t}var Em,_m={},Tm={};function wm(){if(Em)return Tm;Em=1,Object.defineProperty(Tm,"__esModule",{value:!0}),Tm.TempoElement=void 0;const e="STORYBOARD-TOP-CONSTANT";class t{constructor(e,t,n){if(e&&/[^0-9a-zA-Z-_]/.test(e))throw new Error("Codebase ID contains invalid chars :"+e);if(t&&/[^0-9a-zA-Z-_]/.test(t))throw new Error("Storyboard ID contains invalid chars :"+e);this.codebaseId=e||"",this.storyboardId=t,this.uniquePath=n,this.cachedKey=null}isEqual(e){return this.codebaseId===e.codebaseId&&this.storyboardId===e.storyboardId&&this.uniquePath===e.uniquePath}getKey(){return this.cachedKey||(this.cachedKey=`TE_${this.codebaseId}_${this.storyboardId}_${this.uniquePath}`),this.cachedKey}isEmpty(){return!this.storyboardId||!this.uniquePath}static fromKey(e){if(!e)return t.empty();const[n,r,i,s]=e.split("_");return i&&s?new t(r,i,s):t.empty()}static fromOtherElement(e){return new t(e.codebaseId,e.storyboardId,e.uniquePath)}static empty(){return new t("","","")}static forStoryboard(n){return new t(e,n,"0")}isStoryboard(t){return this.codebaseId===e&&(!t||this.storyboardId===t)}isKnownElement(){return!this.isEmpty()&&Boolean(this.codebaseId)&&this.codebaseId!==e}isParentOf(e){return!!e&&(this.isStoryboard()?this.storyboardId===e.storyboardId&&this.uniquePath!==e.uniquePath:this.storyboardId===e.storyboardId&&this.uniquePath!==e.uniquePath&&Boolean(this.uniquePath)&&Boolean(e.uniquePath)&&e.uniquePath.startsWith(this.uniquePath))}isSiblingOf(e){if(!e||!this.uniquePath||!e.uniquePath)return!1;if(this.isEqual(e))return!1;if(this.isStoryboard())return e.isStoryboard();const t=this.uniquePath.split("-").slice(0,-1).join("-"),n=e.uniquePath.split("-").slice(0,-1).join("-");return this.storyboardId===e.storyboardId&&this.uniquePath!==e.uniquePath&&Boolean(t)&&Boolean(n)&&t===n}}return Tm.TempoElement=t,Tm}var bm,Sm={},Im={},Cm={};function Nm(){if(bm)return Cm;let e;bm=1,Object.defineProperty(Cm,"__esModule",{value:!0}),Cm.default=function(){if(!e&&(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(t)};const t=new Uint8Array(16);return Cm}var Am,xm,Om,Rm,Dm={},Lm={},Mm={};function Pm(){if(Am)return Mm;Am=1,Object.defineProperty(Mm,"__esModule",{value:!0}),Mm.default=void 0;return Mm.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Mm}function km(){if(xm)return Lm;xm=1,Object.defineProperty(Lm,"__esModule",{value:!0}),Lm.default=void 0;var e,t=(e=Pm())&&e.__esModule?e:{default:e};var n=function(e){return"string"==typeof e&&t.default.test(e)};return Lm.default=n,Lm}function Um(){if(Om)return Dm;Om=1,Object.defineProperty(Dm,"__esModule",{value:!0}),Dm.default=void 0,Dm.unsafeStringify=r;var e,t=(e=km())&&e.__esModule?e:{default:e};const n=[];for(let s=0;s<256;++s)n.push((s+256).toString(16).slice(1));function r(e,t=0){return n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]}var i=function(e,n=0){const i=r(e,n);if(!(0,t.default)(i))throw TypeError("Stringified UUID is invalid");return i};return Dm.default=i,Dm}function jm(){if(Rm)return Im;Rm=1,Object.defineProperty(Im,"__esModule",{value:!0}),Im.default=void 0;var e,t=(e=Nm())&&e.__esModule?e:{default:e},n=Um();let r,i,s=0,o=0;var a=function(e,a,l){let c=a&&l||0;const u=a||new Array(16);let h=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==h||null==d){const n=e.random||(e.rng||t.default)();null==h&&(h=r=[1|n[0],n[1],n[2],n[3],n[4],n[5]]),null==d&&(d=i=16383&(n[6]<<8|n[7]))}let f=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:o+1;const m=f-s+(p-o)/1e4;if(m<0&&void 0===e.clockseq&&(d=d+1&16383),(m<0||f>s)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=f,o=p,i=d,f+=122192928e5;const g=(1e4*(268435455&f)+p)%4294967296;u[c++]=g>>>24&255,u[c++]=g>>>16&255,u[c++]=g>>>8&255,u[c++]=255&g;const y=f/4294967296*1e4&268435455;u[c++]=y>>>8&255,u[c++]=255&y,u[c++]=y>>>24&15|16,u[c++]=y>>>16&255,u[c++]=d>>>8|128,u[c++]=255&d;for(let t=0;t<6;++t)u[c+t]=h[t];return a||(0,n.unsafeStringify)(u)};return Im.default=a,Im}var Fm,Vm,Km={},Bm={},Hm={};function $m(){if(Fm)return Hm;Fm=1,Object.defineProperty(Hm,"__esModule",{value:!0}),Hm.default=void 0;var e,t=(e=km())&&e.__esModule?e:{default:e};var n=function(e){if(!(0,t.default)(e))throw TypeError("Invalid UUID");let n;const r=new Uint8Array(16);return r[0]=(n=parseInt(e.slice(0,8),16))>>>24,r[1]=n>>>16&255,r[2]=n>>>8&255,r[3]=255&n,r[4]=(n=parseInt(e.slice(9,13),16))>>>8,r[5]=255&n,r[6]=(n=parseInt(e.slice(14,18),16))>>>8,r[7]=255&n,r[8]=(n=parseInt(e.slice(19,23),16))>>>8,r[9]=255&n,r[10]=(n=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=n/4294967296&255,r[12]=n>>>24&255,r[13]=n>>>16&255,r[14]=n>>>8&255,r[15]=255&n,r};return Hm.default=n,Hm}function qm(){if(Vm)return Bm;Vm=1,Object.defineProperty(Bm,"__esModule",{value:!0}),Bm.URL=Bm.DNS=void 0,Bm.default=function(e,s,o){function a(e,r,i,a){var l;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=(0,n.default)(r)),16!==(null===(l=r)||void 0===l?void 0:l.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+e.length);if(c.set(r),c.set(e,r.length),c=o(c),c[6]=15&c[6]|s,c[8]=63&c[8]|128,i){a=a||0;for(let e=0;e<16;++e)i[a+e]=c[e];return i}return(0,t.unsafeStringify)(c)}try{a.name=e}catch(l){}return a.DNS=r,a.URL=i,a};var e,t=Um(),n=(e=$m())&&e.__esModule?e:{default:e};const r="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Bm.DNS=r;const i="6ba7b811-9dad-11d1-80b4-00c04fd430c8";return Bm.URL=i,Bm}var zm,Wm,Ym={};function Gm(){if(zm)return Ym;function e(e){return 14+(e+64>>>9<<4)+1}function t(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function n(e,n,r,i,s,o){return t((a=t(t(n,e),t(i,o)))<<(l=s)|a>>>32-l,r);var a,l}function r(e,t,r,i,s,o,a){return n(t&r|~t&i,e,t,s,o,a)}function i(e,t,r,i,s,o,a){return n(t&i|r&~i,e,t,s,o,a)}function s(e,t,r,i,s,o,a){return n(t^r^i,e,t,s,o,a)}function o(e,t,r,i,s,o,a){return n(r^(t|~i),e,t,s,o,a)}zm=1,Object.defineProperty(Ym,"__esModule",{value:!0}),Ym.default=void 0;var a=function(n){if("string"==typeof n){const e=unescape(encodeURIComponent(n));n=new Uint8Array(e.length);for(let t=0;t<e.length;++t)n[t]=e.charCodeAt(t)}return function(e){const t=[],n=32*e.length,r="0123456789abcdef";for(let i=0;i<n;i+=8){const n=e[i>>5]>>>i%32&255,s=parseInt(r.charAt(n>>>4&15)+r.charAt(15&n),16);t.push(s)}return t}(function(n,a){n[a>>5]|=128<<a%32,n[e(a)-1]=a;let l=1732584193,c=-271733879,u=-1732584194,h=271733878;for(let e=0;e<n.length;e+=16){const a=l,d=c,f=u,p=h;l=r(l,c,u,h,n[e],7,-680876936),h=r(h,l,c,u,n[e+1],12,-389564586),u=r(u,h,l,c,n[e+2],17,606105819),c=r(c,u,h,l,n[e+3],22,-1044525330),l=r(l,c,u,h,n[e+4],7,-176418897),h=r(h,l,c,u,n[e+5],12,1200080426),u=r(u,h,l,c,n[e+6],17,-1473231341),c=r(c,u,h,l,n[e+7],22,-45705983),l=r(l,c,u,h,n[e+8],7,1770035416),h=r(h,l,c,u,n[e+9],12,-1958414417),u=r(u,h,l,c,n[e+10],17,-42063),c=r(c,u,h,l,n[e+11],22,-1990404162),l=r(l,c,u,h,n[e+12],7,1804603682),h=r(h,l,c,u,n[e+13],12,-40341101),u=r(u,h,l,c,n[e+14],17,-1502002290),c=r(c,u,h,l,n[e+15],22,1236535329),l=i(l,c,u,h,n[e+1],5,-165796510),h=i(h,l,c,u,n[e+6],9,-1069501632),u=i(u,h,l,c,n[e+11],14,643717713),c=i(c,u,h,l,n[e],20,-373897302),l=i(l,c,u,h,n[e+5],5,-701558691),h=i(h,l,c,u,n[e+10],9,38016083),u=i(u,h,l,c,n[e+15],14,-660478335),c=i(c,u,h,l,n[e+4],20,-405537848),l=i(l,c,u,h,n[e+9],5,568446438),h=i(h,l,c,u,n[e+14],9,-1019803690),u=i(u,h,l,c,n[e+3],14,-187363961),c=i(c,u,h,l,n[e+8],20,1163531501),l=i(l,c,u,h,n[e+13],5,-1444681467),h=i(h,l,c,u,n[e+2],9,-51403784),u=i(u,h,l,c,n[e+7],14,1735328473),c=i(c,u,h,l,n[e+12],20,-1926607734),l=s(l,c,u,h,n[e+5],4,-378558),h=s(h,l,c,u,n[e+8],11,-2022574463),u=s(u,h,l,c,n[e+11],16,1839030562),c=s(c,u,h,l,n[e+14],23,-35309556),l=s(l,c,u,h,n[e+1],4,-1530992060),h=s(h,l,c,u,n[e+4],11,1272893353),u=s(u,h,l,c,n[e+7],16,-155497632),c=s(c,u,h,l,n[e+10],23,-1094730640),l=s(l,c,u,h,n[e+13],4,681279174),h=s(h,l,c,u,n[e],11,-358537222),u=s(u,h,l,c,n[e+3],16,-722521979),c=s(c,u,h,l,n[e+6],23,76029189),l=s(l,c,u,h,n[e+9],4,-640364487),h=s(h,l,c,u,n[e+12],11,-421815835),u=s(u,h,l,c,n[e+15],16,530742520),c=s(c,u,h,l,n[e+2],23,-995338651),l=o(l,c,u,h,n[e],6,-198630844),h=o(h,l,c,u,n[e+7],10,1126891415),u=o(u,h,l,c,n[e+14],15,-1416354905),c=o(c,u,h,l,n[e+5],21,-57434055),l=o(l,c,u,h,n[e+12],6,1700485571),h=o(h,l,c,u,n[e+3],10,-1894986606),u=o(u,h,l,c,n[e+10],15,-1051523),c=o(c,u,h,l,n[e+1],21,-2054922799),l=o(l,c,u,h,n[e+8],6,1873313359),h=o(h,l,c,u,n[e+15],10,-30611744),u=o(u,h,l,c,n[e+6],15,-1560198380),c=o(c,u,h,l,n[e+13],21,1309151649),l=o(l,c,u,h,n[e+4],6,-145523070),h=o(h,l,c,u,n[e+11],10,-1120210379),u=o(u,h,l,c,n[e+2],15,718787259),c=o(c,u,h,l,n[e+9],21,-343485551),l=t(l,a),c=t(c,d),u=t(u,f),h=t(h,p)}return[l,c,u,h]}(function(t){if(0===t.length)return[];const n=8*t.length,r=new Uint32Array(e(n));for(let e=0;e<n;e+=8)r[e>>5]|=(255&t[e/8])<<e%32;return r}(n),8*n.length))};return Ym.default=a,Ym}function Xm(){if(Wm)return Km;Wm=1,Object.defineProperty(Km,"__esModule",{value:!0}),Km.default=void 0;var e=n(qm()),t=n(Gm());function n(e){return e&&e.__esModule?e:{default:e}}var r=(0,e.default)("v3",48,t.default);return Km.default=r,Km}var Qm,Jm,Zm={},eg={};function tg(){if(Qm)return eg;Qm=1,Object.defineProperty(eg,"__esModule",{value:!0}),eg.default=void 0;var e={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};return eg.default=e,eg}function ng(){if(Jm)return Zm;Jm=1,Object.defineProperty(Zm,"__esModule",{value:!0}),Zm.default=void 0;var e=r(tg()),t=r(Nm()),n=Um();function r(e){return e&&e.__esModule?e:{default:e}}var i=function(r,i,s){if(e.default.randomUUID&&!i&&!r)return e.default.randomUUID();const o=(r=r||{}).random||(r.rng||t.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,i){s=s||0;for(let e=0;e<16;++e)i[s+e]=o[e];return i}return(0,n.unsafeStringify)(o)};return Zm.default=i,Zm}var rg,ig,sg={},og={};function ag(){if(rg)return og;function e(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function t(e,t){return e<<t|e>>>32-t}rg=1,Object.defineProperty(og,"__esModule",{value:!0}),og.default=void 0;var n=function(n){const r=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof n){const e=unescape(encodeURIComponent(n));n=[];for(let t=0;t<e.length;++t)n.push(e.charCodeAt(t))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);const s=n.length/4+2,o=Math.ceil(s/16),a=new Array(o);for(let e=0;e<o;++e){const t=new Uint32Array(16);for(let r=0;r<16;++r)t[r]=n[64*e+4*r]<<24|n[64*e+4*r+1]<<16|n[64*e+4*r+2]<<8|n[64*e+4*r+3];a[e]=t}a[o-1][14]=8*(n.length-1)/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=8*(n.length-1)&4294967295;for(let l=0;l<o;++l){const n=new Uint32Array(80);for(let e=0;e<16;++e)n[e]=a[l][e];for(let e=16;e<80;++e)n[e]=t(n[e-3]^n[e-8]^n[e-14]^n[e-16],1);let s=i[0],o=i[1],c=i[2],u=i[3],h=i[4];for(let i=0;i<80;++i){const a=Math.floor(i/20),l=t(s,5)+e(a,o,c,u)+h+r[a]+n[i]>>>0;h=u,u=c,c=t(o,30)>>>0,o=s,s=l}i[0]=i[0]+s>>>0,i[1]=i[1]+o>>>0,i[2]=i[2]+c>>>0,i[3]=i[3]+u>>>0,i[4]=i[4]+h>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]};return og.default=n,og}function lg(){if(ig)return sg;ig=1,Object.defineProperty(sg,"__esModule",{value:!0}),sg.default=void 0;var e=n(qm()),t=n(ag());function n(e){return e&&e.__esModule?e:{default:e}}var r=(0,e.default)("v5",80,t.default);return sg.default=r,sg}var cg,ug={};function hg(){if(cg)return ug;cg=1,Object.defineProperty(ug,"__esModule",{value:!0}),ug.default=void 0;return ug.default="00000000-0000-0000-0000-000000000000",ug}var dg,fg,pg,mg={};function gg(){if(dg)return mg;dg=1,Object.defineProperty(mg,"__esModule",{value:!0}),mg.default=void 0;var e,t=(e=km())&&e.__esModule?e:{default:e};var n=function(e){if(!(0,t.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)};return mg.default=n,mg}function yg(){return fg||(fg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return o.default}});var t=u(jm()),n=u(Xm()),r=u(ng()),i=u(lg()),s=u(hg()),o=u(gg()),a=u(km()),l=u(Um()),c=u($m());function u(e){return e&&e.__esModule?e:{default:e}}}(Sm)),Sm}var vg,Eg={};function _g(){return vg||(vg=1,Object.defineProperty(Eg,"__esModule",{value:!0}),Eg.STORYBOARD_HYDRATION_STATUS=Eg.SELECT_OR_HOVER_STORYBOARD=Eg.DELETE_STYLE_CONSTANT=Eg.FIXED_IFRAME_MESSAGE_IDS=Eg.INHERITABLE_CSS_PROPS=Eg.CSS_VALUES_TO_COLLECT_FOR_PARENT=Eg.CSS_VALUES_TO_COLLECT=void 0,Eg.CSS_VALUES_TO_COLLECT=new Set(["display","flex-direction","flex-grow","flex-shrink","font-family","align-items","justify-content","column-gap","row-gap","flex-wrap","align-content","overflow","text-align","width","max-width","min-width","height","max-height","min-height","font-size","line-height","padding","padding-top","padding-left","padding-right","padding-bottom","margin","margin-top","margin-left","margin-right","margin-bottom","border-radius","font-family","font-weight","object-fit","background-clip","border-left-style","border-top-style","border-right-style","border-bottom-style","border-left-width","border-top-width","border-right-width","border-bottom-width","border-left-color","border-top-color","border-right-color","border-bottom-color","background-color","color","transform","border-top-left-radius","border-top-right-radius","border-bottom-right-radius","border-bottom-left-radius","letter-spacing","opacity","font-style","text-decoration-line","top","left","right","bottom","position","background-image"]),Eg.CSS_VALUES_TO_COLLECT_FOR_PARENT=new Set(["display","flex-direction"]),Eg.INHERITABLE_CSS_PROPS={azimuth:!0,"border-collapse":!0,"border-spacing":!0,"caption-side":!0,color:!0,cursor:!0,direction:!0,"empty-cells":!0,"font-family":!0,"font-size":!0,"font-style":!0,"font-variant":!0,"font-weight":!0,font:!0,"letter-spacing":!0,"line-height":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,"list-style":!0,orphans:!0,quotes:!0,"text-align":!0,"text-indent":!0,"text-transform":!0,visibility:!0,"white-space":!0,widows:!0,"word-spacing":!0},(t=e||(Eg.FIXED_IFRAME_MESSAGE_IDS=e={})).HOVERED_ELEMENT_KEY="HOVERED_ELEMENT_KEY",t.SELECTED_ELEMENT_KEY="SELECTED_ELEMENT_KEY",t.MULTI_SELECTED_ELEMENT_KEYS="MULTI_SELECTED_ELEMENT_KEYS",t.CONTEXT_REQUESTED="CONTEXT_REQUESTED",t.WHEEL_EVENT="WHEEL_EVENT",t.NAV_TREE="NAV_TREE",t.PROCESSED_CSS_RULES_FOR_ELEMENT="PROCESSED_CSS_RULES_FOR_ELEMENT",t.CSS_EVALS_FOR_ELEMENT="CSS_EVALS_FOR_ELEMENT",t.ELEMENT_CLASS_LIST="ELEMENT_CLASS_LIST",t.KEY_DOWN_EVENT="KEY_DOWN_EVENT",t.KEY_UP_EVENT="KEY_UP_EVENT",t.MOUSE_MOVE_EVENT="MOUSE_MOVE_EVENT",t.DRAG_START_EVENT="DRAG_START_EVENT",t.DRAG_END_EVENT="DRAG_END_EVENT",t.DRAG_CANCEL_EVENT="DRAG_CANCEL_EVENT",t.LATEST_HREF="LATEST_HREF",t.LATEST_HYDRATION_ERROR_STATUS="LATEST_HYDRATION_ERROR_STATUS",t.START_EDITING_TEXT="START_EDITING_TEXT",t.EDITED_TEXT="EDITED_TEXT",t.INSTANT_UPDATE_DONE="INSTANT_UPDATE_DONE",t.EDIT_DYNAMIC_TEXT="EDIT_DYNAMIC_TEXT",t.COMPONENT_PREVIEW_CAPTURED="COMPONENT_PREVIEW_CAPTURED",t.COMPONENT_PREVIEW_ERROR="COMPONENT_PREVIEW_ERROR",Eg.DELETE_STYLE_CONSTANT=null,Eg.SELECT_OR_HOVER_STORYBOARD="SELECT_OR_HOVER_STORYBOARD",(r=n||(Eg.STORYBOARD_HYDRATION_STATUS=n={})).OTHER_ERROR="other_error",r.ERROR="error",r.NO_ERROR="no_error"),Eg;var e,t,n,r}var Tg={},wg={},bg=function(e){var t,n,r=e,i={a:0,b:0,c:0},s=[];return t=function(t,n){var o,a,l,c,u,h;if(t.test(r))for(a=0,l=(o=r.match(t)).length;a<l;a+=1)i[n]+=1,c=o[a],u=r.indexOf(c),h=c.length,s.push({selector:e.substr(u,h),type:n,index:u,length:h}),r=r.replace(c,Array(h+1).join(" "))},(n=function(e){var t,n,i,s;if(e.test(r))for(n=0,i=(t=r.match(e)).length;n<i;n+=1)s=t[n],r=r.replace(s,Array(s.length+1).join("A"))})(/\\[0-9A-Fa-f]{6}\s?/g),n(/\\[0-9A-Fa-f]{1,5}\s/g),n(/\\./g),function(){var e,t,n,i,s=/{[^]*/gm;if(s.test(r))for(t=0,n=(e=r.match(s)).length;t<n;t+=1)i=e[t],r=r.replace(i,Array(i.length+1).join(" "))}(),t(/(\[[^\]]+\])/g,"b"),t(/(#[^\#\s\+>~\.\[:\)]+)/g,"a"),t(/(\.[^\s\+>~\.\[:\)]+)/g,"b"),t(/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,"c"),t(/(:(?!not|global|local)[\w-]+\([^\)]*\))/gi,"b"),t(/(:(?!not|global|local)[^\s\+>~\.\[:]+)/g,"b"),r=(r=(r=(r=(r=(r=r.replace(/[\*\s\+>~]/g," ")).replace(/[#\.]/g," ")).replace(/:not/g,"    ")).replace(/:local/g,"      ")).replace(/:global/g,"       ")).replace(/[\(\)]/g," "),t(/([^\s\+>~\.\[:]+)/g,"c"),s.sort(function(e,t){return e.index-t.index}),{selector:e,specificity:"0,"+i.a.toString()+","+i.b.toString()+","+i.c.toString(),specificityArray:[0,i.a,i.b,i.c],parts:s}};const Sg=O(Object.freeze(Object.defineProperty({__proto__:null,calculate:function(e){var t,n,r,i,s=[];for(r=0,i=(t=e.split(",")).length;r<i;r+=1)(n=t[r]).length>0&&s.push(bg(n));return s},compare:function(e,t){var n,r,i;if("string"==typeof e){if(-1!==e.indexOf(","))throw"Invalid CSS selector";n=bg(e).specificityArray}else{if(!Array.isArray(e))throw"Invalid CSS selector or specificity array";if(4!==e.filter(function(e){return"number"==typeof e}).length)throw"Invalid specificity array";n=e}if("string"==typeof t){if(-1!==t.indexOf(","))throw"Invalid CSS selector";r=bg(t).specificityArray}else{if(!Array.isArray(t))throw"Invalid CSS selector or specificity array";if(4!==t.filter(function(e){return"number"==typeof e}).length)throw"Invalid specificity array";r=t}for(i=0;i<4;i+=1){if(n[i]<r[i])return-1;if(n[i]>r[i])return 1}return 0}},Symbol.toStringTag,{value:"Module"})));var Ig,Cg={},Ng={},Ag={};var xg,Og={};var Rg,Dg={};var Lg,Mg,Pg={};function kg(){return Lg||(Lg=1,e=Pg,Object.defineProperty(e,"__esModule",{value:!0}),e.escapeString=e.escapeIdentifier=e.maxHexLength=e.digitsChars=e.quoteChars=e.whitespaceChars=e.stringRenderEscapeChars=e.identEscapeChars=e.isHex=e.isIdent=e.isIdentStart=void 0,e.isIdentStart=function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||"-"===e||"_"===e||"\\"===e||e>=""},e.isIdent=function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"-"===e||"_"===e||e>=""},e.isHex=function(e){return e>="a"&&e<="f"||e>="A"&&e<="F"||e>="0"&&e<="9"},e.identEscapeChars={"!":!0,'"':!0,"#":!0,$:!0,"%":!0,"&":!0,"'":!0,"(":!0,")":!0,"*":!0,"+":!0,",":!0,".":!0,"/":!0,";":!0,"<":!0,"=":!0,">":!0,"?":!0,"@":!0,"[":!0,"\\":!0,"]":!0,"^":!0,"`":!0,"{":!0,"|":!0,"}":!0,"~":!0},e.stringRenderEscapeChars={"\n":!0,"\r":!0,"\t":!0,"\f":!0,"\v":!0},e.whitespaceChars={" ":!0,"\t":!0,"\n":!0,"\r":!0,"\f":!0},e.quoteChars={'"':!0,"'":!0},e.digitsChars={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0},e.maxHexLength=6,e.escapeIdentifier=function(t){for(var n=t.length,r="",i=0;i<n;){var s=t.charAt(i);if(e.identEscapeChars[s]||"-"===s&&1===i&&"-"===t.charAt(0))r+="\\"+s;else if("-"===s||"_"===s||s>="A"&&s<="Z"||s>="a"&&s<="z"||s>="0"&&s<="9"&&0!==i&&(1!==i||"-"!==t.charAt(0)))r+=s;else{var o=s.charCodeAt(0);if(55296==(63488&o)){var a=t.charCodeAt(i++);if(55296!=(64512&o)||56320!=(64512&a))throw Error("UCS-2(decode): illegal sequence");o=((1023&o)<<10)+(1023&a)+65536}r+="\\"+o.toString(16)+" "}i++}return r.trim()},e.escapeString=function(t){for(var n=t.length,r="",i=0;i<n;){var s=t.charAt(i);'"'===s?s='\\"':"\\"===s?s="\\\\":e.stringRenderEscapeChars[s]&&(s="\\"+s.charCodeAt(0).toString(16)+(i===n-1?"":" ")),r+=s,i++}return'"'.concat(r,'"')}),Pg;var e}function Ug(){if(Mg)return Ng;Mg=1,Object.defineProperty(Ng,"__esModule",{value:!0}),Ng.createParser=void 0;var e=(Ig||(Ig=1,function(e){function t(e,t){for(var n=t,r=0;r<e.length;r++){var i=r===e.length-1,s=e.charAt(r),o=n[s]||(n[s]={chars:{}});i&&(o.self=e),n=o.chars}}Object.defineProperty(e,"__esModule",{value:!0}),e.createRegularIndex=e.createMulticharIndex=e.emptyRegularIndex=e.emptyMulticharIndex=void 0,e.emptyMulticharIndex={},e.emptyRegularIndex={},e.createMulticharIndex=function(n){if(0===n.length)return e.emptyMulticharIndex;for(var r={},i=0,s=n;i<s.length;i++)t(s[i],r);return r},e.createRegularIndex=function(t){if(0===t.length)return e.emptyRegularIndex;for(var n={},r=0,i=t;r<i.length;r++)n[i[r]]=!0;return n}}(Ag)),Ag),t=function(){if(xg)return Og;function e(e){var t={type:"NoArgument",optional:!1};function n(e){if(t.type&&t.type!==e&&"NoArgument"!==t.type)throw new Error('Conflicting pseudo-class argument type: "'.concat(t.type,'" vs "').concat(e,'".'));t.type=e}for(var r=0,i=e;r<i.length;r++){var s=i[r];"NoArgument"===s&&(t.optional=!0),"Formula"===s&&n("Formula"),"FormulaOfSelector"===s&&(n("Formula"),t.ofSelector=!0),"String"===s&&n("String"),"Selector"===s&&n("Selector")}return t}function t(e){for(var t={},n=0,r=Object.keys(e);n<r.length;n++){var i=r[n],s=e[i];if(s)for(var o=0,a=s;o<a.length;o++){var l=a[o];(t[l]||(t[l]=[])).push(i)}}return t}return xg=1,Object.defineProperty(Og,"__esModule",{value:!0}),Og.calculatePseudoSignatures=Og.inverseCategories=Og.defaultPseudoSignature=Og.emptyPseudoSignatures=void 0,Og.emptyPseudoSignatures={},Og.defaultPseudoSignature={type:"String",optional:!0},Og.inverseCategories=t,Og.calculatePseudoSignatures=function(n){for(var r=t(n),i={},s=0,o=Object.keys(r);s<o.length;s++){var a=o[s],l=r[a];l&&(i[a]=e(l))}return i},Og}(),n=(Rg||(Rg=1,function(e){var t=Dg&&Dg.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.cssSyntaxDefinitions=e.extendSyntaxDefinition=e.getXmlOptions=void 0;var n,r,i={},s={wildcard:!0};function o(e,t){return function(n,r){return!0===r?e:t(!0===n?e:n,r)}}function a(e){return function(n,r){if(!r||!n)return r;if("object"!=typeof r||null===r)throw new Error("Unexpected syntax definition extension type: ".concat(r,"."));for(var i=t({},n),s=0,o=Object.entries(r);s<o.length;s++){var a=o[s],l=a[0],c=a[1],u=e[l];i[l]=u(n[l],c)}return i}}function l(e,t){return void 0!==t?t:e}function c(e,t){return t?e?e.concat(t):t:e}function u(e,n){if(!n)return e;if(!e)return n;for(var r=t({},e),i=0,s=Object.entries(n);i<s.length;i++){var o=s[i],a=o[0],l=o[1];if(l){var c=e[a];r[a]=c?c.concat(l):l}else delete r[a]}return r}e.getXmlOptions=function(e){return e?"boolean"==typeof e?s:e:i},e.extendSyntaxDefinition=function(e){return function(t,n){var r=e(t,n);if(!r)throw new Error("Syntax definition cannot be null or undefined.");return r}}(a({baseSyntax:l,tag:o(s,a({wildcard:l})),ids:l,classNames:l,namespace:o(s,a({wildcard:l})),combinators:c,attributes:a({operators:c,caseSensitivityModifiers:c,unknownCaseSensitivityModifiers:l}),pseudoClasses:a({unknown:l,definitions:u}),pseudoElements:a({unknown:l,notation:l,definitions:(n=function(e){return Array.isArray(e)?{NoArgument:e}:e},r=u,function(e,t){return r(n(e),n(t))})})}));var h={tag:{},ids:!0,classNames:!0,combinators:[],pseudoElements:{unknown:"reject",notation:"singleColon",definitions:["first-letter","first-line"]},pseudoClasses:{unknown:"reject",definitions:{NoArgument:["link","visited","active"]}}},d=(0,e.extendSyntaxDefinition)(h,{tag:{wildcard:!0},combinators:[">","+"],attributes:{unknownCaseSensitivityModifiers:"reject",operators:["=","~=","|="]},pseudoElements:{definitions:["before","after"]},pseudoClasses:{unknown:"reject",definitions:{NoArgument:["hover","focus","first-child"],String:["lang"]}}}),f=(0,e.extendSyntaxDefinition)(d,{namespace:{wildcard:!0},combinators:["~"],attributes:{operators:["^=","$=","*="]},pseudoElements:{notation:"both"},pseudoClasses:{definitions:{NoArgument:["root","last-child","first-of-type","last-of-type","only-child","only-of-type","empty","target","enabled","disabled","checked","indeterminate"],Formula:["nth-child","nth-last-child","nth-of-type","nth-last-of-type"],Selector:["not"]}}}),p=(0,e.extendSyntaxDefinition)(f,{combinators:["||"],attributes:{caseSensitivityModifiers:["i","I","s","S"]},pseudoClasses:{definitions:{NoArgument:["any-link","local-link","target-within","scope","current","past","future","focus-within","focus-visible","read-write","read-only","placeholder-shown","default","valid","invalid","in-range","out-of-range","required","optional","blank","user-invalid"],Formula:["nth-col","nth-last-col"],String:["dir"],FormulaOfSelector:["nth-child","nth-last-child"],Selector:["current","is","where","has"]}}}),m=(0,e.extendSyntaxDefinition)(p,{pseudoElements:{unknown:"accept"},pseudoClasses:{unknown:"accept"},attributes:{unknownCaseSensitivityModifiers:"accept"}});e.cssSyntaxDefinitions={css1:h,css2:d,css3:f,"selectors-3":f,"selectors-4":p,latest:p,progressive:m}}(Dg)),Dg),r=kg(),i="css-selector-parser parse error: ";return Ng.createParser=function(s){void 0===s&&(s={});var o=s.syntax,a=void 0===o?"latest":o,l=s.substitutes,c=s.strict,u=void 0===c||c,h="object"==typeof a?a:n.cssSyntaxDefinitions[a];h.baseSyntax&&(h=(0,n.extendSyntaxDefinition)(n.cssSyntaxDefinitions[h.baseSyntax],h));var d=h.tag?[!0,Boolean((0,n.getXmlOptions)(h.tag).wildcard)]:[!1,!1],f=d[0],p=d[1],m=Boolean(h.ids),g=Boolean(h.classNames),y=Boolean(h.namespace),v=h.namespace&&(!0===h.namespace||!0===h.namespace.wildcard);if(y&&!f)throw new Error("".concat(i,"Namespaces cannot be enabled while tags are disabled."));var E=Boolean(l),_=h.combinators?(0,e.createMulticharIndex)(h.combinators):e.emptyMulticharIndex,T=h.attributes?[!0,h.attributes.operators?(0,e.createMulticharIndex)(h.attributes.operators):e.emptyMulticharIndex,h.attributes.caseSensitivityModifiers?(0,e.createRegularIndex)(h.attributes.caseSensitivityModifiers):e.emptyRegularIndex,"accept"===h.attributes.unknownCaseSensitivityModifiers]:[!1,e.emptyMulticharIndex,e.emptyRegularIndex,!1],w=T[0],b=T[1],S=T[2],I=T[3],C=I||Object.keys(S).length>0,N=h.pseudoClasses?[!0,h.pseudoClasses.definitions?(0,t.calculatePseudoSignatures)(h.pseudoClasses.definitions):t.emptyPseudoSignatures,"accept"===h.pseudoClasses.unknown]:[!1,t.emptyPseudoSignatures,!1],A=N[0],x=N[1],O=N[2],R=h.pseudoElements?[!0,"singleColon"===h.pseudoElements.notation||"both"===h.pseudoElements.notation,!h.pseudoElements.notation||"doubleColon"===h.pseudoElements.notation||"both"===h.pseudoElements.notation,h.pseudoElements.definitions?(0,t.calculatePseudoSignatures)(Array.isArray(h.pseudoElements.definitions)?{NoArgument:h.pseudoElements.definitions}:h.pseudoElements.definitions):t.emptyPseudoSignatures,"accept"===h.pseudoElements.unknown]:[!1,!1,!1,t.emptyPseudoSignatures,!1],D=R[0],L=R[1],M=R[2],P=R[3],k=R[4],U="",j=U.length,F=0,V="",K=function(e){return V===e},B=function(){return K("*")||(0,r.isIdentStart)(V)},H=function(e){F=e,V=U.charAt(F)},$=function(){F++,V=U.charAt(F)},q=function(){var e=V;return F++,V=U.charAt(F),e};function z(e){var t=Math.min(j-1,F),n=new Error("".concat(i).concat(e," Pos: ").concat(t,"."));throw n.position=t,n.name="ParserError",n}function W(e,t){if(!e)return z(t)}var Y=function(){W(F<j,"Unexpected end of input.")},G=function(){return F>=j},X=function(e){W(F<j,'Expected "'.concat(e,'" but end of input reached.')),W(V===e,'Expected "'.concat(e,'" but "').concat(V,'" found.')),F++,V=U.charAt(F)};function Q(e){var t=J(e,F);if(t)return F+=t.length,V=U.charAt(F),t}function J(e,t){var n=e[U.charAt(t)];if(n){var r=J(n.chars,t+1);if(r)return r;if(n.self)return n.self}}function Z(){for(var e=q(),t=1;(0,r.isHex)(V)&&t<r.maxHexLength;)e+=q(),t++;return function(){if(" "===V||"\t"===V||"\f"===V||"\n"===V)return void $();"\r"===V&&$();"\n"===V&&$()}(),String.fromCharCode(parseInt(e,16))}function ee(e){var t="";for(X(e);F<j;){if(K(e))return $(),t;K("\\")?($(),K(e)?(t+=e,$()):"\n"===V||"\f"===V?$():"\r"===V?($(),K("\n")&&$()):(0,r.isHex)(V)?t+=Z():(t+=V,$())):(t+=V,$())}return t}function te(){if(!(0,r.isIdentStart)(V))return null;for(var e="";K("-");)e+=V,$();for("-"!==e||(0,r.isIdent)(V)||K("\\")||z("Identifiers cannot consist of a single hyphen."),u&&e.length>=2&&z("Identifiers cannot start with two hyphens with strict mode on."),r.digitsChars[V]&&z("Identifiers cannot start with hyphens followed by digits.");F<j;)if((0,r.isIdent)(V))e+=q();else{if(!K("\\"))break;$(),Y(),(0,r.isHex)(V)?e+=Z():e+=q()}return e}function ne(){for(var e="";F<j&&!K(")");)if(K("\\")){if($(),G()&&!u)return(e+"\\").trim();Y(),(0,r.isHex)(V)?e+=Z():e+=q()}else e+=q();return e.trim()}function re(){for(;r.whitespaceChars[V];)$()}function ie(e){void 0===e&&(e=!1),re();for(var t=[he(e)];K(",");)$(),re(),t.push(he(e));return{type:"Selector",rules:t}}function se(){var e;if(X("["),re(),K("|")){W(y,"Namespaces are not enabled."),$();var t=te();W(t,"Expected attribute name."),e={type:"Attribute",name:t,namespace:{type:"NoNamespace"}}}else if(K("*")){W(y,"Namespaces are not enabled."),W(v,"Wildcard namespace is not enabled."),$(),X("|");var n=te();W(n,"Expected attribute name."),e={type:"Attribute",name:n,namespace:{type:"WildcardNamespace"}}}else{var i=te();if(W(i,"Expected attribute name."),e={type:"Attribute",name:i},K("|")){var s=F;if($(),(0,r.isIdentStart)(V)){W(y,"Namespaces are not enabled.");var o=te();W(o,"Expected attribute name."),e={type:"Attribute",name:o,namespace:{type:"NamespaceName",name:i}}}else H(s)}}if(W(e.name,"Expected attribute name."),re(),G()&&!u)return e;if(K("]"))$();else{if(e.operator=Q(b),W(e.operator,"Expected a valid attribute selector operator."),re(),Y(),r.quoteChars[V])e.value={type:"String",value:ee(V)};else if(E&&K("$")){$();var a=te();W(a,"Expected substitute name."),e.value={type:"Substitution",name:a}}else{var l=te();W(l,"Expected attribute value."),e.value={type:"String",value:l}}if(re(),G()&&!u)return e;if(!K("]")){var c=te();if(W(c,"Expected end of attribute selector."),e.caseSensitivityModifier=c,W(C,"Attribute case sensitivity modifiers are not enabled."),W(I||S[e.caseSensitivityModifier],"Unknown attribute case sensitivity modifier."),re(),G()&&!u)return e}X("]")}return e}function oe(){for(var e="";r.digitsChars[V];)e+=q();return W(""!==e,"Formula parse error."),parseInt(e)}var ae=function(){return K("-")||K("+")||r.digitsChars[V]};function le(e,t,n){var i;if(K("(")){if($(),re(),E&&K("$")){$();var s=te();W(s,"Expected substitute name."),i={type:"Substitution",name:s}}else if("String"===n.type)W((i={type:"String",value:ne()}).value,"Expected ".concat(t," argument value."));else if("Selector"===n.type)i=ie(!0);else{if("Formula"!==n.type)return z("Invalid ".concat(t," signature."));var o=function(){if(K("e")||K("o")){var e=te();if("even"===e)return re(),[2,0];if("odd"===e)return re(),[2,1]}var t,n=null,i=1;if(K("-")&&($(),i=-1),ae()&&(K("+")&&$(),n=oe(),!K("\\")&&!K("n")))return[0,n*i];if(null===n&&(n=1),n*=i,K("\\")?($(),t=(0,r.isHex)(V)?Z():q()):t=q(),W("n"===t,'Formula parse error: expected "n".'),re(),K("+")||K("-")){var s=K("+")?1:-1;return $(),re(),[n,s*oe()]}return[n,0]}(),a=o[0],l=o[1];i={type:"Formula",a:a,b:l},n.ofSelector&&(re(),(K("o")||K("\\"))&&(W("of"===te(),"Formula of selector parse error."),re(),i={type:"FormulaOfSelector",a:a,b:l,selector:he()}))}if(re(),G()&&!u)return i;X(")")}else W(n.optional,"Argument is required for ".concat(t,' "').concat(e,'".'));return i}function ce(){if(K("*"))return W(p,"Wildcard tag name is not enabled."),$(),{type:"WildcardTag"};if((0,r.isIdentStart)(V)){W(f,"Tag names are not enabled.");var e=te();return W(e,"Expected tag name."),{type:"TagName",name:e}}return z("Expected tag name.")}function ue(){if(K("*")){var e=F;return $(),K("|")?($(),B()?(W(y,"Namespaces are not enabled."),W(v,"Wildcard namespace is not enabled."),(n=ce()).namespace={type:"WildcardNamespace"},n):(H(e),ce())):(H(e),ce())}if(K("|"))return W(y,"Namespaces are not enabled."),$(),(n=ce()).namespace={type:"NoNamespace"},n;if((0,r.isIdentStart)(V)){var t=te();if(W(t,"Expected tag name."),!K("|"))return W(f,"Tag names are not enabled."),{type:"TagName",name:t};var n;e=F;return $(),B()?(W(y,"Namespaces are not enabled."),(n=ce()).namespace={type:"NamespaceName",name:t},n):(H(e),{type:"TagName",name:t})}return z("Expected tag name.")}function he(e){var n,r;void 0===e&&(e=!1);var i={type:"Rule",items:[]};e&&((p=Q(_))&&(i.combinator=p,re()));for(;F<j;)if(B())W(0===i.items.length,"Unexpected tag/namespace start."),i.items.push(ue());else if(K("|")){var s=F;if($(),!B()){H(s);break}W(0===i.items.length,"Unexpected tag/namespace start."),H(s),i.items.push(ue())}else if(K(".")){W(g,"Class names are not enabled."),$();var o=te();W(o,"Expected class name."),i.items.push({type:"ClassName",name:o})}else if(K("#")){W(m,"IDs are not enabled."),$();var a=te();W(a,"Expected ID name."),i.items.push({type:"Id",name:a})}else if(K("["))W(w,"Attributes are not enabled."),i.items.push(se());else{if(!K(":"))break;var l=!1;$(),K(":")&&(W(D,"Pseudo elements are not enabled."),W(M,"Pseudo elements double colon notation is not enabled."),l=!0,$());var c=te();if(W(l||c,"Expected pseudo-class name."),W(!l||c,"Expected pseudo-element name."),W(c,"Expected pseudo-class name."),W(!l||k||Object.prototype.hasOwnProperty.call(P,c),'Unknown pseudo-element "'.concat(c,'".')),D&&(l||!l&&L&&Object.prototype.hasOwnProperty.call(P,c))){var u={type:"PseudoElement",name:c};(d=le(c,"pseudo-element",h=null!==(n=P[c])&&void 0!==n?n:k&&t.defaultPseudoSignature))&&(W("Formula"!==d.type&&"FormulaOfSelector"!==d.type,"Pseudo-elements cannot have formula argument."),u.argument=d),i.items.push(u)}else{var h;W(A,"Pseudo-classes are not enabled."),W(h=null!==(r=x[c])&&void 0!==r?r:O&&t.defaultPseudoSignature,'Unknown pseudo-class: "'.concat(c,'".'));var d,f={type:"PseudoClass",name:c};(d=le(c,"pseudo-class",h))&&(f.argument=d),i.items.push(f)}}if(0===i.items.length)return G()?z("Expected rule but end of input reached."):z('Expected rule but "'.concat(V,'" found.'));if(re(),!G()&&!K(",")&&!K(")")){var p=Q(_);re(),i.nestedRule=he(),i.nestedRule.combinator=p}return i}return function(e){if("string"!=typeof e)throw new Error("".concat(i,"Expected string input."));return j=(U=e).length,F=0,V=U.charAt(0),ie()}},Ng}var jg,Fg={};function Vg(){if(jg)return Fg;jg=1,Object.defineProperty(Fg,"__esModule",{value:!0}),Fg.render=void 0;var e=kg(),t="css-selector-parser render error: ";function n(n){if("WildcardNamespace"===n.type)return"*|";if("NamespaceName"===n.type)return"".concat((0,e.escapeIdentifier)(n.name),"|");if("NoNamespace"===n.type)return"|";throw new Error("".concat(t,"Unknown namespace type: ").concat(n.type,"."))}function r(e,t){if(e){var n="".concat(1===e?"":-1===e?"-":e,"n");return t&&(n+="".concat(t>0?"+":"").concat(t)),n}return String(t)}return Fg.render=function i(s){if("Selector"===s.type)return s.rules.map(i).join(", ");if("Rule"===s.type){var o="",a=s.items,l=s.combinator,c=s.nestedRule;l&&(o+="".concat(l," "));for(var u=0,h=a;u<h.length;u++){o+=i(h[u])}return c&&(o+=" ".concat(i(c))),o}if("TagName"===s.type||"WildcardTag"===s.type){o="";return(f=s.namespace)&&(o+=n(f)),"TagName"===s.type?o+=(0,e.escapeIdentifier)(s.name):"WildcardTag"===s.type&&(o+="*"),o}if("Id"===s.type)return"#".concat((0,e.escapeIdentifier)(s.name));if("ClassName"===s.type)return".".concat((0,e.escapeIdentifier)(s.name));if("Attribute"===s.type){var d=s.name,f=s.namespace,p=s.operator,m=s.value,g=s.caseSensitivityModifier;o="[";if(f&&(o+=n(f)),o+=(0,e.escapeIdentifier)(d),p&&m){if(o+=p,"String"===m.type)o+=(0,e.escapeString)(m.value);else{if("Substitution"!==m.type)throw new Error("Unknown attribute value type: ".concat(m.type,"."));o+=(_=m,"$".concat((0,e.escapeIdentifier)(_.name)))}g&&(o+=" ".concat((0,e.escapeIdentifier)(g)))}return o+="]"}if("PseudoClass"===s.type){var y=s.name,v=s.argument;o=":".concat((0,e.escapeIdentifier)(y));return v&&(o+="(".concat("String"===v.type?(0,e.escapeIdentifier)(v.value):i(v),")")),o}if("PseudoElement"===s.type){var E=s.name;v=s.argument,o="::".concat((0,e.escapeIdentifier)(E));return v&&(o+="(".concat("String"===v.type?(0,e.escapeIdentifier)(v.value):i(v),")")),o}if("String"===s.type)throw new Error("".concat(t,"String cannot be rendered outside of context."));if("Formula"===s.type)return r(s.a,s.b);if("FormulaOfSelector"===s.type)return r(s.a,s.b)+" of "+i(s.selector);if("Substitution"===s.type)return"$".concat((0,e.escapeIdentifier)(s.name));var _;throw new Error("Unknown type specified to render method: ".concat(s.type,"."))},Fg}var Kg,Bg,Hg={};function $g(){return Bg||(Bg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ast=e.render=e.createParser=void 0;var t=Ug();Object.defineProperty(e,"createParser",{enumerable:!0,get:function(){return t.createParser}});var n=Vg();Object.defineProperty(e,"render",{enumerable:!0,get:function(){return n.render}});var r=function(){if(Kg)return Hg;Kg=1;var e=Hg&&Hg.__assign||function(){return e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},e.apply(this,arguments)};function t(t){return function(n,r){var i;return(i={})[n]=function(n){return e({type:t},n)},i[r]=function(e){return"object"==typeof e&&null!==e&&e.type===t},i}}return Object.defineProperty(Hg,"__esModule",{value:!0}),Hg.ast=void 0,Hg.ast=e(e(e(e(e(e(e(e(e(e(e(e(e(e(e(e({},t("Selector")("selector","isSelector")),t("Rule")("rule","isRule")),t("TagName")("tagName","isTagName")),t("Id")("id","isId")),t("ClassName")("className","isClassName")),t("WildcardTag")("wildcardTag","isWildcardTag")),t("NamespaceName")("namespaceName","isNamespaceName")),t("WildcardNamespace")("wildcardNamespace","isWildcardNamespace")),t("NoNamespace")("noNamespace","isNoNamespace")),t("Attribute")("attribute","isAttribute")),t("PseudoClass")("pseudoClass","isPseudoClass")),t("PseudoElement")("pseudoElement","isPseudoElement")),t("String")("string","isString")),t("Formula")("formula","isFormula")),t("FormulaOfSelector")("formulaOfSelector","isFormulaOfSelector")),t("Substitution")("substitution","isSubstitution")),Hg}();Object.defineProperty(e,"ast",{enumerable:!0,get:function(){return r.ast}})}(Cg)),Cg}var qg,zg={};function Wg(){return qg||(qg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.removeSessionStorageItem=e.setSessionStorageItem=e.getSessionStorageItem=e.removeMemoryStorageItem=e.setMemoryStorageItem=e.getMemoryStorageItem=e.CURRENT_NAV_TREE=e.ELEMENT_KEY_TO_NAV_NODE=e.ELEMENT_KEY_TO_LOOKUP_LIST=e.NAV_TREE_CALLBACKS=e.IS_FLUSHING=e.HOT_RELOADING=e.TEXT_EDIT=e.HOVERED_ELEMENT_KEY=e.MULTI_SELECTED_ELEMENT_KEYS=e.SELECTED_ELEMENT_KEY=e.SAVED_STORYBOARD_COMPONENT_FILENAME=e.ORIGINAL_STORYBOARD_URL=e.STORYBOARD_TYPE=e.STORYBOARD_COMPONENT=e.SCOPE_LOOKUP=e.TREE_ELEMENT_LOOKUP=void 0,e.TREE_ELEMENT_LOOKUP="TREE_ELEMENT_LOOKUP",e.SCOPE_LOOKUP="SCOPE_LOOKUP",e.STORYBOARD_COMPONENT="STORYBOARD_COMPONENT",e.STORYBOARD_TYPE="STORYBOARD_TYPE",e.ORIGINAL_STORYBOARD_URL="ORIGINAL_STORYBOARD_URL",e.SAVED_STORYBOARD_COMPONENT_FILENAME="SAVED_STORYBOARD_COMPONENT_FILENAME",e.SELECTED_ELEMENT_KEY="SELECTED_ELEMENT_KEY",e.MULTI_SELECTED_ELEMENT_KEYS="MULTI_SELECTED_ELEMENT_KEYS",e.HOVERED_ELEMENT_KEY="HOVERED_ELEMENT_KEY",e.TEXT_EDIT="TEXT_EDIT",e.HOT_RELOADING="HOT_RELOADING",e.IS_FLUSHING="IS_FLUSHING",e.NAV_TREE_CALLBACKS="NAV_TREE_CALLBACKS",e.ELEMENT_KEY_TO_LOOKUP_LIST="ELEMENT_KEY_TO_LOOKUP_LIST",e.ELEMENT_KEY_TO_NAV_NODE="ELEMENT_KEY_TO_NAV_NODE",e.CURRENT_NAV_TREE="CURRENT_NAV_TREE";const t={};e.getMemoryStorageItem=e=>t[e];e.setMemoryStorageItem=(e,n)=>{t[e]=n,n||delete t[e]};e.removeMemoryStorageItem=e=>{delete t[e]};e.getSessionStorageItem=(e,t)=>sessionStorage.getItem(`${t}_${e}`);e.setSessionStorageItem=(t,n,r)=>{n?sessionStorage.setItem(`${r}_${t}`,n):(0,e.removeSessionStorageItem)(t,r)};e.removeSessionStorageItem=(e,t)=>{sessionStorage.removeItem(`${t}_${e}`)}}(zg)),zg}var Yg,Gg,Xg,Qg,Jg,Zg,ey,ty={},ny={},ry={};function iy(){return Yg||(Yg=1,function(e){var t=ry&&ry.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.teardownEditableText=e.setupEditableText=e.getEditingInfo=e.currentlyEditing=e.hasTextContents=e.canEditText=void 0;const n=uy(),r=Wg(),i=_g(),s=t(vm());e.canEditText=e=>{const t=((0,r.getMemoryStorageItem)(r.TREE_ELEMENT_LOOKUP)||{})[e.codebaseId];return!!t&&t.staticTextContents};e.hasTextContents=e=>{if(!e)return!1;let t=!1,n=!1;return e.childNodes.forEach(e=>{e.nodeType!==Node.TEXT_NODE?n=!0:t=!0}),t&&!n};e.currentlyEditing=()=>{const e=(0,r.getMemoryStorageItem)(r.TEXT_EDIT);return null!=e};e.getEditingInfo=()=>(0,r.getMemoryStorageItem)(r.TEXT_EDIT);const o=()=>{(0,r.setMemoryStorageItem)(r.TEXT_EDIT,null)};e.setupEditableText=(t,o,a)=>{const l=(0,n.getNodeForElementKey)(t.getKey());if(!l)return;const c=(0,s.default)(l).text();var u;u={key:t.getKey(),originalText:c},(0,r.setMemoryStorageItem)(r.TEXT_EDIT,u),o.postMessage({id:i.FIXED_IFRAME_MESSAGE_IDS.START_EDITING_TEXT,data:{key:t.getKey(),oldText:c}}),(0,s.default)(l).attr("contenteditable","plaintext-only").trigger("focus"),(0,s.default)(l).css({cursor:"text",outline:"none",border:"none"}),(0,s.default)(l).on("blur",()=>(0,e.teardownEditableText)(o,a))};e.teardownEditableText=(t,r)=>{var a;const l=(0,e.getEditingInfo)();if(!(0,e.currentlyEditing)())return;if(o(),!l)return;const c=(0,n.getNodeForElementKey)(l.key);if(!c)return;const u=(0,s.default)(c).text();t.postMessage({id:i.FIXED_IFRAME_MESSAGE_IDS.EDITED_TEXT,data:{key:l.key,newText:u,oldText:l.originalText}}),null===(a=window.getSelection())||void 0===a||a.removeAllRanges(),(0,s.default)(c).removeAttr("contenteditable").off("blur").css({cursor:"",outline:"",border:""}),o()}}(ry)),ry}function sy(){return Gg||(Gg=1,function(e){var t=ny&&ny.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeOutline=e.updateOutlines=e.clearAllOutlines=e.getOutlineElement=e.OutlineType=e.PRIMARY_COMPONENT_OUTLINE_COLOR=e.SECONDARY_OUTLINE_COLOUR=e.PRIMARY_OUTLINE_COLOUR=void 0;const n=uy(),r=Wg(),i=t(vm()),s=wm(),o=iy(),a=_g();var l,c;e.PRIMARY_OUTLINE_COLOUR="#4597F7",e.SECONDARY_OUTLINE_COLOUR="#4597F7",e.PRIMARY_COMPONENT_OUTLINE_COLOR="#6183e4",(c=l||(e.OutlineType=l={}))[c.PRIMARY=0]="PRIMARY",c[c.SECONDARY=1]="SECONDARY",c[c.CHILD=2]="CHILD",c[c.MOVE=3]="MOVE";e.getOutlineElement=(t,i,c,u,h,d,f,p,m,g)=>{const y=(0,r.getMemoryStorageItem)("aiContext")?{primary:"#6858f5",secondary:"#6858f5",component:"#5246C2"}:{primary:e.PRIMARY_OUTLINE_COLOUR,secondary:e.SECONDARY_OUTLINE_COLOUR,component:e.PRIMARY_COMPONENT_OUTLINE_COLOR},v=c,E=u,_=(0,r.getMemoryStorageItem)("zoomPerc"),T=_?1/Number(_):1,w=document.createElement("div");if(w.classList.add(n.OUTLINE_CLASS),i===l.CHILD||i===l.MOVE){const e=5*T;w.style.backgroundImage=(b=m?y.component:y.primary,S=Math.max(1,Math.round(e)),I=Math.max(3,Math.round(3*e)),`url("data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' stroke='${b.replace("#","%23")}' stroke-width='${S}' stroke-dasharray='1%2c ${I}' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e")`)}else{const e=i===l.SECONDARY?.5*T:1*T;e>=.5&&(w.style.outline=`${e}px solid ${i===l.SECONDARY?y.secondary:m?y.component:y.primary}`),w.style.border=`${e>=.5?e:2*e}px solid ${i===l.SECONDARY?y.secondary:m?y.component:y.primary}`}var b,S,I;switch(w.style.position="fixed",w.style.pointerEvents="none",i){case l.PRIMARY:w.style.zIndex="2000000002";break;case l.SECONDARY:w.style.zIndex="2000000001";break;case l.CHILD:w.style.zIndex="2000000000";break;case l.MOVE:w.style.zIndex="2000000003"}w.style.boxSizing="border-box",w.style.left=v+"px",w.style.top=E+"px",w.style.width=h+"px",w.style.height=d+"px",w.style.cursor="default !important";const C=Math.min(2,T);if(i===l.PRIMARY&&f){const e=document.createElement("div");w.appendChild(e),e.classList.add(n.OUTLINE_CLASS),e.innerHTML=`${Math.round(h)} x ${Math.round(d)}`,e.style.color="white",e.style.backgroundColor=m?y.component:y.primary,e.style.padding="4px 12px 4px 12px",e.style.height="38px",e.style.borderRadius="8px",e.style.position="absolute",e.style.left=`calc(${h}px / 2)`,e.style.fontSize="20px",e.style.whiteSpace="nowrap";const t=-Math.max(22,45+(52*C-52)/2);e.style.bottom=`${t}px`,e.style.transform=`scale(${C}) translateX(${-50/C}%)`}if(f&&p){const e=document.createElement("div");w.appendChild(e),e.style.display="flex",e.style.width=h/C+"px",e.style.justifyContent="space-between",e.style.flexDirection="row",e.style.gap="4px",e.style.position="absolute",e.style.left="0px",e.style.transform=`scale(${C}) translateX(${50-50/C}%) translateY(${-70-50/C}%)`;const r=document.createElement("div");if(e.appendChild(r),r.classList.add(n.OUTLINE_CLASS),r.innerHTML=p?m?(N=p).charAt(0).toUpperCase()+N.slice(1):p.toLowerCase():"",r.style.color="white",r.style.backgroundColor=m?y.component:y.primary,r.style.padding="4px 12px 4px 12px",r.style.height="38px",r.style.borderRadius="8px",r.style.fontSize="20px",i===l.PRIMARY){const r=(0,n.getNodeForElementKey)(g),i=s.TempoElement.fromKey(g||"");if(r&&(0,o.hasTextContents)(r)&&!(0,o.canEditText)(i)){const r=((e,t,r)=>{const i=document.createElement("div"),s=document.createElement("div");s.innerText="Edit Dynamic Text",s.classList.add(n.EDIT_TEXT_BUTTON),s.classList.add(n.OUTLINE_CLASS);const o=document.createElement("div");return o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pencil"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/><path d="m15 5 4 4"/></svg>',o.style.width="22px",o.style.height="22px",o.classList.add(n.EDIT_TEXT_BUTTON),o.classList.add(n.OUTLINE_CLASS),i.appendChild(o),i.appendChild(s),i.classList.add(n.OUTLINE_CLASS),i.classList.add(n.EDIT_TEXT_BUTTON),i.style.color="white",i.style.cursor="pointer",i.style.backgroundColor=t,i.style.padding="4px 12px 4px 12px",i.style.borderRadius="8px",i.style.fontSize="20px",i.style.pointerEvents="auto",i.style.display="flex",i.style.flexDirection="row",i.style.alignItems="center",i.style.justifyContent="center",i.style.gap="8px",i.addEventListener("pointerdown",t=>{t.preventDefault(),t.stopPropagation(),e.postMessage({id:a.FIXED_IFRAME_MESSAGE_IDS.EDIT_DYNAMIC_TEXT,elementKey:r})}),i.addEventListener("pointerup",e=>{e.preventDefault(),e.stopPropagation()}),i})(t,m?y.component:y.primary,g);e.appendChild(r)}}}var N;return w};e.clearAllOutlines=()=>{(0,i.default)(`.${n.OUTLINE_CLASS}`).remove()};e.updateOutlines=(t,o)=>{(0,e.clearAllOutlines)();if(!!(0,r.getSessionStorageItem)("driveModeEnabled",o))return;const a=(0,r.getMemoryStorageItem)(r.HOVERED_ELEMENT_KEY),c=(0,r.getMemoryStorageItem)(r.SELECTED_ELEMENT_KEY),u=(0,r.getMemoryStorageItem)(r.MULTI_SELECTED_ELEMENT_KEYS),h=s.TempoElement.fromKey(c),d=document.getElementsByTagName("body")[0],f=document.createDocumentFragment(),p=(0,r.getMemoryStorageItem)(r.ELEMENT_KEY_TO_NAV_NODE)||{},m={},g=(0,i.default)("body"),y=(0,i.default)(`.${n.TEMPO_INSTANT_DIV_DRAW_CLASS}`),v=(0,i.default)(`*[${n.TEMPO_OUTLINE_UNTIL_REFESH}=true]`),E={},_=e=>{var t,r;if(void 0!==m[e])return m[e];const s=p[e];let o=null;if(null==s?void 0:s.pageBoundingBox)o={left:s.pageBoundingBox.pageX,top:s.pageBoundingBox.pageY,width:s.pageBoundingBox.width,height:s.pageBoundingBox.height};else{const s=null===(t=(e=>{if(!E[e]){const t=(0,n.getNodeForElementKey)(e);t&&(E[e]=(0,i.default)(t))}return E[e]})(e))||void 0===t?void 0:t.get(0),a=null===(r=null==s?void 0:s.getBoundingClientRect)||void 0===r?void 0:r.call(s);a&&(o={left:a.left,top:a.top,width:a.width,height:a.height})}return m[e]=o,o},T=(n,i,s,o)=>{var a,c;const u=p[n];if(!u)return;const h=null==u?void 0:u.name,d=_(n);if(d){f.appendChild((0,e.getOutlineElement)(t,s?l.CHILD:l.PRIMARY,d.left,d.top,d.width,d.height,i,h,null==u?void 0:u.isComponent,n));const o=(0,r.getMemoryStorageItem)("mouseDragContext"),a=(0,r.getMemoryStorageItem)("mousePos");i&&(null==o?void 0:o.dragging)&&a&&f.appendChild((0,e.getOutlineElement)(t,l.MOVE,a.pageX-d.width/2+o.offsetX,a.pageY-d.height/2+o.offsetY,d.width,d.height,void 0,void 0,null==u?void 0:u.isComponent,n))}o&&(null===(c=null===(a=null==u?void 0:u.children)||void 0===a?void 0:a.forEach)||void 0===c||c.call(a,e=>{T(e.tempoElement.getKey(),!1,!0,!1)}))};if(a&&T(a,!1,!1,!0),null==u?void 0:u.length){let n=1/0,r=1/0,i=-1/0,s=-1/0,o=!1;for(const e of u){const t=_(e);if(t){o=!0;const e=t.left+t.width,a=t.top+t.height;n=Math.min(n,t.left),r=Math.min(r,t.top),i=Math.max(i,e),s=Math.max(s,a)}}if(o){const o={left:n,top:r,width:i-n,height:s-r};f.appendChild((0,e.getOutlineElement)(t,l.PRIMARY,o.left,o.top,o.width,o.height,!0,`${u.length} Elements`,!1))}u.forEach(e=>{T(e,!1,!1,!1)})}else c&&T(c,!0,!1,!1);if(y.each((n,r)=>{const i=r.getBoundingClientRect();f.appendChild((0,e.getOutlineElement)(t,l.PRIMARY,i.left,i.top,i.width,i.height))}),v.each((n,r)=>{const i=r.getBoundingClientRect();f.appendChild((0,e.getOutlineElement)(t,l.PRIMARY,i.left,i.top,i.width,i.height))}),null==h?void 0:h.codebaseId){let r=g.find(`.${null==h?void 0:h.codebaseId}`);if(c){const e=(0,n.getNodeForElementKey)(c);e&&(r=r.not(e))}if(a){const e=(0,n.getNodeForElementKey)(a);e&&(r=r.not(e))}r.each((n,r)=>{const i=r.getBoundingClientRect();f.appendChild((0,e.getOutlineElement)(t,l.SECONDARY,i.left,i.top,i.width,i.height))})}d.appendChild(f)};e.isNodeOutline=e=>{if(!(null==e?void 0:e.classList))return!1;let t=!1;return e.classList.forEach(e=>{e===n.OUTLINE_CLASS&&(t=!0)}),t}}(ny)),ny}function oy(){return Xg||(Xg=1,function(e){var t=ty&&ty.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.runNavTreeBuiltCallbacks=e.addNavTreeBuiltCallback=e.buildNavForNodeNonBlocking=e.getNavNodeForVirtualComponent=e.ExtractedPropType=e.SKIP_ROOT_CODEBASE_ID=e.EMPTY_TREE_CODEBASE_ID=e.TOP_LEVEL_PARENT_COMPONENT_TO_SKIP=e.UNKNOWN_PARENT_COMPONENT=void 0;const n=uy(),r=sy(),i=t(vm()),s=Wg(),o=wm(),a=am();var l,c;e.UNKNOWN_PARENT_COMPONENT="UnknownComponent",e.TOP_LEVEL_PARENT_COMPONENT_TO_SKIP="TOP_LEVEL_PARENT_COMPONENT_TO_SKIP",e.EMPTY_TREE_CODEBASE_ID="EMPTY-TREE",e.SKIP_ROOT_CODEBASE_ID="SKIP-ROOT",(c=l||(e.ExtractedPropType=l={})).LITERAL="LITERAL",c.FUNCTION="FUNCTION",c.JSON_OBJECT="JSON_OBJECT";const u=e=>{if(!(null==e?void 0:e.memoizedProps))return{};const t={};return Object.keys(e.memoizedProps).forEach(r=>{if("children"===r)return;if(n.KNOWN_ATTRIBUTES.has(r.toLowerCase()))return;let i=e.memoizedProps[r];if("className"===r&&"string"==typeof i&&(i=(0,n.getAllUnknownClasesFromList)(i.split(" ")).join(" ")),"function"==typeof i)t[r]={value:r,type:l.FUNCTION};else if("object"==typeof i)try{t[r]={value:JSON.stringify(i),type:l.JSON_OBJECT}}catch(s){}else t[r]={value:i,type:l.LITERAL}}),t},h=e=>{var t;if(!(null===(t=null==e?void 0:e.memoizedProps)||void 0===t?void 0:t.children))return[];const n=[];return Array.from(e.memoizedProps.children||[]).forEach((e,t)=>{"object"!=typeof e&&n.push({index:t,value:e})}),n};function d(e){const t={"!":"_exclamation_","@":"_at_","#":"_hash_",$:"_dollar_","%":"_percent_","^":"_caret_","&":"_and_","*":"_asterisk_","(":"_openParen_",")":"_closeParen_","+":"_plus_","=":"_equals_","[":"_openBracket_","]":"_closeBracket_","{":"_openBrace_","}":"_closeBrace_","|":"_pipe_",";":"_semicolon_",":":"_colon_",",":"_comma_",".":"_period_","<":"_lessThan_",">":"_greaterThan_","/":"_slash_","?":"_question_","\\":"_backslash_"," ":"_space_"};return Object.keys(t).forEach(n=>{const r=new RegExp("\\"+n,"g");e=e.replace(r,t[n])}),(e=e.replace(/^[0-9-]/,"_startNumOrHyphen_")).replace(/[^a-zA-Z0-9_-]/g,"_")}e.getNavNodeForVirtualComponent=(e,t,n,r,i,s,a)=>{const l={parent:e,children:[],classList:[],directlySetClassList:[],name:"",tempoElement:o.TempoElement.empty()};return l.name=t,l.isComponent=!0,l.tempoElement=new o.TempoElement(n,s,r),l.props=u(a),l.literalChildren=h(a),Object.keys(i).forEach(e=>{var t;l.scope||(null===(t=i[e].codebaseIds)||void 0===t?void 0:t.indexOf(n))>-1&&(l.scope=i[e])}),l};e.buildNavForNodeNonBlocking=(e,t)=>{(0,n.clearNodeForElementKey)(),(0,n.clearElementKeyForUniquePath)();const r=[{params:e}];let i=null;requestAnimationFrame(function n(){var s;const o=performance.now();for(;r.length>0&&performance.now()-o<10;){const e=r.shift();if(!e)continue;const{params:t}=e,n=f(t);(null===(s=null==n?void 0:n.callsToAddToQueue)||void 0===s?void 0:s.length)&&r.push(...n.callsToAddToQueue),!i&&(null==n?void 0:n.result)&&(i=null==n?void 0:n.result)}r.length>0?requestAnimationFrame(n):t(i?p(i,e.elementKeyToNavNode,e.treeElements,e.storyboardId):null)})};const f=({storyboardId:t,parent:s,node:l,uniquePathBase:c,uniquePathAddon:f,scopeLookup:p,treeElements:m,knownComponentNames:g,knownComponentInstanceNames:y,elementKeyToLookupList:v,elementKeyToNavNode:E,domUniquePath:_})=>{var T,w,b,S,I,C,N,A,x;if((0,r.isNodeOutline)(l))return null;if((0,n.isSkipNavTreeNode)(l))return null;if(["noscript","script"].includes(null===(T=null==l?void 0:l.tagName)||void 0===T?void 0:T.toLowerCase()))return null;const O=(0,n.getCodebaseIdFromNode)(l);if("iframe"===(null===(w=null==l?void 0:l.tagName)||void 0===w?void 0:w.toLowerCase())&&!O)return l.remove(),null;const R=(0,a.findReactInstance)(l),D=l.getBoundingClientRect(),{top:L,left:M}=(0,i.default)(l).offset()||{top:0,left:0};let P=s,k=c;const U=[];let j,F;if(R&&(null==s?void 0:s.reactFiberNode)){let n=R.return,r=[];for(;n&&n!==s.reactFiberNode;){const e=(null===(b=null==n?void 0:n._debugSource)||void 0===b?void 0:b.fileName)&&!(null===(I=null===(S=null==n?void 0:n._debugSource)||void 0===S?void 0:S.fileName)||void 0===I?void 0:I.includes("node_modules")),t=(0,a.getElementNameString)(n);((null===(C=n.memoizedProps)||void 0===C?void 0:C.tempoelementid)||(null===(N=n.memoizedProps)||void 0===N?void 0:N["data-testid"]))&&((null==g?void 0:g.has(t))||(null==y?void 0:y.has(t))||e)&&r.push(n),n=n.return}if(n&&r.length){let n=s;Array.from(r).reverse().forEach(r=>{var i,s,o,l,c,u,h,f;const g=(0,a.getElementNameString)(r);if("Symbol(react.forward_ref)"===(null===(s=null===(i=null==r?void 0:r.elementType)||void 0===i?void 0:i.$$typeof)||void 0===s?void 0:s.toString())){if(!j&&!F){F=(null===(o=r.memoizedProps)||void 0===o?void 0:o.tempoelementid)||(null===(l=r.memoizedProps)||void 0===l?void 0:l["data-testid"]);const e=m[F||""];j="component-instance"===(null==e?void 0:e.type)?e.componentName:g}return}const y=n?null===(c=n.children)||void 0===c?void 0:c.find(e=>e.reactFiberNode===r):null;if(y)if(n=y,n.tempoElement&&U.push(n.tempoElement.getKey()),y.pageBoundingBox){const e=Math.max(y.pageBoundingBox.pageX+y.pageBoundingBox.width,M+D.width),t=Math.min(y.pageBoundingBox.pageX,D.left),n=Math.min(y.pageBoundingBox.pageY,D.top),r=Math.max(y.pageBoundingBox.pageY+y.pageBoundingBox.height,L+D.height);y.pageBoundingBox.pageX=t,y.pageBoundingBox.pageY=n,y.pageBoundingBox.width=e-t,y.pageBoundingBox.height=r-n}else y.pageBoundingBox={pageX:M,pageY:L,width:D.width,height:D.height};else{let i;j?(i=F,j=void 0,F=void 0):i=(null===(u=r.memoizedProps)||void 0===u?void 0:u.tempoelementid)||(null===(h=r.memoizedProps)||void 0===h?void 0:h["data-testid"]),k=d(`${k}-${(null===(f=null==n?void 0:n.children)||void 0===f?void 0:f.length)||0}`);const s=(0,e.getNavNodeForVirtualComponent)(n,g,i,k,p,t,r);n.children.push(s),n=s,U.push(s.tempoElement.getKey()),E[s.tempoElement.getKey()]=s,s.pageBoundingBox={pageX:M,pageY:L,width:D.width,height:D.height}}}),P=n}}const V={parent:P,children:[],classList:(0,n.getAllUnknownClasses)(l),directlySetClassList:[],name:"",tempoElement:o.TempoElement.empty()};null===(A=null==P?void 0:P.children)||void 0===A||A.push(V),V.name=j||l.tagName,V.elementTagName=l.tagName,V.isComponent=Boolean(F);const K=d(`${k}${f}`),B=F||O||void 0;V.tempoElement=new o.TempoElement(B,t,K);const H=V.tempoElement.getKey();U.forEach(e=>{v[e]?v[e].push(H):v[e]=[H]}),v[H]=[H],(0,n.setNodeForElementKey)(H,l),(0,n.setElementKeyForUniquePath)(_,H);const $=m[V.tempoElement.codebaseId];if($){const e=new Set((null==$?void 0:$.removableClasses)||[]);V.directlySetClassList=null===(x=V.classList)||void 0===x?void 0:x.filter(t=>e.has(t))}V.reactFiberNode=R,V.props=u(R),V.literalChildren=h(R),V.pageBoundingBox={pageX:M,pageY:L,width:D.width,height:D.height},V.tempoElement.codebaseId&&Object.keys(p).forEach(e=>{var t;V.scope||(null===(t=p[e].codebaseIds)||void 0===t?void 0:t.indexOf(V.tempoElement.codebaseId))>-1&&(V.scope=p[e])});const q=[];return l.children&&"svg"!==l.tagName&&Array.from(l.children).forEach((e,n)=>{q.push({params:{storyboardId:t,parent:V,node:e,uniquePathBase:K,uniquePathAddon:`-${n}`,scopeLookup:p,treeElements:m,knownComponentNames:g,knownComponentInstanceNames:y,elementKeyToLookupList:v,elementKeyToNavNode:E,domUniquePath:`${_}-${n}`}})}),E[H]=V,{result:V,callsToAddToQueue:q}},p=(t,n,r,i)=>{let a=t;const l=(0,s.getMemoryStorageItem)(s.STORYBOARD_TYPE)||"APPLICATION",c=(0,s.getMemoryStorageItem)(s.SAVED_STORYBOARD_COMPONENT_FILENAME),u=(0,s.getMemoryStorageItem)(s.ORIGINAL_STORYBOARD_URL),h=u&&!window.location.href.includes(u),d=e=>{var t,n,i,s,o,a;const u=null===(t=r[e.tempoElement.codebaseId])||void 0===t?void 0:t.filename;if("STORY"===l&&u&&!u.includes("_app")&&!u.includes("_document"))return!0;if("BODY"===(null===(n=e.parent)||void 0===n?void 0:n.name)){let t=null===(i=e.reactFiberNode)||void 0===i?void 0:i.return;for(;t;){const e=(null===(s=null==t?void 0:t.props)||void 0===s?void 0:s.tempoelementid)||(null===(o=null==t?void 0:t.props)||void 0===o?void 0:o["data-testid"])||"";if(e){const t=null===(a=r[e])||void 0===a?void 0:a.filename;if(Boolean(null==t?void 0:t.includes("tempobook/storyboards"))||Boolean(t&&t===c))return!0}t=null==t?void 0:t.return}}return Boolean(null==u?void 0:u.includes("tempobook/storyboards"))||Boolean(u&&u===c)},f=(t,r)=>{var s,c;for(let e=t.children.length-1;e>=0;e--)f(t.children[e],r||d(t));const u="APPLICATION"!==l&&!h&&!r&&!d(t);if(!(null===(s=t.tempoElement.codebaseId)||void 0===s?void 0:s.startsWith("tempo-"))||u)if(t.parent){const e=t.children,r=null===(c=t.parent.children)||void 0===c?void 0:c.indexOf(t);t.parent.children.splice(r,1,...e),e.forEach(e=>{e.parent=t.parent}),delete n[t.tempoElement.getKey()]}else 1===t.children.length?(a=t.children[0],delete n[t.tempoElement.getKey()],a.parent=void 0):0===t.children.length?(a={children:[],tempoElement:new o.TempoElement(e.EMPTY_TREE_CODEBASE_ID,i,"1"),name:""},delete n[t.tempoElement.getKey()]):(t.tempoElement=new o.TempoElement(e.SKIP_ROOT_CODEBASE_ID,t.tempoElement.storyboardId,t.tempoElement.uniquePath),delete n[t.tempoElement.getKey()])};f(t,!1);const p=(t,n)=>{delete t.reactFiberNode,t.level=n,t.children.forEach(r=>{p(r,t.tempoElement.codebaseId===e.SKIP_ROOT_CODEBASE_ID?n:n+1)})};return p(a,0),a};e.addNavTreeBuiltCallback=e=>{const{callbackFn:t,state:n}=e,r=(0,s.getMemoryStorageItem)(s.NAV_TREE_CALLBACKS)||[];n.multiSelectedElementKeys=(n.multiSelectedElementKeys||[]).sort();const i=r.find(e=>e.callbackFn.toString()===t.toString()&&e.state.selectedElementKey===n.selectedElementKey&&e.state.multiSelectedElementKeys.join(",")===n.multiSelectedElementKeys.join(","));i||(r.push(e),(0,s.setMemoryStorageItem)(s.NAV_TREE_CALLBACKS,r))};e.runNavTreeBuiltCallbacks=()=>{const e=(0,s.getMemoryStorageItem)(s.NAV_TREE_CALLBACKS)||[];if(!e.length)return;const t=(0,s.getMemoryStorageItem)(s.SELECTED_ELEMENT_KEY),n=((0,s.getMemoryStorageItem)(s.MULTI_SELECTED_ELEMENT_KEYS)||[]).sort();e.forEach(e=>{const{callbackFn:r,state:i}=e;i.selectedElementKey===t&&i.multiSelectedElementKeys.join(",")===n.join(",")&&r()}),(0,s.removeMemoryStorageItem)(s.NAV_TREE_CALLBACKS)}}(ty)),ty}function ay(){return Qg||(Qg=1,function(e){var t=wg&&wg.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.ruleMatchesElement=e.getElementClassList=e.getCssEvals=e.cssEval=e.processRulesForSelectedElement=e.setModifiersForSelectedElement=e.parse=void 0;const n=t(vm()),r=uy(),i=ly(),s=_g(),o=yg(),a=Sg,l=wm(),c=$g(),u=Wg(),h=oy();e.parse=(0,c.createParser)({syntax:{baseSyntax:"latest",pseudoClasses:{unknown:"accept",definitions:{Selector:["has"]}},pseudoElements:{unknown:"accept"},combinators:[">","+","~"],attributes:{operators:["^=","$=","*=","~="]},classNames:!0,namespace:{wildcard:!0},tag:{wildcard:!0}},substitutes:!0});const d=(e,t,n,r)=>{try{e.insertRule?e.insertRule(`${t} { ${n} }`,r):e.addRule(t,n,r)}catch(i){}},f=t=>{let n=[];if(t instanceof CSSMediaRule)for(let r=0;r<t.cssRules.length;r++){const i=t.cssRules[r];if(t.media.mediaText.includes("min-width")&&i instanceof CSSStyleRule){const t=(0,e.parse)(i.selectorText);if("Selector"!==t.type)continue;const r=t.rules[0].items.filter(e=>"ClassName"===e.type).map(e=>e.name);if(1!==r.length)continue;n.push({class:r[0],pseudos:p(r[0]),cssText:i.style.cssText,style:i.style})}}return n},p=e=>{const t=new RegExp("(?:\\b|(?<=[:.]))(sm|md|lg|xl|2xl)\\\\?:[\\w-]+","g"),n=(e.match(t)||[]).map(e=>{const t=e.indexOf(e.includes("\\:")?"\\:":":");return e.substring(0,t)});return[...new Set(n)]},m=e=>{if("Selector"!==e.type)return;const t=e.rules[0],n=t.items.filter(e=>"ClassName"===e.type).map(e=>e.name);if(0===n.length||"dark"!==n[0])return;const r=t.nestedRule;if(!r)return;let i=[];const s=r.items.filter(e=>"ClassName"===e.type).map(e=>e.name);return s.length>1?void 0:(i.push({class:s[0],pseudos:["dark",...r.items.filter(e=>"PseudoClass"===e.type).map(e=>e.name)]}),i)};e.setModifiersForSelectedElement=(e,t,n)=>{document.querySelectorAll('[class*="tempo-force-"]').forEach(e=>{Array.from(e.classList).forEach(t=>{t.startsWith("tempo-force-")&&e.classList.remove(t)})});const i=l.TempoElement.fromKey(n);if(i.isEmpty())return;const s=(0,r.getNodeForElementKey)(i.getKey());s&&t.forEach(e=>{s.classList.add("tempo-force-"+e)})};e.processRulesForSelectedElement=(t,n,c)=>{var p,g,y,v,E;if(!n)return;const _=l.TempoElement.fromKey(c);if(_.isEmpty())return;const T=(0,r.getNodeForElementKey)(_.getKey()),w=(0,u.getMemoryStorageItem)(u.MULTI_SELECTED_ELEMENT_KEYS)||[];if(!T)return void(0,h.addNavTreeBuiltCallback)({callbackFn:()=>{(0,e.processRulesForSelectedElement)(t,n,c)},state:{selectedElementKey:c,multiSelectedElementKeys:w}});const b=[],S=new Set,I=new Set,C={filename:"",selector:"element.style",source:{},styles:{},applied:!0,codebaseId:"element.style",removable:!1,allowChanges:!0};for(let e=0;e<(null===(p=null==T?void 0:T.style)||void 0===p?void 0:p.length);e++){const t=T.style[e];C.styles[t]=T.style[t]}b.push(C);let N=!1;const A=[],x=[];Object.keys(n).forEach(e=>{var t;const r=n[e];if(I.add(r.selector),!(0,i.isCssSelectorValid)(r.selector))return;if((0,i.getAllClassesFromSelector)(r.selector).forEach(e=>{S.add(e)}),(0,i.isCssSelectorValid)(r.selector)&&(null==T?void 0:T.matches(r.selector)))return void A.push(Object.assign(Object.assign({},r),{applied:!0,allowChanges:!0,removable:(0,i.canRemoveCssClassFromElement)(r.selector,T)}));let o=0,a=null==T?void 0:T.parentElement;const l={};for(;a;){if(!N){const e={};for(let n=0;n<(null===(t=null==a?void 0:a.style)||void 0===t?void 0:t.length);n++){const t=a.style[n];s.INHERITABLE_CSS_PROPS[t]&&(e[t]=a.style[t])}0!==Object.keys(e).length&&x.push({filename:"",selector:`parentElement${o}.style`,inherited:!0,source:{},styles:e,applied:!0,codebaseId:`parentElement${o}.style`,removable:!1,allowChanges:!1})}!(0,i.isCssSelectorValid)(r.selector)||(null==a?void 0:a.matches(r.selector))?(Object.keys((null==r?void 0:r.styles)||{}).forEach(e=>{s.INHERITABLE_CSS_PROPS[e]&&null!==l[e]&&(l[e]=r.styles[e])}),a=a.parentElement,o+=1):a=a.parentElement}N=!0,0!==Object.keys(l).length&&x.push(Object.assign(Object.assign({},r),{inherited:!0,styles:l,applied:!0,removable:!1,allowChanges:!1})),x.push(Object.assign(Object.assign({},r),{applied:!1,allowChanges:!1,eligibleToApply:(0,i.canApplyCssRuleToElement)(r.selector,T)}))});const O=document.styleSheets[0];for(let r=0;r<document.styleSheets.length;r+=1){const t=document.styleSheets[r];let n=null;try{n=t.cssRules}catch(D){try{n=t.rules}catch(L){}}if(n)for(let r=0;r<n.length;r+=1){const t=n[r],i=f(t);if(i.length>0)for(let e=0;e<i.length;e++){const t=i[e];if(!(null==T?void 0:T.matches("."+CSS.escape(t.class))))continue;const n={};for(let e=0;e<(null===(g=null==t?void 0:t.style)||void 0===g?void 0:g.length);e+=1){const r=null==t?void 0:t.style[e];n[r]=null==t?void 0:t.style[r]}const r={filename:void 0,selector:CSS.escape("."+t.class),classParsed:t.class,source:{},styles:n,applied:!0,modifiers:Object.assign({},t.pseudos.reduce((e,t)=>(e[t]=!0,e),{})),codebaseId:`${t.class} ${(0,o.v4)().toString()}`,removable:!1,allowChanges:!1,cssText:t.cssText};A.push(r)}if(!t.selectorText)continue;if(I.has(t.selectorText))continue;const s=(0,e.parse)(t.selectorText);if("Selector"!==s.type)continue;const a=s.rules[0];if(!a)continue;const l=a.items.filter(e=>"ClassName"===e.type).map(e=>e.name),c=a.items.filter(e=>"PseudoClass"===e.type);if(0===l.length&&1===c.length&&"is"===c[0].name){const e=c[0];if(e&&"Selector"===(null===(y=e.argument)||void 0===y?void 0:y.type)){const n=m(e.argument);if(n)for(const e of n){if(!(null==T?void 0:T.matches("."+CSS.escape(e.class))))continue;const n={};for(let e=0;e<(null===(v=null==t?void 0:t.style)||void 0===v?void 0:v.length);e+=1){const r=t.style[e];n[r]=t.style[r]}const r={filename:void 0,selector:CSS.escape("."+e.class),classParsed:e.class,source:{},styles:n,applied:!0,modifiers:Object.assign({},e.pseudos.reduce((e,t)=>(e[t]=!0,e),{})),codebaseId:`${t.selectorText} ${(0,o.v4)().toString()}`,removable:!1,allowChanges:!1,cssText:t.style.cssText};A.push(r)}}}if(0===l.length||l.length>1)continue;const u=l[0],h=a.items.filter(e=>"PseudoClass"===e.type).map(e=>e.name);try{if(null==T?void 0:T.matches("."+CSS.escape(u))){const e={};for(let n=0;n<(null===(E=null==t?void 0:t.style)||void 0===E?void 0:E.length);n+=1){const r=t.style[n];e[r]=t.style[r]}A.push({filename:void 0,selector:t.selectorText,classParsed:u,source:{},styles:e,applied:!0,modifiers:Object.assign({},h.reduce((e,t)=>(e[t.name]=!0,e),{})),codebaseId:`${t.selectorText} ${(0,o.v4)().toString()}`,removable:!1,allowChanges:!1,cssText:t.style.cssText})}}catch(D){}}}for(let e=0;e<A.length;e++){const t=A[e];if(!t.modifiers)continue;const n=Object.keys(t.modifiers);if(n.length<1)continue;const r=t.classParsed;if(!r)continue;const i=t.cssText;if(!i)continue;const s=n.map(e=>".tempo-force-"+e).join(""),o="."+CSS.escape(r)+s;d(O,o,i,O.cssRules.length)}const R=b.concat(A.sort((e,t)=>{try{return-(0,a.compare)(e.selector,t.selector)}catch(n){let r=!0;try{(0,a.compare)(e.selector,"body")}catch(D){r=!1}let i=!0;try{(0,a.compare)(t.selector,"body")}catch(D){i=!1}return r&&!i?-1:!r&&i?1:0}})).concat(x);t.postMessage({id:s.FIXED_IFRAME_MESSAGE_IDS.PROCESSED_CSS_RULES_FOR_ELEMENT,processedCssRules:R})};e.cssEval=(e,t)=>window.getComputedStyle(e,null).getPropertyValue(t);e.getCssEvals=(t,i)=>{var o;let a={};const c=l.TempoElement.fromKey(i);if(c.isEmpty())return;const u=(0,r.getNodeForElementKey)(c.getKey());if(!u)return;s.CSS_VALUES_TO_COLLECT.forEach(t=>{a[t]=(0,e.cssEval)(u,t)});const h={};if(u.parentElement){s.CSS_VALUES_TO_COLLECT_FOR_PARENT.forEach(t=>{h[t]=(0,e.cssEval)(u.parentElement,t)});let t=(null===(o=(0,n.default)((0,r.getNodeForElementKey)(c.getKey())))||void 0===o?void 0:o.closest(".dark").length)>0;h.darkEnabledInParent=t}a.parent=h,t.postMessage({id:s.FIXED_IFRAME_MESSAGE_IDS.CSS_EVALS_FOR_ELEMENT,cssEvals:a})};e.getElementClassList=(e,t)=>{const n=l.TempoElement.fromKey(t);if(n.isEmpty())return;const i=(0,r.getNodeForElementKey)(n.getKey());i&&e.postMessage({id:s.FIXED_IFRAME_MESSAGE_IDS.ELEMENT_CLASS_LIST,classList:Array.from(i.classList)})};e.ruleMatchesElement=(e,t,n,i)=>{if(!n)return;const s=l.TempoElement.fromKey(i);if(s.isEmpty())return;const o=(0,r.getNodeForElementKey)(s.getKey());o&&e.postMessage({id:t,matches:null==o?void 0:o.matches(n)})}}(wg)),wg}function ly(){return Jg||(Jg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.camelToSnakeCase=e.isCssSelectorValid=e.getAllClassesFromSelector=e.canRemoveCssClassFromElement=e.canApplyCssRuleToElement=void 0;const t=ay();e.canApplyCssRuleToElement=(n,r)=>{var i;try{if(!r)return!1;if(!(0,e.isCssSelectorValid)(n))return!1;if(r.matches(n))return!1;let s=(0,t.parse)(n);for(;s.nestedRule;)s=s.nestedRule;const o=[],a=new Set(r.classList);null===(i=s.items)||void 0===i||i.forEach(e=>{if("ClassName"===e.type){const t=e.name;a.has(t)||(r.classList.add(t),o.push(t))}});const l=r.matches(n);return o.forEach(e=>{r.classList.remove(e)}),l}catch(s){return!1}};e.canRemoveCssClassFromElement=(n,r)=>{var i;try{if(!(0,e.isCssSelectorValid)(n))return!1;if(!r.matches(n))return!1;let s=(0,t.parse)(n);for(;s.nestedRule;)s=s.nestedRule;const o=[],a=new Set(r.classList);null===(i=s.items)||void 0===i||i.forEach(e=>{if("ClassName"===e.type){const t=e.name;if(!a.has(t))return;r.classList.remove(t),o.push(t)}});const l=!r.matches(n);return o.forEach(e=>{r.classList.add(e)}),l}catch(s){return!1}};e.getAllClassesFromSelector=n=>{try{if(!(0,e.isCssSelectorValid)(n))return new Set;let r=(0,t.parse)(n);const i=new Set;for(;r;){(r.items||[]).forEach(e=>{"ClassName"===e.type&&i.add(e.name)}),r=r.nestedRule}return i}catch(r){return new Set}};e.isCssSelectorValid=e=>{try{n=e,document.createDocumentFragment().querySelector(n);(0,t.parse)(e);return!0}catch(r){return!1}var n};e.camelToSnakeCase=e=>e?e.charAt(0).toLowerCase()+e.substring(1).replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`):e}(Tg)),Tg}function cy(){return Zg||(Zg=1,function(e){var t=mm&&mm.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.updateCodebaseIds=e.applyChangeItemToDocument=e.getFullHtmlWithElement=e.resetIntermediateClassesForSliderInstantUpdate=e.TEMPORARY_STYLING_CLASS_NAME=e.ADD_CLASS_INSTANT_UPDATE_QUEUE=e.ADD_JSX_PREFIX=e.DUPLICATE_PLACEHOLDER_PREFIX=e.WRAP_IN_DIV_PLACEHOLDER_CODEBASE_ID=void 0;const n=t(vm()),r=uy(),i=(pg||(pg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reconstructChangeLedgerClass=e.UnknownChange=e.UpdateClassesChange=e.RedoChange=e.UndoChange=e.EditTextChange=e.RemoveClassChange=e.AddClassChange=e.ChangeTagChange=e.DuplicateChange=e.WrapDivChange=e.ChangePropChange=e.RemoveJsxChange=e.MoveJsxChange=e.AddJsxChange=e.StylingChange=e.ChangeLedgerItem=e.CHANGE_TYPES_WITH_INSTANT_UNDO=e.ChangeType=e.StylingFramework=e.DUPLICATE_PLACEHOLDER_PREFIX=e.WRAP_IN_DIV_PLACEHOLDER_CODEBASE_ID=void 0;const t=wm(),n=yg();var r,i,s,o;e.WRAP_IN_DIV_PLACEHOLDER_CODEBASE_ID="tempo-wrap-in-div-placeholder",e.DUPLICATE_PLACEHOLDER_PREFIX="tempo-duplicate-placeholder-",(i=r||(e.StylingFramework=r={})).INLINE="Inline",i.CSS="CSS",i.TAILWIND="Tailwind",(o=s||(e.ChangeType=s={})).STYLING="STYLING",o.ADD_JSX="ADD_JSX",o.MOVE_JSX="MOVE_JSX",o.REMOVE_JSX="REMOVE_JSX",o.CHANGE_PROP="CHANGE_PROP",o.ADD_CLASS="ADD_CLASS",o.REMOVE_CLASS="REMOVE_CLASS",o.UPDATE_CLASSES="UPDATE_CLASSES",o.EDIT_TEXT="EDIT_TEXT",o.WRAP_DIV="WRAP_DIV",o.CHANGE_TAG="CHANGE_TAG",o.DUPLICATE="DUPLICATE",o.UNDO="UNDO",o.REDO="REDO",o.UNKNOWN="UNKNOWN",e.CHANGE_TYPES_WITH_INSTANT_UNDO=[s.REMOVE_JSX,s.ADD_CLASS,s.STYLING,s.UPDATE_CLASSES];class a{constructor(e,t,r,i){this.prevIdToNewIdMap={},this.id=i||(0,n.v4)(),this.type=e,this.changeFields=r,this.changeName=t,this._consumed=!1,this._failed=!1,this._instantUpdateSent=!1,this._instantUpdateFinished=!1,this._instantUpdateSuccessful=!1,this._sendInstantUpdate=!0,this.canInstantUpdateWhileFlushing=!1,this._apiPromise=new Promise((e,t)=>{this._resolveApi=e,this._rejectApi=t})}resolveApi(e){var t;null===(t=this._resolveApi)||void 0===t||t.call(this,e)}rejectApi(e){var t;this._apiRejectionAdded&&(null===(t=this._rejectApi)||void 0===t||t.call(this,e))}needsToSendInstantUpdate(){return!this._instantUpdateSent&&this._sendInstantUpdate}markInstantUpdateSent(){this._instantUpdateSent=!0}getInstantUpdateSent(){return this._instantUpdateSent}markInstantUpdateFinished(e,t){this._instantUpdateFinished=!0,this._instantUpdateSuccessful=t,this._instantUpdateData=e}getInstantUpdateData(){return this._instantUpdateData}wasInstantUpdateSuccessful(){return this._instantUpdateSuccessful}isInstantUpdateFinished(){return this._instantUpdateFinished}markProcessedSucceeded(){this._consumed=!0}markProcessedFailed(){this._failed=!0,this._consumed=!0}isFailed(){return this._failed}needToProcessChange(){return!this._consumed}onApiResolve(e){return this._apiPromise.then(e)}onApiReject(e){return this._apiRejectionAdded=!0,this._apiPromise.catch(e)}doNotSendInstantUpdate(){this._sendInstantUpdate=!1}clearSelectedElementsAfterInstantUpdate(){this.elementKeyToSelectAfterInstantUpdate=null,this.elementKeysToMultiselectAfterInstantUpdate=null}setSelectedElementsAfterInstantUpdate(e,t){this.elementKeyToSelectAfterInstantUpdate=e,this.elementKeysToMultiselectAfterInstantUpdate=t}clearSelectedElementsAfterUndoInstantUpdate(){this.elementKeyToSelectAfterUndoInstantUpdate=null,this.elementKeysToMultiselectAfterUndoInstantUpdate=null}setSelectedElementsAfterUndoInstantUpdate(e,t){this.elementKeyToSelectAfterUndoInstantUpdate=e,this.elementKeysToMultiselectAfterUndoInstantUpdate=t}getElementKeyToSelectAfterInstantUpdate(){return this.elementKeyToSelectAfterInstantUpdate}getElementKeysToMultiselectAfterInstantUpdate(){return this.elementKeysToMultiselectAfterInstantUpdate}getElementKeyToSelectAfterUndoInstantUpdate(){return this.elementKeyToSelectAfterUndoInstantUpdate}getElementKeysToMultiselectAfterUndoInstantUpdate(){return this.elementKeysToMultiselectAfterUndoInstantUpdate}applyAllCodebaseIdChanges(e){var n,r;const i=n=>{if(!n)return null;const r=t.TempoElement.fromKey(n),i=r.codebaseId,s=e[i];return s?new t.TempoElement(s,r.storyboardId,r.uniquePath).getKey():null};if(this.elementKeyToSelectAfterInstantUpdate){const e=i(this.elementKeyToSelectAfterInstantUpdate);this.elementKeyToSelectAfterInstantUpdate=e||this.elementKeyToSelectAfterInstantUpdate}if(this.elementKeysToMultiselectAfterInstantUpdate&&(this.elementKeysToMultiselectAfterInstantUpdate=null===(n=this.elementKeysToMultiselectAfterInstantUpdate)||void 0===n?void 0:n.map(e=>i(e)||e)),this.elementKeyToSelectAfterUndoInstantUpdate){const e=i(this.elementKeyToSelectAfterUndoInstantUpdate);this.elementKeyToSelectAfterUndoInstantUpdate=e||this.elementKeyToSelectAfterUndoInstantUpdate}this.elementKeysToMultiselectAfterUndoInstantUpdate&&(this.elementKeysToMultiselectAfterUndoInstantUpdate=null===(r=this.elementKeysToMultiselectAfterUndoInstantUpdate)||void 0===r?void 0:r.map(e=>i(e)||e)),this.applyCodebaseIdChanges(e)}}e.ChangeLedgerItem=a;class l extends a{constructor(e,t){super(s.STYLING,"Styling",e,t),this.canInstantUpdateWhileFlushing=!0}prepareApiRequest(e,t){const{codebaseId:n,stylingChanges:r,stylingFramework:i,modifiers:s,customProperties:o}=this.changeFields;return{urlPath:`canvases/${e}/parseAndMutate/mutate/styling`,body:{reactElement:t[n],styling:r,stylingFramework:i,modifiers:s,customProperties:o}}}applyCodebaseIdChanges(e){const t=e[this.changeFields.codebaseId];t&&(this.changeFields.codebaseId=t)}}e.StylingChange=l;class c extends a{constructor(e,t){super(s.ADD_JSX,"Add Element",e,t)}prepareApiRequest(e,t){const{codebaseIdToAddTo:n,beforeCodebaseId:r,afterCodebaseId:i,addCodebaseId:s,addNativeTag:o,fileContentsToSourceFrom:a,fileContentsSourceFilename:l,propsToSet:c,deletedStoryboardId:u,htmlForInstantUpdate:h,extraPathToContents:d}=this.changeFields,f={destinationElement:t[n],beforeElement:t[r||""],afterElement:t[i||""],newElement:{},canvasId:e,deletedStoryboardId:u,fileContentsToSourceFrom:a,fileContentsSourceFilename:l,extraFiles:d};s?f.newElement=Object.assign({},t[s]):o&&(f.newElement.type="native",f.newElement.nativeTag=o,f.newElement.componentName=o),c&&(f.newElement.propsToSet=c),Object.keys(f.newElement).length||delete f.newElement;const p=Boolean(h);return f.hasInstantUpdate=p,{urlPath:`canvases/${e}/parseAndMutate/mutate/addJsxElement`,body:f,successToastMessage:p?void 0:"Successfully added"}}applyCodebaseIdChanges(e){["codebaseIdToAddTo","beforeCodebaseId","afterCodebaseId","addCodebaseId"].forEach(t=>{const n=e[this.changeFields[t]];n&&(this.changeFields[t]=n)})}}e.AddJsxChange=c;class u extends a{constructor(e,t){super(s.MOVE_JSX,"Move Element",e,t)}prepareApiRequest(e,t){const{codebaseIdToMoveTo:n,codebaseIdToMove:r,afterCodebaseId:i,beforeCodebaseId:s,expectedCurrentParentCodebaseId:o}=this.changeFields;return{urlPath:`canvases/${e}/parseAndMutate/mutate/moveJsxElement`,body:{elementToMove:t[r],newContainerElement:t[n],afterElement:t[i||""],beforeElement:t[s||""],expectedCurrentParent:t[o||""]}}}applyCodebaseIdChanges(e){["codebaseIdToMoveTo","codebaseIdToMove","afterCodebaseId","beforeCodebaseId","expectedCurrentParentCodebaseId"].forEach(t=>{const n=e[this.changeFields[t]];n&&(this.changeFields[t]=n)})}}e.MoveJsxChange=u;class h extends a{constructor(e,t){e.codebaseIdsToRemove=Array.from(new Set(e.codebaseIdsToRemove)),super(s.REMOVE_JSX,"Delete Element",e,t)}prepareApiRequest(e,t){const{codebaseIdsToRemove:n}=this.changeFields;return{urlPath:`canvases/${e}/parseAndMutate/mutate/removeJsxElement`,body:{elementsToRemove:n.map(e=>t[e]).filter(e=>e)}}}applyCodebaseIdChanges(e){this.changeFields.codebaseIdsToRemove=this.changeFields.codebaseIdsToRemove.map(t=>e[t]||t)}}e.RemoveJsxChange=h;class d extends a{constructor(e,t){super(s.CHANGE_PROP,"Change Prop",e,t)}prepareApiRequest(e,t){const{codebaseIdToChange:n,propName:r,propValue:i}=this.changeFields;return{urlPath:`canvases/${e}/parseAndMutate/mutate/changePropValue`,body:{elementToModify:t[n],propName:r,propValue:i},successToastMessage:"Prop changed"}}applyCodebaseIdChanges(e){const t=e[this.changeFields.codebaseIdToChange];t&&(this.changeFields.codebaseIdToChange=t)}}e.ChangePropChange=d;class f extends a{constructor(e,t){e.codebaseIdsToWrap=Array.from(new Set(e.codebaseIdsToWrap)),super(s.WRAP_DIV,"Wrap In Div",e,t)}prepareApiRequest(e,t){const{codebaseIdsToWrap:n}=this.changeFields;return{urlPath:`canvases/${e}/parseAndMutate/mutate/wrapInDiv`,body:{reactElements:n.map(e=>t[e])}}}applyCodebaseIdChanges(e){this.changeFields.codebaseIdsToWrap=this.changeFields.codebaseIdsToWrap.map(t=>e[t]||t)}}e.WrapDivChange=f;class p extends a{constructor(e,t){e.codebaseIdsToDuplicate=Array.from(new Set(e.codebaseIdsToDuplicate)),super(s.DUPLICATE,"Duplicate",e,t)}prepareApiRequest(e,t){const{codebaseIdsToDuplicate:n}=this.changeFields;return{urlPath:`canvases/${e}/parseAndMutate/mutate/duplicate`,body:{reactElements:n.map(e=>t[e])}}}applyCodebaseIdChanges(e){this.changeFields.codebaseIdsToDuplicate=this.changeFields.codebaseIdsToDuplicate.map(t=>e[t]||t)}}e.DuplicateChange=p;class m extends a{constructor(e,t){super(s.CHANGE_TAG,"Change Tag Name",e,t)}prepareApiRequest(e,t){const{codebaseIdToChange:n,newTagName:r}=this.changeFields;return{urlPath:`canvases/${e}/parseAndMutate/mutate/changeElementTag`,body:{elementToModify:t[n],newTag:r}}}applyCodebaseIdChanges(e){const t=e[this.changeFields.codebaseIdToChange];t&&(this.changeFields.codebaseIdToChange=t)}}e.ChangeTagChange=m;class g extends a{constructor(e,t){super(s.ADD_CLASS,"Add Class",e,t),this.canInstantUpdateWhileFlushing=!0}prepareApiRequest(e,t){const{codebaseIdToAddClass:n,className:i,addingTailwindClass:s,modifiers:o,customProperties:a}=this.changeFields;return{urlPath:`canvases/${e}/parseAndMutate/mutate/addClass`,body:{reactElement:t[n],className:i,stylingFramework:s?r.TAILWIND:null,modifiers:o,customProperties:a}}}applyCodebaseIdChanges(e){const t=e[this.changeFields.codebaseIdToAddClass];t&&(this.changeFields.codebaseIdToAddClass=t)}}e.AddClassChange=g;class y extends a{constructor(e,t){super(s.REMOVE_CLASS,"Remove Class",e,t)}prepareApiRequest(e,t){const{codebaseIdToRemoveClass:n,className:r}=this.changeFields;return{urlPath:`canvases/${e}/parseAndMutate/mutate/removeClass`,body:{reactElement:t[n],className:r}}}applyCodebaseIdChanges(e){const t=e[this.changeFields.codebaseIdToRemoveClass];t&&(this.changeFields.codebaseIdToRemoveClass=t)}}e.RemoveClassChange=y;class v extends a{constructor(e,t){super(s.EDIT_TEXT,"Edit Text",e,t)}prepareApiRequest(e,t){const{codebaseIdToEditText:n,newText:r,oldText:i}=this.changeFields;return{urlPath:`canvases/${e}/parseAndMutate/mutate/editText`,body:{element:t[n],newText:r,oldText:i}}}applyCodebaseIdChanges(e){const t=e[this.changeFields.codebaseIdToEditText];t&&(this.changeFields.codebaseIdToEditText=t)}}e.EditTextChange=v;class E extends a{constructor(e,t){var n;super(s.UNDO,"Undo",e,t),(null===(n=e.changeToUndo)||void 0===n?void 0:n.canInstantUpdateWhileFlushing)&&(this.canInstantUpdateWhileFlushing=!0)}prepareApiRequest(e,t){return{urlPath:`canvases/${e}/parseAndMutate/activities/undoChangeToFiles`,body:{}}}applyCodebaseIdChanges(e){}}e.UndoChange=E;class _ extends a{constructor(e,t){var n;super(s.REDO,"Redo",e,t),(null===(n=e.changeToRedo)||void 0===n?void 0:n.canInstantUpdateWhileFlushing)&&(this.canInstantUpdateWhileFlushing=!0)}prepareApiRequest(e,t){return{urlPath:`canvases/${e}/parseAndMutate/activities/redoChangeToFiles`,body:{}}}applyCodebaseIdChanges(e){}}e.RedoChange=_;class T extends a{constructor(e,t){super(s.UPDATE_CLASSES,"Update Classes",e,t),this.canInstantUpdateWhileFlushing=!0}prepareApiRequest(e,t){const{codebaseIdToUpdateClass:n,newClasses:r,oldClasses:i}=this.changeFields;return{urlPath:`canvases/${e}/parseAndMutate/mutate/updateClasses`,body:{reactElement:t[n],newClasses:r,oldClasses:i}}}applyCodebaseIdChanges(e){const t=e[this.changeFields.codebaseIdToUpdateClass];t&&(this.changeFields.codebaseIdToUpdateClass=t)}}e.UpdateClassesChange=T;class w extends a{constructor(e,t){super(s.UNKNOWN,"",e,t),this.markProcessedSucceeded(),this.doNotSendInstantUpdate()}prepareApiRequest(e,t){throw Error("Unsupported operation")}applyCodebaseIdChanges(e){}}e.UnknownChange=w,e.reconstructChangeLedgerClass=t=>{if(!t||!t.type)return null;const n=t.type,r=t.changeFields,i=t.id,o=(()=>{switch(n){case s.STYLING:return new l(r,i);case s.ADD_JSX:return new c(r,i);case s.REMOVE_JSX:return new h(r,i);case s.MOVE_JSX:return new u(r,i);case s.CHANGE_PROP:return new d(r,i);case s.ADD_CLASS:return new g(r,i);case s.REMOVE_CLASS:return new y(r,i);case s.UPDATE_CLASSES:return new T(r,i);case s.WRAP_DIV:return new f(r,i);case s.CHANGE_TAG:return new m(r,i);case s.DUPLICATE:return new p(r,i);case s.EDIT_TEXT:return new v(r,i);case s.UNDO:return r.changeToUndo=(0,e.reconstructChangeLedgerClass)(r.changeToUndo),new E(r,i);case s.REDO:return r.changeToRedo=(0,e.reconstructChangeLedgerClass)(r.changeToRedo),new _(r,i);case s.UNKNOWN:return new w(r,i);default:throw new Error(`Unknown change type: ${n}`)}})();return Object.keys(t).forEach(e=>{["type","changeFields","id"].includes(e)||(o[e]=t[e])}),o}}(_m)),_m),s=_g(),o=ly(),a=Wg(),l=wm(),c=yg();e.WRAP_IN_DIV_PLACEHOLDER_CODEBASE_ID="tempo-wrap-in-div-placeholder",e.DUPLICATE_PLACEHOLDER_PREFIX="tempo-duplicate-placeholder-",e.ADD_JSX_PREFIX="tempo-add-jsx-placeholder-",e.ADD_CLASS_INSTANT_UPDATE_QUEUE="ADD_CLASS_INSTANT_UPDATE_QUEUE",e.TEMPORARY_STYLING_CLASS_NAME="arb89-temp-styling";const u=e=>{let t=null,i=1/0;return(0,n.default)(`.component-${e}`).each((e,s)=>{(0,n.default)(s).parents().length<i&&(i=(0,n.default)(s).parents().length,t=(0,r.getCodebaseIdFromNode)(s))}),t};let h={};e.resetIntermediateClassesForSliderInstantUpdate=()=>{h={}};const d={sm:"@media (width >= 40rem)",md:"@media (width >= 48rem)",lg:"@media (width >= 64rem)",xl:"@media (width >= 80rem)","2xl":"@media (width >= 96rem)"},f=(e,t,n,r)=>{let i=e.replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\./g,"\\.").replace(/\%/g,"\\%").replace(/\!/g,"\\!").replace(/\//g,"\\/").replace(/#/g,"\\#"),s=t;r&&"default"!==r&&(i=`${r}\\:${i}`,"hover"===r?i=`${i}:hover`:d[r]&&(s=`${d[r]} { ${t} }`)),i=`.${i}`;try{p(i,s,n)}catch(o){}},p=(e,t,n)=>{var r=document.createElement("style");if(n){const e=document.getElementById(n);e&&e.remove(),r.id=n}document.head.appendChild(r);var i=r.sheet;i.insertRule?i.insertRule(e+"{"+t+"}",i.cssRules.length):i.addRule&&i.addRule(e,t,i.rules.length)};e.getFullHtmlWithElement=e=>{const t=e.filter(e=>null!=e);if(!(null==t?void 0:t.length))return;const n=t.map(e=>(0,r.getNodeForElementKey)(e)).filter(e=>null!=e);if(!n.length||n.length!==t.length)return;return document.documentElement.outerHTML.replace(/<body[^>]*>[\s\S]*<\/body>/i,`<body>${n.map(e=>null==e?void 0:e.outerHTML).join("")}</body>`)};e.applyChangeItemToDocument=(t,l,d)=>{if(!d||!d.type)return{sendNewNavTree:!1,instantUpdateSuccessful:!1};const p=(0,i.reconstructChangeLedgerClass)(d);let g={},y=!1;document.getElementById(r.TEMPO_DISPLAY_NONE_UNTIL_REFRESH_CLASS)||f(r.TEMPO_DISPLAY_NONE_UNTIL_REFRESH_CLASS,"display: none !important",r.TEMPO_DISPLAY_NONE_UNTIL_REFRESH_CLASS);let v=!1;if(p.type===i.ChangeType.ADD_JSX){const t=p.changeFields,i=[];if(t.htmlForInstantUpdate){const s=t.htmlForInstantUpdate,o=(0,n.default)(s.includes("<body")?s.replace(/<body[^>]*>([\s\S]*)<\/body>/i,"$1"):s);o.attr(r.TEMPO_DELETE_AFTER_REFRESH,"true"),o.attr(r.TEMPO_INSTANT_UPDATE,"true"),o.attr(r.TEMPO_OUTLINE_UNTIL_REFESH,"true");const a=`${e.ADD_JSX_PREFIX}${(0,c.v4)()}`;o.attr(r.TEMPO_ELEMENT_ID,a),o.addClass(a),i.push(a),(0,n.default)(`.${t.codebaseIdToAddTo}`).each((e,r)=>{if(t.afterCodebaseId){const e=(0,n.default)(`.${t.afterCodebaseId}`);if(!(null==e?void 0:e.length))return;o.insertAfter(e.first())}else if(t.beforeCodebaseId){const e=(0,n.default)(`.${t.beforeCodebaseId}`);if(!(null==e?void 0:e.length))return;o.insertBefore(e.first())}else(0,n.default)(r).append(o);v=!0,y=!0})}g.newAddedIds=i}else if(p.type===i.ChangeType.MOVE_JSX){const e=p,t=[];if((0,n.default)(`.${e.changeFields.codebaseIdToMove}`).length>0)(0,n.default)(`.${e.changeFields.codebaseIdToMove}`).each((e,r)=>{t.push((0,n.default)(r))});else{let r=u(e.changeFields.codebaseIdToMove||"");r&&(0,n.default)(`.${r}`).each((e,r)=>{t.push((0,n.default)(r))})}let i=u(e.changeFields.codebaseIdToMoveTo||"")||e.changeFields.codebaseIdToMoveTo;const s=[];t.forEach(e=>{let t=null,n=e.parent();for(;n.length;){if(n.hasClass(i)){t=n;break}const e=n.find(`.${i}`);if(e.length){t=e.first();break}n=n.parent()}t?s.push(t):s.push(null)}),t.forEach((t,n)=>{const i=s[n];if(!i.length)return;v=!0,y=!0,t.attr(r.TEMPO_INSTANT_UPDATE,"true");let o,a=!i.is(t.parent());if(a&&(o=t.clone(),o.attr(r.TEMPO_DELETE_AFTER_REFRESH,"true"),t.addClass(r.TEMPO_DISPLAY_NONE_UNTIL_REFRESH_CLASS),t.attr(r.TEMPO_DO_NOT_SHOW_IN_NAV_UNTIL_REFRESH,"true")),e.changeFields.afterCodebaseId){const n=u(e.changeFields.afterCodebaseId)||e.changeFields.afterCodebaseId,r=i.children(`.${n}`);if(r.length)return void(a&&o?o.insertAfter(r.first()):t.insertAfter(r.first()))}if(e.changeFields.beforeCodebaseId){const n=u(e.changeFields.beforeCodebaseId)||e.changeFields.beforeCodebaseId,r=i.children(`.${n}`);if(r.length)return void(a&&o?o.insertBefore(r.first()):t.insertBefore(r.first()))}a&&o?o.appendTo(i):t.appendTo(i)})}else if(p.type===i.ChangeType.REMOVE_JSX){const e={};p.changeFields.codebaseIdsToRemove.forEach(t=>{let i;if((0,n.default)(`.${t}`).length>0)i=t;else{let e=u(t||"");if(!e)return!1;i=e}(0,n.default)(`.${i}`).each((t,n)=>{const i=(0,r.getElementKeyFromNode)(n),s=(0,r.getElementKeyFromNode)(n.parentElement);i&&s&&(e[s]||(e[s]=[]),e[s].push({outerHTML:n.outerHTML,elementKeyRemoved:i})),n.classList.add(r.TEMPO_DISPLAY_NONE_UNTIL_REFRESH_CLASS),n.setAttribute(r.TEMPO_DO_NOT_SHOW_IN_NAV_UNTIL_REFRESH,"true"),v=!0,y=!0})}),g.parentToElementKeysRemoved=e}else if(p.type===i.ChangeType.ADD_CLASS||p.type===i.ChangeType.STYLING){let t,l,c,h,d,m;if(p.type===i.ChangeType.ADD_CLASS){const n=p;d=n.changeFields.className,t=n.changeFields.className,l=n.changeFields.cssEquivalent,c=n.changeFields.codebaseIdToAddClass,h=n.changeFields.temporaryOnly,m=n.changeFields.modifiers,h&&(t=e.TEMPORARY_STYLING_CLASS_NAME)}else{const e=p.changeFields;t="",l=Object.keys(e.stylingChanges).map(t=>e.stylingChanges[t]===s.DELETE_STYLE_CONSTANT?`${(0,o.camelToSnakeCase)(t)}: unset !important;`:`${(0,o.camelToSnakeCase)(t)}: ${e.stylingChanges[t]};`).join(""),c=e.codebaseId,m=e.modifiers}const v=/[^A-Za-z0-9_-]/g;let E=(t||"").replace(v,"-").replace(/^\d/,"-$&");if(l&&!h){const e=Date.now()-17040672e5;E=`${r.TEMPO_INSTANT_UPDATE_STYLING_PREFIX}${e}-${E}`}if(E){if(h||(0,n.default)(`.${c}`).removeClass(e.TEMPORARY_STYLING_CLASS_NAME),l)if(m&&m.length>0){const e=["hover","required","focus","active","invalid","disabled"],t=m.filter(t=>e.includes(t)),n=t.join(":");if(t.length>0){const e=`${E}:${n}`;f(e,l,e)}else f(E,l,E);const r=`${E}${m.map(e=>`.tempo-force-${e}`).join("")}`;f(r,l,r)}else f(E,l,E);const t=(0,a.getMemoryStorageItem)(e.ADD_CLASS_INSTANT_UPDATE_QUEUE)||[];if((0,n.default)(`.${c}`).length>0)(0,n.default)(`.${c}`).addClass(E),y=!0,t.push({codebaseId:c,className:E});else{let e=u(c||"");e&&(0,n.default)(`.${e}`).length>0&&(y=!0,(0,n.default)(`.${e}`).addClass(E),t.push({codebaseId:e,className:E}))}(0,a.setMemoryStorageItem)(e.ADD_CLASS_INSTANT_UPDATE_QUEUE,t),g.addedClass=E,g.codebaseAddedClass=d}}else if(p.type===i.ChangeType.REMOVE_CLASS){const e=p.changeFields;if((0,n.default)(`.${e.codebaseIdToRemoveClass}`).length>0)(0,n.default)(`.${e.codebaseIdToRemoveClass}`).removeClass(e.className),y=!0;else{let t=u(e.codebaseIdToRemoveClass||"");t&&(0,n.default)(`.${t}`).length>0&&(y=!0,(0,n.default)(`.${t}`).removeClass(e.className))}}else if(p.type===i.ChangeType.WRAP_DIV){const t=p.changeFields.codebaseIdsToWrap,i=t[0];(0,n.default)(`.${i}`).each((i,s)=>{const o=t.slice(1),a=(0,n.default)(s).siblings(),l=[s];let c=s,u=(0,n.default)(s).index();o.forEach(e=>{const t=a.filter(`.${e}`).get(0);if(t){l.push(t);const e=(0,n.default)(t).index();e<u&&(c=t,u=e)}}),l.length,t.length;const h=document.createElement("div");h.className=e.WRAP_IN_DIV_PLACEHOLDER_CODEBASE_ID,h.setAttribute(r.TEMPO_INSTANT_UPDATE,"true"),h.setAttribute("tempoelementid",e.WRAP_IN_DIV_PLACEHOLDER_CODEBASE_ID),h.setAttribute("data-testid",e.WRAP_IN_DIV_PLACEHOLDER_CODEBASE_ID),h.setAttribute(r.TEMPO_DELETE_AFTER_REFRESH,"true"),l.forEach(e=>{h.appendChild(e.cloneNode(!0)),e.classList.add(r.TEMPO_DISPLAY_NONE_UNTIL_REFRESH_CLASS),e.setAttribute(r.TEMPO_DO_NOT_SHOW_IN_NAV_UNTIL_REFRESH,"true")}),c.insertAdjacentElement("beforebegin",h),v=!0,y=!0})}else if(p.type===i.ChangeType.DUPLICATE){p.changeFields.codebaseIdsToDuplicate.forEach(t=>{(0,n.default)(`.${t}`).each((n,i)=>{const s=i.cloneNode(!0);s.setAttribute(r.TEMPO_DELETE_AFTER_REFRESH,"true"),s.setAttribute(r.TEMPO_INSTANT_UPDATE,"true"),s.setAttribute("tempoelementid",`${e.DUPLICATE_PLACEHOLDER_PREFIX}${t}`),s.setAttribute("data-testid",`${e.DUPLICATE_PLACEHOLDER_PREFIX}${t}`),s.classList.add(e.DUPLICATE_PLACEHOLDER_PREFIX+t),s.classList.remove(t);let o=Array.from(s.children);for(;o.length;){const t=o.pop();if(!t)continue;const n=t.getAttribute("tempoelementid")||t.getAttribute("data-testid");n&&(t.setAttribute("tempoelementid",`${e.DUPLICATE_PLACEHOLDER_PREFIX}${n}`),t.setAttribute("data-testid",`${e.DUPLICATE_PLACEHOLDER_PREFIX}${n}`),t.classList.remove(n),t.classList.add(e.DUPLICATE_PLACEHOLDER_PREFIX+n),t.setAttribute(r.TEMPO_INSTANT_UPDATE,"true"),o.push(...Array.from(t.children)))}i.insertAdjacentElement("afterend",s),v=!0,y=!0})})}else if(p.type===i.ChangeType.CHANGE_TAG){const e=p.changeFields;(0,n.default)(`.${e.codebaseIdToChange}`).each((t,i)=>{const s=(0,n.default)("<"+e.newTagName+"></"+e.newTagName+">");s.attr(r.TEMPO_INSTANT_UPDATE,"true"),s.attr(r.TEMPO_DELETE_AFTER_REFRESH,"true");const o=(0,n.default)(i);n.default.each(o[0].attributes,function(){s.attr(this.name,this.value)}),o.contents().clone(!0,!0).appendTo(s),o.before(s),o.addClass(r.TEMPO_DISPLAY_NONE_UNTIL_REFRESH_CLASS),o.attr(r.TEMPO_DO_NOT_SHOW_IN_NAV_UNTIL_REFRESH,"true"),v=!0,y=!0})}else if(p.type===i.ChangeType.UNDO){const{sendNewNavTree:e,instantUpdateSuccessful:n}=m(t,p);v=e,y=n}else if(p.type===i.ChangeType.REDO){const n=p.changeFields.changeToRedo;if(i.CHANGE_TYPES_WITH_INSTANT_UNDO.includes(n.type)){const{sendNewNavTree:r,instantUpdateSuccessful:i}=(0,e.applyChangeItemToDocument)(t,l,n);if(v=r,y=i,n.prevIdToNewIdMap){const r=(0,e.updateCodebaseIds)(t,n.prevIdToNewIdMap,!0);v=r||v}}}else if(p.type===i.ChangeType.UPDATE_CLASSES){const{codebaseIdToUpdateClass:e,newClasses:t,oldClasses:r,involvedClasses:i,isInstantChangeOnly:s}=p.changeFields;for(const o of r)(0,n.default)(`.${e}`).removeClass(o);(h[e]||[]).forEach(t=>{(0,n.default)(`.${e}`).removeClass(t)});for(const o of t)(0,n.default)(`.${e}`).addClass(o);for(const n of i)f(n.tailwind,n.css,void 0,n.variant);if(s){h[e]=[];for(const t of i){const n=t.variant?`${t.variant}:${t.tailwind}`:t.tailwind;h[e].push(n)}}else h[e]=[]}let E=p.getElementKeyToSelectAfterInstantUpdate(),_=p.getElementKeysToMultiselectAfterInstantUpdate();return p.type===i.ChangeType.UNDO&&(E=p.changeFields.changeToUndo.getElementKeyToSelectAfterUndoInstantUpdate(),_=p.changeFields.changeToUndo.getElementKeysToMultiselectAfterUndoInstantUpdate()),void 0!==E&&((0,a.setMemoryStorageItem)(a.SELECTED_ELEMENT_KEY,E),t.postMessage({id:s.FIXED_IFRAME_MESSAGE_IDS.SELECTED_ELEMENT_KEY,elementKey:E,outerHTML:(0,e.getFullHtmlWithElement)([E])})),void 0!==_&&((0,a.setMemoryStorageItem)(a.MULTI_SELECTED_ELEMENT_KEYS,_),t.postMessage({id:s.FIXED_IFRAME_MESSAGE_IDS.MULTI_SELECTED_ELEMENT_KEYS,elementKeys:_,outerHTMLs:(0,e.getFullHtmlWithElement)(_||[])})),y&&(0,n.default)(`*[${r.TEMPO_DELETE_AFTER_INSTANT_UPDATE}=true]`).remove(),t.postMessage({id:s.FIXED_IFRAME_MESSAGE_IDS.INSTANT_UPDATE_DONE,changeItem:d,instantUpdateData:g,instantUpdateSuccessful:y}),{sendNewNavTree:v,instantUpdateSuccessful:y}};const m=(t,s)=>{const o=s.changeFields,a=o.changeToUndo;if(!i.CHANGE_TYPES_WITH_INSTANT_UNDO.includes(a.type))return{sendNewNavTree:!1,instantUpdateSuccessful:!1};let c=!1,u=!1;if(a.prevIdToNewIdMap){const n={};Object.keys(a.prevIdToNewIdMap).forEach(e=>{const t=a.prevIdToNewIdMap[e];n[t]=e});const r=void 0!==a.getElementKeyToSelectAfterUndoInstantUpdate();c=(0,e.updateCodebaseIds)(t,n,!r)}if(a.type===i.ChangeType.REMOVE_JSX){const e=a.changeFields.codebaseIdsToRemove;if(o.matchingActivityFlushed){const e=a.getInstantUpdateData().parentToElementKeysRemoved||{};Object.entries(e).forEach(([e,t])=>{const i=Object.values(t).sort((e,t)=>{const n=l.TempoElement.fromKey(e.elementKeyRemoved),r=l.TempoElement.fromKey(t.elementKeyRemoved);return n.uniquePath.localeCompare(r.uniquePath)}),s=(0,r.getNodeForElementKey)(e);s&&i.forEach(e=>{const{elementKeyRemoved:t,outerHTML:i}=e,o=l.TempoElement.fromKey(t),a=Number(o.uniquePath.split("-").pop()),h=(0,n.default)(i).get(0);h&&(h.setAttribute(r.TEMPO_DELETE_AFTER_REFRESH,"true"),h.setAttribute(r.TEMPO_INSTANT_UPDATE,"true"),s.insertBefore(h,s.children[a]||null),u=!0,c=!0)})})}else e.forEach(e=>{(0,n.default)(`.${e}`).each((e,t)=>{t.classList.remove(r.TEMPO_DISPLAY_NONE_UNTIL_REFRESH_CLASS),t.removeAttribute(r.TEMPO_DO_NOT_SHOW_IN_NAV_UNTIL_REFRESH),c=!0,u=!0})})}else if(a.type===i.ChangeType.ADD_CLASS||a.type===i.ChangeType.STYLING){const e=a.getInstantUpdateData(),t=a.changeFields,r=null==e?void 0:e.addedClass;r&&(0,n.default)(`.${t.codebaseIdToAddClass}`).each((e,t)=>{(0,n.default)(t).hasClass(r)&&((0,n.default)(t).removeClass(r),u=!0)});const i=null==e?void 0:e.codebaseAddedClass;i&&(0,n.default)(`.${t.codebaseIdToAddClass}`).each((e,t)=>{(0,n.default)(t).hasClass(i)&&((0,n.default)(t).removeClass(i),u=!0)})}else if(a.type===i.ChangeType.UPDATE_CLASSES){const{codebaseIdToUpdateClass:e,newClasses:t,oldClasses:r}=a.changeFields;for(const i of t)(0,n.default)(`.${e}`).removeClass(i);for(const i of r)(0,n.default)(`.${e}`).addClass(i);h[e]=[]}else if(a.type===i.ChangeType.ADD_JSX){const e=a.getInstantUpdateData(),t=null==e?void 0:e.addedIds;null==t||t.forEach(e=>{(0,n.default)(`.${e}`).remove(),u=!0}),c=!0}return{sendNewNavTree:c,instantUpdateSuccessful:u}};e.updateCodebaseIds=(t,r,i)=>{const o=[];if(Object.entries(r).forEach(([e,t])=>{(0,n.default)(`.${e}`).each((n,r)=>{o.push({item:r,prevCodebaseId:e,newCodebaseId:t})})}),o.forEach(e=>{const t=(0,n.default)(e.item),r=(t.attr("class")||"").replace(new RegExp(`${e.prevCodebaseId}`,"g"),e.newCodebaseId);t.attr("class",r),e.item.setAttribute("tempoelementid",e.newCodebaseId),e.item.setAttribute("data-testid",e.newCodebaseId)}),!i)return Boolean(o.length);[{key:a.SELECTED_ELEMENT_KEY,messageId:s.FIXED_IFRAME_MESSAGE_IDS.SELECTED_ELEMENT_KEY},{key:a.HOVERED_ELEMENT_KEY,messageId:s.FIXED_IFRAME_MESSAGE_IDS.HOVERED_ELEMENT_KEY}].forEach(({key:n,messageId:i})=>{const s=(0,a.getMemoryStorageItem)(n),o=l.TempoElement.fromKey(s);if(r[o.codebaseId]){const s=new l.TempoElement(r[o.codebaseId],o.storyboardId,o.uniquePath);(0,a.setMemoryStorageItem)(n,s.getKey()),t.postMessage({id:i,elementKey:s.getKey(),outerHTML:(0,e.getFullHtmlWithElement)([s.getKey()])})}});const c=(0,a.getMemoryStorageItem)(a.MULTI_SELECTED_ELEMENT_KEYS);if(null==c?void 0:c.length){const n=[];c.forEach(e=>{const t=l.TempoElement.fromKey(e);if(r[t.codebaseId]){const e=new l.TempoElement(r[t.codebaseId],t.storyboardId,t.uniquePath);n.push(e.getKey())}else n.push(e)}),(0,a.setMemoryStorageItem)(a.MULTI_SELECTED_ELEMENT_KEYS,n),t.postMessage({id:s.FIXED_IFRAME_MESSAGE_IDS.MULTI_SELECTED_ELEMENT_KEYS,elementKeys:n,outerHTMLs:(0,e.getFullHtmlWithElement)(n)})}return Boolean(o.length)}}(mm)),mm}function uy(){return ey||(ey=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isElementInSvg=e.isSkipNavTreeNode=e.isMovingElement=e.getAllUnknownClasses=e.getAllUnknownClasesFromList=e.isOutline=e.hasClass=e.getElementKeyFromNode=e.getUniquePathFromNode=e.getCodebaseIdFromNode=e.getCodebaseIdFromClassName=e.validateUuid=e.clearElementKeyForUniquePath=e.setElementKeyForUniquePath=e.getElementKeyForUniquePath=e.clearNodeForElementKey=e.setNodeForElementKey=e.getNodeForElementKey=e.KNOWN_ATTRIBUTES=e.TEMPO_QUEUE_DELETE_AFTER_HOT_RELOAD=e.TEMPO_TEST_ID=e.TEMPO_ELEMENT_ID=e.TEMPO_DO_NOT_SHOW_IN_NAV_UNTIL_REFRESH=e.TEMPO_OUTLINE_UNTIL_REFESH=e.TEMPO_DELETE_AFTER_REFRESH=e.TEMPO_INSTANT_UPDATE=e.TEMPO_DELETE_AFTER_INSTANT_UPDATE=e.TEMPO_DISPLAY_NONE_UNTIL_REFRESH_CLASS=e.TEMPO_INSTANT_UPDATE_STYLING_PREFIX=e.TEMPO_MOVE_BETWEEN_PARENTS_OUTLINE=e.TEMPO_INSTANT_DIV_DRAW_CLASS=e.EDIT_TEXT_BUTTON=e.OUTLINE_CLASS=void 0;const t=cy();e.OUTLINE_CLASS="arb89-outline",e.EDIT_TEXT_BUTTON="arb89-edit-text-button",e.TEMPO_INSTANT_DIV_DRAW_CLASS="arb89-instant-div-draw",e.TEMPO_MOVE_BETWEEN_PARENTS_OUTLINE="arb89-move-between-parents-outline",e.TEMPO_INSTANT_UPDATE_STYLING_PREFIX="arb89-styling-",e.TEMPO_DISPLAY_NONE_UNTIL_REFRESH_CLASS="arb89-display-none-until-refresh",e.TEMPO_DELETE_AFTER_INSTANT_UPDATE="arb89-delete-after-instant-update";const n=new Set([e.OUTLINE_CLASS,e.TEMPO_INSTANT_DIV_DRAW_CLASS,e.TEMPO_MOVE_BETWEEN_PARENTS_OUTLINE,e.TEMPO_DISPLAY_NONE_UNTIL_REFRESH_CLASS,t.WRAP_IN_DIV_PLACEHOLDER_CODEBASE_ID,t.TEMPORARY_STYLING_CLASS_NAME,e.EDIT_TEXT_BUTTON]),r=[e.TEMPO_INSTANT_UPDATE_STYLING_PREFIX,t.DUPLICATE_PLACEHOLDER_PREFIX,t.ADD_JSX_PREFIX];e.TEMPO_INSTANT_UPDATE="arb89-instant-update",e.TEMPO_DELETE_AFTER_REFRESH="arb89-delete-after-refresh",e.TEMPO_OUTLINE_UNTIL_REFESH="arb89-outline-until-refresh",e.TEMPO_DO_NOT_SHOW_IN_NAV_UNTIL_REFRESH="arb89-do-not-show-in-nav",e.TEMPO_ELEMENT_ID="tempoelementid",e.TEMPO_TEST_ID="data-testid",e.TEMPO_QUEUE_DELETE_AFTER_HOT_RELOAD="arb89-queue-delete-after-hot-reload",e.KNOWN_ATTRIBUTES=new Set([e.TEMPO_INSTANT_UPDATE,e.TEMPO_DELETE_AFTER_REFRESH,e.TEMPO_DELETE_AFTER_INSTANT_UPDATE,e.TEMPO_OUTLINE_UNTIL_REFESH,e.TEMPO_QUEUE_DELETE_AFTER_HOT_RELOAD,e.TEMPO_DO_NOT_SHOW_IN_NAV_UNTIL_REFRESH,e.TEMPO_ELEMENT_ID,e.TEMPO_TEST_ID]);let i={};e.getNodeForElementKey=e=>e?i[e]:null;e.setNodeForElementKey=(e,t)=>{i[e]=t};e.clearNodeForElementKey=()=>{i={}};let s={};e.getElementKeyForUniquePath=e=>s[e]||null;e.setElementKeyForUniquePath=(e,t)=>{s[e]=t};e.clearElementKeyForUniquePath=()=>{s={}};e.validateUuid=e=>new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$","i").test(e);e.getCodebaseIdFromClassName=n=>n&&n.startsWith("tempo-")&&((0,e.validateUuid)(n.substring(6))||n===t.WRAP_IN_DIV_PLACEHOLDER_CODEBASE_ID||n.startsWith(t.DUPLICATE_PLACEHOLDER_PREFIX))?n:null;e.getCodebaseIdFromNode=t=>{var n;if(!(null==t?void 0:t.classList))return null;let r=null;return t.classList.forEach(t=>{if(r)return;if(!t)return;const n=(0,e.getCodebaseIdFromClassName)(t);n&&(r=n)}),r||("body"==(null===(n=null==t?void 0:t.tagName)||void 0===n?void 0:n.toLowerCase())?"body":"root"==(null==t?void 0:t.id)?"root":"__next"==(null==t?void 0:t.id)?"__next":null)};e.getUniquePathFromNode=e=>{var t,n;const r=[];let i=e;for(;i&&"body"!==(null===(t=i.tagName)||void 0===t?void 0:t.toLowerCase());){const e=Array.from((null===(n=i.parentElement)||void 0===n?void 0:n.children)||[]).indexOf(i);-1===e?r.push("0"):r.push(e.toString()),i=i.parentElement}return"0-"+r.reverse().join("-")};e.getElementKeyFromNode=t=>{const n=(0,e.getUniquePathFromNode)(t);return(0,e.getElementKeyForUniquePath)(n)};e.hasClass=(e,t)=>{if(!(null==e?void 0:e.classList))return!1;let n=!1;return e.classList.forEach(e=>{e==t&&(n=!0)}),n};e.isOutline=t=>(0,e.hasClass)(t,e.OUTLINE_CLASS);e.getAllUnknownClasesFromList=t=>t.filter(t=>{if(!t)return!1;const i=null!==(0,e.getCodebaseIdFromClassName)(t);return!(r.some(e=>t.startsWith(e))||n.has(t)||i)});e.getAllUnknownClasses=t=>(null==t?void 0:t.classList)?(0,e.getAllUnknownClasesFromList)(Array.from(t.classList)):[];e.isMovingElement=t=>!!t&&("function"==typeof t.getAttribute&&"true"===t.getAttribute(e.TEMPO_INSTANT_UPDATE));e.isSkipNavTreeNode=t=>{if(t)return"true"===t.getAttribute(e.TEMPO_DO_NOT_SHOW_IN_NAV_UNTIL_REFRESH)};e.isElementInSvg=(t,n)=>{var r;return!!t&&(!(!n||"svg"!==(null===(r=t.tagName)||void 0===r?void 0:r.toLowerCase()))||!!t.parentNode&&(0,e.isElementInSvg)(t.parentNode,!0))}}(pm)),pm}var hy,dy={exports:{}},fy=dy.exports;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */function py(){return hy||(hy=1,e=dy,t=dy.exports,function(){var n,r="Expected a function",i="__lodash_hash_undefined__",s="__lodash_placeholder__",o=32,a=128,l=256,c=1/0,u=9007199254740991,h=NaN,d=4294967295,f=[["ary",a],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",o],["partialRight",64],["rearg",l]],p="[object Arguments]",m="[object Array]",g="[object Boolean]",y="[object Date]",v="[object Error]",E="[object Function]",_="[object GeneratorFunction]",T="[object Map]",w="[object Number]",b="[object Object]",S="[object Promise]",I="[object RegExp]",C="[object Set]",N="[object String]",A="[object Symbol]",x="[object WeakMap]",O="[object ArrayBuffer]",D="[object DataView]",L="[object Float32Array]",M="[object Float64Array]",P="[object Int8Array]",k="[object Int16Array]",U="[object Int32Array]",j="[object Uint8Array]",F="[object Uint8ClampedArray]",V="[object Uint16Array]",K="[object Uint32Array]",B=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,$=/(__e\(.*?\)|\b__t\)) \+\n'';/g,q=/&(?:amp|lt|gt|quot|#39);/g,z=/[&<>"']/g,W=RegExp(q.source),Y=RegExp(z.source),G=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,J=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Z=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,ne=RegExp(te.source),re=/^\s+/,ie=/\s/,se=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,oe=/\{\n\/\* \[wrapped with (.+)\] \*/,ae=/,? & /,le=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ce=/[()=,{}\[\]\/\s]/,ue=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,de=/\w*$/,fe=/^[-+]0x[0-9a-f]+$/i,pe=/^0b[01]+$/i,me=/^\[object .+?Constructor\]$/,ge=/^0o[0-7]+$/i,ye=/^(?:0|[1-9]\d*)$/,ve=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ee=/($^)/,_e=/['\n\r\u2028\u2029\\]/g,Te="\\ud800-\\udfff",we="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",be="\\u2700-\\u27bf",Se="a-z\\xdf-\\xf6\\xf8-\\xff",Ie="A-Z\\xc0-\\xd6\\xd8-\\xde",Ce="\\ufe0e\\ufe0f",Ne="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ae="[']",xe="["+Te+"]",Oe="["+Ne+"]",Re="["+we+"]",De="\\d+",Le="["+be+"]",Me="["+Se+"]",Pe="[^"+Te+Ne+De+be+Se+Ie+"]",ke="\\ud83c[\\udffb-\\udfff]",Ue="[^"+Te+"]",je="(?:\\ud83c[\\udde6-\\uddff]){2}",Fe="[\\ud800-\\udbff][\\udc00-\\udfff]",Ve="["+Ie+"]",Ke="\\u200d",Be="(?:"+Me+"|"+Pe+")",He="(?:"+Ve+"|"+Pe+")",$e="(?:['](?:d|ll|m|re|s|t|ve))?",qe="(?:['](?:D|LL|M|RE|S|T|VE))?",ze="(?:"+Re+"|"+ke+")?",We="["+Ce+"]?",Ye=We+ze+"(?:"+Ke+"(?:"+[Ue,je,Fe].join("|")+")"+We+ze+")*",Ge="(?:"+[Le,je,Fe].join("|")+")"+Ye,Xe="(?:"+[Ue+Re+"?",Re,je,Fe,xe].join("|")+")",Qe=RegExp(Ae,"g"),Je=RegExp(Re,"g"),Ze=RegExp(ke+"(?="+ke+")|"+Xe+Ye,"g"),et=RegExp([Ve+"?"+Me+"+"+$e+"(?="+[Oe,Ve,"$"].join("|")+")",He+"+"+qe+"(?="+[Oe,Ve+Be,"$"].join("|")+")",Ve+"?"+Be+"+"+$e,Ve+"+"+qe,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",De,Ge].join("|"),"g"),tt=RegExp("["+Ke+Te+we+Ce+"]"),nt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,st={};st[L]=st[M]=st[P]=st[k]=st[U]=st[j]=st[F]=st[V]=st[K]=!0,st[p]=st[m]=st[O]=st[g]=st[D]=st[y]=st[v]=st[E]=st[T]=st[w]=st[b]=st[I]=st[C]=st[N]=st[x]=!1;var ot={};ot[p]=ot[m]=ot[O]=ot[D]=ot[g]=ot[y]=ot[L]=ot[M]=ot[P]=ot[k]=ot[U]=ot[T]=ot[w]=ot[b]=ot[I]=ot[C]=ot[N]=ot[A]=ot[j]=ot[F]=ot[V]=ot[K]=!0,ot[v]=ot[E]=ot[x]=!1;var at={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lt=parseFloat,ct=parseInt,ut="object"==typeof R&&R&&R.Object===Object&&R,ht="object"==typeof self&&self&&self.Object===Object&&self,dt=ut||ht||Function("return this")(),ft=t&&!t.nodeType&&t,pt=ft&&e&&!e.nodeType&&e,mt=pt&&pt.exports===ft,gt=mt&&ut.process,yt=function(){try{var e=pt&&pt.require&&pt.require("util").types;return e||gt&&gt.binding&&gt.binding("util")}catch(t){}}(),vt=yt&&yt.isArrayBuffer,Et=yt&&yt.isDate,_t=yt&&yt.isMap,Tt=yt&&yt.isRegExp,wt=yt&&yt.isSet,bt=yt&&yt.isTypedArray;function St(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function It(e,t,n,r){for(var i=-1,s=null==e?0:e.length;++i<s;){var o=e[i];t(r,o,n(o),e)}return r}function Ct(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Nt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function At(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function xt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[i++]=o)}return s}function Ot(e,t){return!(null==e||!e.length)&&Vt(e,t,0)>-1}function Rt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Dt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Lt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Mt(e,t,n,r){var i=-1,s=null==e?0:e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n}function Pt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function kt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ut=$t("length");function jt(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Ft(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}function Vt(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Ft(e,Bt,n)}function Kt(e,t,n,r){for(var i=n-1,s=e.length;++i<s;)if(r(e[i],t))return i;return-1}function Bt(e){return e!=e}function Ht(e,t){var n=null==e?0:e.length;return n?Wt(e,t)/n:h}function $t(e){return function(t){return null==t?n:t[e]}}function qt(e){return function(t){return null==e?n:e[t]}}function zt(e,t,n,r,i){return i(e,function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)}),n}function Wt(e,t){for(var r,i=-1,s=e.length;++i<s;){var o=t(e[i]);o!==n&&(r=r===n?o:r+o)}return r}function Yt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Gt(e){return e?e.slice(0,dn(e)+1).replace(re,""):e}function Xt(e){return function(t){return e(t)}}function Qt(e,t){return Dt(t,function(t){return e[t]})}function Jt(e,t){return e.has(t)}function Zt(e,t){for(var n=-1,r=e.length;++n<r&&Vt(t,e[n],0)>-1;);return n}function en(e,t){for(var n=e.length;n--&&Vt(t,e[n],0)>-1;);return n}var tn=qt({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),nn=qt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function rn(e){return"\\"+at[e]}function sn(e){return tt.test(e)}function on(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function an(e,t){return function(n){return e(t(n))}}function ln(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==s||(e[n]=s,o[i++]=n)}return o}function cn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function un(e){return sn(e)?function(e){for(var t=Ze.lastIndex=0;Ze.test(e);)++t;return t}(e):Ut(e)}function hn(e){return sn(e)?function(e){return e.match(Ze)||[]}(e):function(e){return e.split("")}(e)}function dn(e){for(var t=e.length;t--&&ie.test(e.charAt(t)););return t}var fn=qt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),pn=function e(t){var R,ie=(t=null==t?dt:pn.defaults(dt.Object(),t,pn.pick(dt,rt))).Array,Te=t.Date,we=t.Error,be=t.Function,Se=t.Math,Ie=t.Object,Ce=t.RegExp,Ne=t.String,Ae=t.TypeError,xe=ie.prototype,Oe=be.prototype,Re=Ie.prototype,De=t["__core-js_shared__"],Le=Oe.toString,Me=Re.hasOwnProperty,Pe=0,ke=(R=/[^.]+$/.exec(De&&De.keys&&De.keys.IE_PROTO||""))?"Symbol(src)_1."+R:"",Ue=Re.toString,je=Le.call(Ie),Fe=dt._,Ve=Ce("^"+Le.call(Me).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ke=mt?t.Buffer:n,Be=t.Symbol,He=t.Uint8Array,$e=Ke?Ke.allocUnsafe:n,qe=an(Ie.getPrototypeOf,Ie),ze=Ie.create,We=Re.propertyIsEnumerable,Ye=xe.splice,Ge=Be?Be.isConcatSpreadable:n,Xe=Be?Be.iterator:n,Ze=Be?Be.toStringTag:n,tt=function(){try{var e=cs(Ie,"defineProperty");return e({},"",{}),e}catch(t){}}(),at=t.clearTimeout!==dt.clearTimeout&&t.clearTimeout,ut=Te&&Te.now!==dt.Date.now&&Te.now,ht=t.setTimeout!==dt.setTimeout&&t.setTimeout,ft=Se.ceil,pt=Se.floor,gt=Ie.getOwnPropertySymbols,yt=Ke?Ke.isBuffer:n,Ut=t.isFinite,qt=xe.join,mn=an(Ie.keys,Ie),gn=Se.max,yn=Se.min,vn=Te.now,En=t.parseInt,_n=Se.random,Tn=xe.reverse,wn=cs(t,"DataView"),bn=cs(t,"Map"),Sn=cs(t,"Promise"),In=cs(t,"Set"),Cn=cs(t,"WeakMap"),Nn=cs(Ie,"create"),An=Cn&&new Cn,xn={},On=js(wn),Rn=js(bn),Dn=js(Sn),Ln=js(In),Mn=js(Cn),Pn=Be?Be.prototype:n,kn=Pn?Pn.valueOf:n,Un=Pn?Pn.toString:n;function jn(e){if(na(e)&&!qo(e)&&!(e instanceof Bn)){if(e instanceof Kn)return e;if(Me.call(e,"__wrapped__"))return Fs(e)}return new Kn(e)}var Fn=function(){function e(){}return function(t){if(!ta(t))return{};if(ze)return ze(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function Vn(){}function Kn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}function Bn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=d,this.__views__=[]}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function $n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function zn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new qn;++t<n;)this.add(e[t])}function Wn(e){var t=this.__data__=new $n(e);this.size=t.size}function Yn(e,t){var n=qo(e),r=!n&&$o(e),i=!n&&!r&&Go(e),s=!n&&!r&&!i&&ua(e),o=n||r||i||s,a=o?Yt(e.length,Ne):[],l=a.length;for(var c in e)!t&&!Me.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||gs(c,l))||a.push(c);return a}function Gn(e){var t=e.length;return t?e[zr(0,t-1)]:n}function Xn(e,t){return Ds(Ni(e),sr(t,0,e.length))}function Qn(e){return Ds(Ni(e))}function Jn(e,t,r){(r!==n&&!Ko(e[t],r)||r===n&&!(t in e))&&rr(e,t,r)}function Zn(e,t,r){var i=e[t];Me.call(e,t)&&Ko(i,r)&&(r!==n||t in e)||rr(e,t,r)}function er(e,t){for(var n=e.length;n--;)if(Ko(e[n][0],t))return n;return-1}function tr(e,t,n,r){return ur(e,function(e,i,s){t(r,e,n(e),s)}),r}function nr(e,t){return e&&Ai(t,Da(t),e)}function rr(e,t,n){"__proto__"==t&&tt?tt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ir(e,t){for(var r=-1,i=t.length,s=ie(i),o=null==e;++r<i;)s[r]=o?n:Na(e,t[r]);return s}function sr(e,t,r){return e==e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function or(e,t,r,i,s,o){var a,l=1&t,c=2&t,u=4&t;if(r&&(a=s?r(e,i,s,o):r(e)),a!==n)return a;if(!ta(e))return e;var h=qo(e);if(h){if(a=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Me.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return Ni(e,a)}else{var d=ds(e),f=d==E||d==_;if(Go(e))return Ti(e,l);if(d==b||d==p||f&&!s){if(a=c||f?{}:ps(e),!l)return c?function(e,t){return Ai(e,hs(e),t)}(e,function(e,t){return e&&Ai(t,La(t),e)}(a,e)):function(e,t){return Ai(e,us(e),t)}(e,nr(a,e))}else{if(!ot[d])return s?e:{};a=function(e,t,n){var r,i=e.constructor;switch(t){case O:return wi(e);case g:case y:return new i(+e);case D:return function(e,t){var n=t?wi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case L:case M:case P:case k:case U:case j:case F:case V:case K:return bi(e,n);case T:return new i;case w:case N:return new i(e);case I:return function(e){var t=new e.constructor(e.source,de.exec(e));return t.lastIndex=e.lastIndex,t}(e);case C:return new i;case A:return r=e,kn?Ie(kn.call(r)):{}}}(e,d,l)}}o||(o=new Wn);var m=o.get(e);if(m)return m;o.set(e,a),aa(e)?e.forEach(function(n){a.add(or(n,t,r,n,e,o))}):ra(e)&&e.forEach(function(n,i){a.set(i,or(n,t,r,i,e,o))});var v=h?n:(u?c?ns:ts:c?La:Da)(e);return Ct(v||e,function(n,i){v&&(n=e[i=n]),Zn(a,i,or(n,t,r,i,e,o))}),a}function ar(e,t,r){var i=r.length;if(null==e)return!i;for(e=Ie(e);i--;){var s=r[i],o=t[s],a=e[s];if(a===n&&!(s in e)||!o(a))return!1}return!0}function lr(e,t,i){if("function"!=typeof e)throw new Ae(r);return As(function(){e.apply(n,i)},t)}function cr(e,t,n,r){var i=-1,s=Ot,o=!0,a=e.length,l=[],c=t.length;if(!a)return l;n&&(t=Dt(t,Xt(n))),r?(s=Rt,o=!1):t.length>=200&&(s=Jt,o=!1,t=new zn(t));e:for(;++i<a;){var u=e[i],h=null==n?u:n(u);if(u=r||0!==u?u:0,o&&h==h){for(var d=c;d--;)if(t[d]===h)continue e;l.push(u)}else s(t,h,r)||l.push(u)}return l}jn.templateSettings={escape:G,evaluate:X,interpolate:Q,variable:"",imports:{_:jn}},jn.prototype=Vn.prototype,jn.prototype.constructor=jn,Kn.prototype=Fn(Vn.prototype),Kn.prototype.constructor=Kn,Bn.prototype=Fn(Vn.prototype),Bn.prototype.constructor=Bn,Hn.prototype.clear=function(){this.__data__=Nn?Nn(null):{},this.size=0},Hn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hn.prototype.get=function(e){var t=this.__data__;if(Nn){var r=t[e];return r===i?n:r}return Me.call(t,e)?t[e]:n},Hn.prototype.has=function(e){var t=this.__data__;return Nn?t[e]!==n:Me.call(t,e)},Hn.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Nn&&t===n?i:t,this},$n.prototype.clear=function(){this.__data__=[],this.size=0},$n.prototype.delete=function(e){var t=this.__data__,n=er(t,e);return!(n<0||(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,0))},$n.prototype.get=function(e){var t=this.__data__,r=er(t,e);return r<0?n:t[r][1]},$n.prototype.has=function(e){return er(this.__data__,e)>-1},$n.prototype.set=function(e,t){var n=this.__data__,r=er(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(bn||$n),string:new Hn}},qn.prototype.delete=function(e){var t=as(this,e).delete(e);return this.size-=t?1:0,t},qn.prototype.get=function(e){return as(this,e).get(e)},qn.prototype.has=function(e){return as(this,e).has(e)},qn.prototype.set=function(e,t){var n=as(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},zn.prototype.add=zn.prototype.push=function(e){return this.__data__.set(e,i),this},zn.prototype.has=function(e){return this.__data__.has(e)},Wn.prototype.clear=function(){this.__data__=new $n,this.size=0},Wn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Wn.prototype.get=function(e){return this.__data__.get(e)},Wn.prototype.has=function(e){return this.__data__.has(e)},Wn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof $n){var r=n.__data__;if(!bn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new qn(r)}return n.set(e,t),this.size=n.size,this};var ur=Ri(vr),hr=Ri(Er,!0);function dr(e,t){var n=!0;return ur(e,function(e,r,i){return n=!!t(e,r,i)}),n}function fr(e,t,r){for(var i=-1,s=e.length;++i<s;){var o=e[i],a=t(o);if(null!=a&&(l===n?a==a&&!ca(a):r(a,l)))var l=a,c=o}return c}function pr(e,t){var n=[];return ur(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function mr(e,t,n,r,i){var s=-1,o=e.length;for(n||(n=ms),i||(i=[]);++s<o;){var a=e[s];t>0&&n(a)?t>1?mr(a,t-1,n,r,i):Lt(i,a):r||(i[i.length]=a)}return i}var gr=Di(),yr=Di(!0);function vr(e,t){return e&&gr(e,t,Da)}function Er(e,t){return e&&yr(e,t,Da)}function _r(e,t){return xt(t,function(t){return Jo(e[t])})}function Tr(e,t){for(var r=0,i=(t=yi(t,e)).length;null!=e&&r<i;)e=e[Us(t[r++])];return r&&r==i?e:n}function wr(e,t,n){var r=t(e);return qo(e)?r:Lt(r,n(e))}function br(e){return null==e?e===n?"[object Undefined]":"[object Null]":Ze&&Ze in Ie(e)?function(e){var t=Me.call(e,Ze),r=e[Ze];try{e[Ze]=n;var i=!0}catch(o){}var s=Ue.call(e);return i&&(t?e[Ze]=r:delete e[Ze]),s}(e):function(e){return Ue.call(e)}(e)}function Sr(e,t){return e>t}function Ir(e,t){return null!=e&&Me.call(e,t)}function Cr(e,t){return null!=e&&t in Ie(e)}function Nr(e,t,r){for(var i=r?Rt:Ot,s=e[0].length,o=e.length,a=o,l=ie(o),c=1/0,u=[];a--;){var h=e[a];a&&t&&(h=Dt(h,Xt(t))),c=yn(h.length,c),l[a]=!r&&(t||s>=120&&h.length>=120)?new zn(a&&h):n}h=e[0];var d=-1,f=l[0];e:for(;++d<s&&u.length<c;){var p=h[d],m=t?t(p):p;if(p=r||0!==p?p:0,!(f?Jt(f,m):i(u,m,r))){for(a=o;--a;){var g=l[a];if(!(g?Jt(g,m):i(e[a],m,r)))continue e}f&&f.push(m),u.push(p)}}return u}function Ar(e,t,r){var i=null==(e=Is(e,t=yi(t,e)))?e:e[Us(Xs(t))];return null==i?n:St(i,e,r)}function xr(e){return na(e)&&br(e)==p}function Or(e,t,r,i,s){return e===t||(null==e||null==t||!na(e)&&!na(t)?e!=e&&t!=t:function(e,t,r,i,s,o){var a=qo(e),l=qo(t),c=a?m:ds(e),u=l?m:ds(t),h=(c=c==p?b:c)==b,d=(u=u==p?b:u)==b,f=c==u;if(f&&Go(e)){if(!Go(t))return!1;a=!0,h=!1}if(f&&!h)return o||(o=new Wn),a||ua(e)?Zi(e,t,r,i,s,o):function(e,t,n,r,i,s,o){switch(n){case D:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case O:return!(e.byteLength!=t.byteLength||!s(new He(e),new He(t)));case g:case y:case w:return Ko(+e,+t);case v:return e.name==t.name&&e.message==t.message;case I:case N:return e==t+"";case T:var a=on;case C:var l=1&r;if(a||(a=cn),e.size!=t.size&&!l)return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var u=Zi(a(e),a(t),r,i,s,o);return o.delete(e),u;case A:if(kn)return kn.call(e)==kn.call(t)}return!1}(e,t,c,r,i,s,o);if(!(1&r)){var E=h&&Me.call(e,"__wrapped__"),_=d&&Me.call(t,"__wrapped__");if(E||_){var S=E?e.value():e,x=_?t.value():t;return o||(o=new Wn),s(S,x,r,i,o)}}return!!f&&(o||(o=new Wn),function(e,t,r,i,s,o){var a=1&r,l=ts(e),c=l.length,u=ts(t),h=u.length;if(c!=h&&!a)return!1;for(var d=c;d--;){var f=l[d];if(!(a?f in t:Me.call(t,f)))return!1}var p=o.get(e),m=o.get(t);if(p&&m)return p==t&&m==e;var g=!0;o.set(e,t),o.set(t,e);for(var y=a;++d<c;){var v=e[f=l[d]],E=t[f];if(i)var _=a?i(E,v,f,t,e,o):i(v,E,f,e,t,o);if(!(_===n?v===E||s(v,E,r,i,o):_)){g=!1;break}y||(y="constructor"==f)}if(g&&!y){var T=e.constructor,w=t.constructor;T==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof T&&T instanceof T&&"function"==typeof w&&w instanceof w||(g=!1)}return o.delete(e),o.delete(t),g}(e,t,r,i,s,o))}(e,t,r,i,Or,s))}function Rr(e,t,r,i){var s=r.length,o=s,a=!i;if(null==e)return!o;for(e=Ie(e);s--;){var l=r[s];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<o;){var c=(l=r[s])[0],u=e[c],h=l[1];if(a&&l[2]){if(u===n&&!(c in e))return!1}else{var d=new Wn;if(i)var f=i(u,h,c,e,t,d);if(!(f===n?Or(h,u,3,i,d):f))return!1}}return!0}function Dr(e){return!(!ta(e)||(t=e,ke&&ke in t))&&(Jo(e)?Ve:me).test(js(e));var t}function Lr(e){return"function"==typeof e?e:null==e?il:"object"==typeof e?qo(e)?Fr(e[0],e[1]):jr(e):fl(e)}function Mr(e){if(!Ts(e))return mn(e);var t=[];for(var n in Ie(e))Me.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Pr(e){if(!ta(e))return function(e){var t=[];if(null!=e)for(var n in Ie(e))t.push(n);return t}(e);var t=Ts(e),n=[];for(var r in e)("constructor"!=r||!t&&Me.call(e,r))&&n.push(r);return n}function kr(e,t){return e<t}function Ur(e,t){var n=-1,r=Wo(e)?ie(e.length):[];return ur(e,function(e,i,s){r[++n]=t(e,i,s)}),r}function jr(e){var t=ls(e);return 1==t.length&&t[0][2]?bs(t[0][0],t[0][1]):function(n){return n===e||Rr(n,e,t)}}function Fr(e,t){return vs(e)&&ws(t)?bs(Us(e),t):function(r){var i=Na(r,e);return i===n&&i===t?Aa(r,e):Or(t,i,3)}}function Vr(e,t,r,i,s){e!==t&&gr(t,function(o,a){if(s||(s=new Wn),ta(o))!function(e,t,r,i,s,o,a){var l=Cs(e,r),c=Cs(t,r),u=a.get(c);if(u)Jn(e,r,u);else{var h=o?o(l,c,r+"",e,t,a):n,d=h===n;if(d){var f=qo(c),p=!f&&Go(c),m=!f&&!p&&ua(c);h=c,f||p||m?qo(l)?h=l:Yo(l)?h=Ni(l):p?(d=!1,h=Ti(c,!0)):m?(d=!1,h=bi(c,!0)):h=[]:sa(c)||$o(c)?(h=l,$o(l)?h=va(l):ta(l)&&!Jo(l)||(h=ps(c))):d=!1}d&&(a.set(c,h),s(h,c,i,o,a),a.delete(c)),Jn(e,r,h)}}(e,t,a,r,Vr,i,s);else{var l=i?i(Cs(e,a),o,a+"",e,t,s):n;l===n&&(l=o),Jn(e,a,l)}},La)}function Kr(e,t){var r=e.length;if(r)return gs(t+=t<0?r:0,r)?e[t]:n}function Br(e,t,n){t=t.length?Dt(t,function(e){return qo(e)?function(t){return Tr(t,1===e.length?e[0]:e)}:e}):[il];var r=-1;return t=Dt(t,Xt(os())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Ur(e,function(e,n,i){return{criteria:Dt(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,s=t.criteria,o=i.length,a=n.length;++r<o;){var l=Si(i[r],s[r]);if(l)return r>=a?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)})}function Hr(e,t,n){for(var r=-1,i=t.length,s={};++r<i;){var o=t[r],a=Tr(e,o);n(a,o)&&Qr(s,yi(o,e),a)}return s}function $r(e,t,n,r){var i=r?Kt:Vt,s=-1,o=t.length,a=e;for(e===t&&(t=Ni(t)),n&&(a=Dt(e,Xt(n)));++s<o;)for(var l=0,c=t[s],u=n?n(c):c;(l=i(a,u,l,r))>-1;)a!==e&&Ye.call(a,l,1),Ye.call(e,l,1);return e}function qr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==s){var s=i;gs(i)?Ye.call(e,i,1):ci(e,i)}}return e}function zr(e,t){return e+pt(_n()*(t-e+1))}function Wr(e,t){var n="";if(!e||t<1||t>u)return n;do{t%2&&(n+=e),(t=pt(t/2))&&(e+=e)}while(t);return n}function Yr(e,t){return xs(Ss(e,t,il),e+"")}function Gr(e){return Gn(Ka(e))}function Xr(e,t){var n=Ka(e);return Ds(n,sr(t,0,n.length))}function Qr(e,t,r,i){if(!ta(e))return e;for(var s=-1,o=(t=yi(t,e)).length,a=o-1,l=e;null!=l&&++s<o;){var c=Us(t[s]),u=r;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(s!=a){var h=l[c];(u=i?i(h,c,l):n)===n&&(u=ta(h)?h:gs(t[s+1])?[]:{})}Zn(l,c,u),l=l[c]}return e}var Jr=An?function(e,t){return An.set(e,t),e}:il,Zr=tt?function(e,t){return tt(e,"toString",{configurable:!0,enumerable:!1,value:tl(t),writable:!0})}:il;function ei(e){return Ds(Ka(e))}function ti(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=ie(i);++r<i;)s[r]=e[r+t];return s}function ni(e,t){var n;return ur(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function ri(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var s=r+i>>>1,o=e[s];null!==o&&!ca(o)&&(n?o<=t:o<t)?r=s+1:i=s}return i}return ii(e,t,il,n)}function ii(e,t,r,i){var s=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=r(t))!=t,l=null===t,c=ca(t),u=t===n;s<o;){var h=pt((s+o)/2),d=r(e[h]),f=d!==n,p=null===d,m=d==d,g=ca(d);if(a)var y=i||m;else y=u?m&&(i||f):l?m&&f&&(i||!p):c?m&&f&&!p&&(i||!g):!p&&!g&&(i?d<=t:d<t);y?s=h+1:o=h}return yn(o,4294967294)}function si(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var o=e[n],a=t?t(o):o;if(!n||!Ko(a,l)){var l=a;s[i++]=0===o?0:o}}return s}function oi(e){return"number"==typeof e?e:ca(e)?h:+e}function ai(e){if("string"==typeof e)return e;if(qo(e))return Dt(e,ai)+"";if(ca(e))return Un?Un.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function li(e,t,n){var r=-1,i=Ot,s=e.length,o=!0,a=[],l=a;if(n)o=!1,i=Rt;else if(s>=200){var c=t?null:Wi(e);if(c)return cn(c);o=!1,i=Jt,l=new zn}else l=t?[]:a;e:for(;++r<s;){var u=e[r],h=t?t(u):u;if(u=n||0!==u?u:0,o&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),a.push(u)}else i(l,h,n)||(l!==a&&l.push(h),a.push(u))}return a}function ci(e,t){return null==(e=Is(e,t=yi(t,e)))||delete e[Us(Xs(t))]}function ui(e,t,n,r){return Qr(e,t,n(Tr(e,t)),r)}function hi(e,t,n,r){for(var i=e.length,s=r?i:-1;(r?s--:++s<i)&&t(e[s],s,e););return n?ti(e,r?0:s,r?s+1:i):ti(e,r?s+1:0,r?i:s)}function di(e,t){var n=e;return n instanceof Bn&&(n=n.value()),Mt(t,function(e,t){return t.func.apply(t.thisArg,Lt([e],t.args))},n)}function fi(e,t,n){var r=e.length;if(r<2)return r?li(e[0]):[];for(var i=-1,s=ie(r);++i<r;)for(var o=e[i],a=-1;++a<r;)a!=i&&(s[i]=cr(s[i]||o,e[a],t,n));return li(mr(s,1),t,n)}function pi(e,t,r){for(var i=-1,s=e.length,o=t.length,a={};++i<s;){var l=i<o?t[i]:n;r(a,e[i],l)}return a}function mi(e){return Yo(e)?e:[]}function gi(e){return"function"==typeof e?e:il}function yi(e,t){return qo(e)?e:vs(e,t)?[e]:ks(Ea(e))}var vi=Yr;function Ei(e,t,r){var i=e.length;return r=r===n?i:r,!t&&r>=i?e:ti(e,t,r)}var _i=at||function(e){return dt.clearTimeout(e)};function Ti(e,t){if(t)return e.slice();var n=e.length,r=$e?$e(n):new e.constructor(n);return e.copy(r),r}function wi(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function bi(e,t){var n=t?wi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Si(e,t){if(e!==t){var r=e!==n,i=null===e,s=e==e,o=ca(e),a=t!==n,l=null===t,c=t==t,u=ca(t);if(!l&&!u&&!o&&e>t||o&&a&&c&&!l&&!u||i&&a&&c||!r&&c||!s)return 1;if(!i&&!o&&!u&&e<t||u&&r&&s&&!i&&!o||l&&r&&s||!a&&s||!c)return-1}return 0}function Ii(e,t,n,r){for(var i=-1,s=e.length,o=n.length,a=-1,l=t.length,c=gn(s-o,0),u=ie(l+c),h=!r;++a<l;)u[a]=t[a];for(;++i<o;)(h||i<s)&&(u[n[i]]=e[i]);for(;c--;)u[a++]=e[i++];return u}function Ci(e,t,n,r){for(var i=-1,s=e.length,o=-1,a=n.length,l=-1,c=t.length,u=gn(s-a,0),h=ie(u+c),d=!r;++i<u;)h[i]=e[i];for(var f=i;++l<c;)h[f+l]=t[l];for(;++o<a;)(d||i<s)&&(h[f+n[o]]=e[i++]);return h}function Ni(e,t){var n=-1,r=e.length;for(t||(t=ie(r));++n<r;)t[n]=e[n];return t}function Ai(e,t,r,i){var s=!r;r||(r={});for(var o=-1,a=t.length;++o<a;){var l=t[o],c=i?i(r[l],e[l],l,r,e):n;c===n&&(c=e[l]),s?rr(r,l,c):Zn(r,l,c)}return r}function xi(e,t){return function(n,r){var i=qo(n)?It:tr,s=t?t():{};return i(n,e,os(r,2),s)}}function Oi(e){return Yr(function(t,r){var i=-1,s=r.length,o=s>1?r[s-1]:n,a=s>2?r[2]:n;for(o=e.length>3&&"function"==typeof o?(s--,o):n,a&&ys(r[0],r[1],a)&&(o=s<3?n:o,s=1),t=Ie(t);++i<s;){var l=r[i];l&&e(t,l,i,o)}return t})}function Ri(e,t){return function(n,r){if(null==n)return n;if(!Wo(n))return e(n,r);for(var i=n.length,s=t?i:-1,o=Ie(n);(t?s--:++s<i)&&!1!==r(o[s],s,o););return n}}function Di(e){return function(t,n,r){for(var i=-1,s=Ie(t),o=r(t),a=o.length;a--;){var l=o[e?a:++i];if(!1===n(s[l],l,s))break}return t}}function Li(e){return function(t){var r=sn(t=Ea(t))?hn(t):n,i=r?r[0]:t.charAt(0),s=r?Ei(r,1).join(""):t.slice(1);return i[e]()+s}}function Mi(e){return function(t){return Mt(Ja($a(t).replace(Qe,"")),e,"")}}function Pi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Fn(e.prototype),r=e.apply(n,t);return ta(r)?r:n}}function ki(e){return function(t,r,i){var s=Ie(t);if(!Wo(t)){var o=os(r,3);t=Da(t),r=function(e){return o(s[e],e,s)}}var a=e(t,r,i);return a>-1?s[o?t[a]:a]:n}}function Ui(e){return es(function(t){var i=t.length,s=i,o=Kn.prototype.thru;for(e&&t.reverse();s--;){var a=t[s];if("function"!=typeof a)throw new Ae(r);if(o&&!l&&"wrapper"==is(a))var l=new Kn([],!0)}for(s=l?s:i;++s<i;){var c=is(a=t[s]),u="wrapper"==c?rs(a):n;l=u&&Es(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?l[is(u[0])].apply(l,u[3]):1==a.length&&Es(a)?l[c]():l.thru(a)}return function(){var e=arguments,n=e[0];if(l&&1==e.length&&qo(n))return l.plant(n).value();for(var r=0,s=i?t[r].apply(this,e):n;++r<i;)s=t[r].call(this,s);return s}})}function ji(e,t,r,i,s,o,l,c,u,h){var d=t&a,f=1&t,p=2&t,m=24&t,g=512&t,y=p?n:Pi(e);return function a(){for(var v=arguments.length,E=ie(v),_=v;_--;)E[_]=arguments[_];if(m)var T=ss(a),w=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(E,T);if(i&&(E=Ii(E,i,s,m)),o&&(E=Ci(E,o,l,m)),v-=w,m&&v<h){var b=ln(E,T);return qi(e,t,ji,a.placeholder,r,E,b,c,u,h-v)}var S=f?r:this,I=p?S[e]:e;return v=E.length,c?E=function(e,t){for(var r=e.length,i=yn(t.length,r),s=Ni(e);i--;){var o=t[i];e[i]=gs(o,r)?s[o]:n}return e}(E,c):g&&v>1&&E.reverse(),d&&u<v&&(E.length=u),this&&this!==dt&&this instanceof a&&(I=y||Pi(I)),I.apply(S,E)}}function Fi(e,t){return function(n,r){return function(e,t,n,r){return vr(e,function(e,i,s){t(r,n(e),i,s)}),r}(n,e,t(r),{})}}function Vi(e,t){return function(r,i){var s;if(r===n&&i===n)return t;if(r!==n&&(s=r),i!==n){if(s===n)return i;"string"==typeof r||"string"==typeof i?(r=ai(r),i=ai(i)):(r=oi(r),i=oi(i)),s=e(r,i)}return s}}function Ki(e){return es(function(t){return t=Dt(t,Xt(os())),Yr(function(n){var r=this;return e(t,function(e){return St(e,r,n)})})})}function Bi(e,t){var r=(t=t===n?" ":ai(t)).length;if(r<2)return r?Wr(t,e):t;var i=Wr(t,ft(e/un(t)));return sn(t)?Ei(hn(i),0,e).join(""):i.slice(0,e)}function Hi(e){return function(t,r,i){return i&&"number"!=typeof i&&ys(t,r,i)&&(r=i=n),t=pa(t),r===n?(r=t,t=0):r=pa(r),function(e,t,n,r){for(var i=-1,s=gn(ft((t-e)/(n||1)),0),o=ie(s);s--;)o[r?s:++i]=e,e+=n;return o}(t,r,i=i===n?t<r?1:-1:pa(i),e)}}function $i(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ya(t),n=ya(n)),e(t,n)}}function qi(e,t,r,i,s,a,l,c,u,h){var d=8&t;t|=d?o:64,4&(t&=~(d?64:o))||(t&=-4);var f=[e,t,s,d?a:n,d?l:n,d?n:a,d?n:l,c,u,h],p=r.apply(n,f);return Es(e)&&Ns(p,f),p.placeholder=i,Os(p,e,t)}function zi(e){var t=Se[e];return function(e,n){if(e=ya(e),(n=null==n?0:yn(ma(n),292))&&Ut(e)){var r=(Ea(e)+"e").split("e");return+((r=(Ea(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Wi=In&&1/cn(new In([,-0]))[1]==c?function(e){return new In(e)}:cl;function Yi(e){return function(t){var n=ds(t);return n==T?on(t):n==C?function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}(t):function(e,t){return Dt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Gi(e,t,i,c,u,h,d,f){var p=2&t;if(!p&&"function"!=typeof e)throw new Ae(r);var m=c?c.length:0;if(m||(t&=-97,c=u=n),d=d===n?d:gn(ma(d),0),f=f===n?f:ma(f),m-=u?u.length:0,64&t){var g=c,y=u;c=u=n}var v=p?n:rs(e),E=[e,t,i,c,u,g,y,h,d,f];if(v&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,c=r==a&&8==n||r==a&&n==l&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!c)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var u=t[3];if(u){var h=e[3];e[3]=h?Ii(h,u,t[4]):u,e[4]=h?ln(e[3],s):t[4]}(u=t[5])&&(h=e[5],e[5]=h?Ci(h,u,t[6]):u,e[6]=h?ln(e[5],s):t[6]),(u=t[7])&&(e[7]=u),r&a&&(e[8]=null==e[8]?t[8]:yn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(E,v),e=E[0],t=E[1],i=E[2],c=E[3],u=E[4],!(f=E[9]=E[9]===n?p?0:e.length:gn(E[9]-m,0))&&24&t&&(t&=-25),t&&1!=t)_=8==t||16==t?function(e,t,r){var i=Pi(e);return function s(){for(var o=arguments.length,a=ie(o),l=o,c=ss(s);l--;)a[l]=arguments[l];var u=o<3&&a[0]!==c&&a[o-1]!==c?[]:ln(a,c);return(o-=u.length)<r?qi(e,t,ji,s.placeholder,n,a,u,n,n,r-o):St(this&&this!==dt&&this instanceof s?i:e,this,a)}}(e,t,f):t!=o&&33!=t||u.length?ji.apply(n,E):function(e,t,n,r){var i=1&t,s=Pi(e);return function t(){for(var o=-1,a=arguments.length,l=-1,c=r.length,u=ie(c+a),h=this&&this!==dt&&this instanceof t?s:e;++l<c;)u[l]=r[l];for(;a--;)u[l++]=arguments[++o];return St(h,i?n:this,u)}}(e,t,i,c);else var _=function(e,t,n){var r=1&t,i=Pi(e);return function t(){return(this&&this!==dt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,i);return Os((v?Jr:Ns)(_,E),e,t)}function Xi(e,t,r,i){return e===n||Ko(e,Re[r])&&!Me.call(i,r)?t:e}function Qi(e,t,r,i,s,o){return ta(e)&&ta(t)&&(o.set(t,e),Vr(e,t,n,Qi,o),o.delete(t)),e}function Ji(e){return sa(e)?n:e}function Zi(e,t,r,i,s,o){var a=1&r,l=e.length,c=t.length;if(l!=c&&!(a&&c>l))return!1;var u=o.get(e),h=o.get(t);if(u&&h)return u==t&&h==e;var d=-1,f=!0,p=2&r?new zn:n;for(o.set(e,t),o.set(t,e);++d<l;){var m=e[d],g=t[d];if(i)var y=a?i(g,m,d,t,e,o):i(m,g,d,e,t,o);if(y!==n){if(y)continue;f=!1;break}if(p){if(!kt(t,function(e,t){if(!Jt(p,t)&&(m===e||s(m,e,r,i,o)))return p.push(t)})){f=!1;break}}else if(m!==g&&!s(m,g,r,i,o)){f=!1;break}}return o.delete(e),o.delete(t),f}function es(e){return xs(Ss(e,n,qs),e+"")}function ts(e){return wr(e,Da,us)}function ns(e){return wr(e,La,hs)}var rs=An?function(e){return An.get(e)}:cl;function is(e){for(var t=e.name+"",n=xn[t],r=Me.call(xn,t)?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==e)return i.name}return t}function ss(e){return(Me.call(jn,"placeholder")?jn:e).placeholder}function os(){var e=jn.iteratee||sl;return e=e===sl?Lr:e,arguments.length?e(arguments[0],arguments[1]):e}function as(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ls(e){for(var t=Da(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,ws(i)]}return t}function cs(e,t){var r=function(e,t){return null==e?n:e[t]}(e,t);return Dr(r)?r:n}var us=gt?function(e){return null==e?[]:(e=Ie(e),xt(gt(e),function(t){return We.call(e,t)}))}:gl,hs=gt?function(e){for(var t=[];e;)Lt(t,us(e)),e=qe(e);return t}:gl,ds=br;function fs(e,t,n){for(var r=-1,i=(t=yi(t,e)).length,s=!1;++r<i;){var o=Us(t[r]);if(!(s=null!=e&&n(e,o)))break;e=e[o]}return s||++r!=i?s:!!(i=null==e?0:e.length)&&ea(i)&&gs(o,i)&&(qo(e)||$o(e))}function ps(e){return"function"!=typeof e.constructor||Ts(e)?{}:Fn(qe(e))}function ms(e){return qo(e)||$o(e)||!!(Ge&&e&&e[Ge])}function gs(e,t){var n=typeof e;return!!(t=null==t?u:t)&&("number"==n||"symbol"!=n&&ye.test(e))&&e>-1&&e%1==0&&e<t}function ys(e,t,n){if(!ta(n))return!1;var r=typeof t;return!!("number"==r?Wo(n)&&gs(t,n.length):"string"==r&&t in n)&&Ko(n[t],e)}function vs(e,t){if(qo(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ca(e))||Z.test(e)||!J.test(e)||null!=t&&e in Ie(t)}function Es(e){var t=is(e),n=jn[t];if("function"!=typeof n||!(t in Bn.prototype))return!1;if(e===n)return!0;var r=rs(n);return!!r&&e===r[0]}(wn&&ds(new wn(new ArrayBuffer(1)))!=D||bn&&ds(new bn)!=T||Sn&&ds(Sn.resolve())!=S||In&&ds(new In)!=C||Cn&&ds(new Cn)!=x)&&(ds=function(e){var t=br(e),r=t==b?e.constructor:n,i=r?js(r):"";if(i)switch(i){case On:return D;case Rn:return T;case Dn:return S;case Ln:return C;case Mn:return x}return t});var _s=De?Jo:yl;function Ts(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Re)}function ws(e){return e==e&&!ta(e)}function bs(e,t){return function(r){return null!=r&&r[e]===t&&(t!==n||e in Ie(r))}}function Ss(e,t,r){return t=gn(t===n?e.length-1:t,0),function(){for(var n=arguments,i=-1,s=gn(n.length-t,0),o=ie(s);++i<s;)o[i]=n[t+i];i=-1;for(var a=ie(t+1);++i<t;)a[i]=n[i];return a[t]=r(o),St(e,this,a)}}function Is(e,t){return t.length<2?e:Tr(e,ti(t,0,-1))}function Cs(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ns=Rs(Jr),As=ht||function(e,t){return dt.setTimeout(e,t)},xs=Rs(Zr);function Os(e,t,n){var r=t+"";return xs(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(se,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Ct(f,function(n){var r="_."+n[0];t&n[1]&&!Ot(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(oe);return t?t[1].split(ae):[]}(r),n)))}function Rs(e){var t=0,r=0;return function(){var i=vn(),s=16-(i-r);if(r=i,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(n,arguments)}}function Ds(e,t){var r=-1,i=e.length,s=i-1;for(t=t===n?i:t;++r<t;){var o=zr(r,s),a=e[o];e[o]=e[r],e[r]=a}return e.length=t,e}var Ls,Ms,Ps,ks=(Ls=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,function(e,n,r,i){t.push(r?i.replace(ue,"$1"):n||e)}),t},Ms=Po(Ls,function(e){return 500===Ps.size&&Ps.clear(),e}),Ps=Ms.cache,Ms);function Us(e){if("string"==typeof e||ca(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function js(e){if(null!=e){try{return Le.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Fs(e){if(e instanceof Bn)return e.clone();var t=new Kn(e.__wrapped__,e.__chain__);return t.__actions__=Ni(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Vs=Yr(function(e,t){return Yo(e)?cr(e,mr(t,1,Yo,!0)):[]}),Ks=Yr(function(e,t){var r=Xs(t);return Yo(r)&&(r=n),Yo(e)?cr(e,mr(t,1,Yo,!0),os(r,2)):[]}),Bs=Yr(function(e,t){var r=Xs(t);return Yo(r)&&(r=n),Yo(e)?cr(e,mr(t,1,Yo,!0),n,r):[]});function Hs(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ma(n);return i<0&&(i=gn(r+i,0)),Ft(e,os(t,3),i)}function $s(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var s=i-1;return r!==n&&(s=ma(r),s=r<0?gn(i+s,0):yn(s,i-1)),Ft(e,os(t,3),s,!0)}function qs(e){return null!=e&&e.length?mr(e,1):[]}function zs(e){return e&&e.length?e[0]:n}var Ws=Yr(function(e){var t=Dt(e,mi);return t.length&&t[0]===e[0]?Nr(t):[]}),Ys=Yr(function(e){var t=Xs(e),r=Dt(e,mi);return t===Xs(r)?t=n:r.pop(),r.length&&r[0]===e[0]?Nr(r,os(t,2)):[]}),Gs=Yr(function(e){var t=Xs(e),r=Dt(e,mi);return(t="function"==typeof t?t:n)&&r.pop(),r.length&&r[0]===e[0]?Nr(r,n,t):[]});function Xs(e){var t=null==e?0:e.length;return t?e[t-1]:n}var Qs=Yr(Js);function Js(e,t){return e&&e.length&&t&&t.length?$r(e,t):e}var Zs=es(function(e,t){var n=null==e?0:e.length,r=ir(e,t);return qr(e,Dt(t,function(e){return gs(e,n)?+e:e}).sort(Si)),r});function eo(e){return null==e?e:Tn.call(e)}var to=Yr(function(e){return li(mr(e,1,Yo,!0))}),no=Yr(function(e){var t=Xs(e);return Yo(t)&&(t=n),li(mr(e,1,Yo,!0),os(t,2))}),ro=Yr(function(e){var t=Xs(e);return t="function"==typeof t?t:n,li(mr(e,1,Yo,!0),n,t)});function io(e){if(!e||!e.length)return[];var t=0;return e=xt(e,function(e){if(Yo(e))return t=gn(e.length,t),!0}),Yt(t,function(t){return Dt(e,$t(t))})}function so(e,t){if(!e||!e.length)return[];var r=io(e);return null==t?r:Dt(r,function(e){return St(t,n,e)})}var oo=Yr(function(e,t){return Yo(e)?cr(e,t):[]}),ao=Yr(function(e){return fi(xt(e,Yo))}),lo=Yr(function(e){var t=Xs(e);return Yo(t)&&(t=n),fi(xt(e,Yo),os(t,2))}),co=Yr(function(e){var t=Xs(e);return t="function"==typeof t?t:n,fi(xt(e,Yo),n,t)}),uo=Yr(io),ho=Yr(function(e){var t=e.length,r=t>1?e[t-1]:n;return r="function"==typeof r?(e.pop(),r):n,so(e,r)});function fo(e){var t=jn(e);return t.__chain__=!0,t}function po(e,t){return t(e)}var mo=es(function(e){var t=e.length,r=t?e[0]:0,i=this.__wrapped__,s=function(t){return ir(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Bn&&gs(r)?((i=i.slice(r,+r+(t?1:0))).__actions__.push({func:po,args:[s],thisArg:n}),new Kn(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(n),e})):this.thru(s)}),go=xi(function(e,t,n){Me.call(e,n)?++e[n]:rr(e,n,1)}),yo=ki(Hs),vo=ki($s);function Eo(e,t){return(qo(e)?Ct:ur)(e,os(t,3))}function _o(e,t){return(qo(e)?Nt:hr)(e,os(t,3))}var To=xi(function(e,t,n){Me.call(e,n)?e[n].push(t):rr(e,n,[t])}),wo=Yr(function(e,t,n){var r=-1,i="function"==typeof t,s=Wo(e)?ie(e.length):[];return ur(e,function(e){s[++r]=i?St(t,e,n):Ar(e,t,n)}),s}),bo=xi(function(e,t,n){rr(e,n,t)});function So(e,t){return(qo(e)?Dt:Ur)(e,os(t,3))}var Io=xi(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Co=Yr(function(e,t){if(null==e)return[];var n=t.length;return n>1&&ys(e,t[0],t[1])?t=[]:n>2&&ys(t[0],t[1],t[2])&&(t=[t[0]]),Br(e,mr(t,1),[])}),No=ut||function(){return dt.Date.now()};function Ao(e,t,r){return t=r?n:t,t=e&&null==t?e.length:t,Gi(e,a,n,n,n,n,t)}function xo(e,t){var i;if("function"!=typeof t)throw new Ae(r);return e=ma(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=n),i}}var Oo=Yr(function(e,t,n){var r=1;if(n.length){var i=ln(n,ss(Oo));r|=o}return Gi(e,r,t,n,i)}),Ro=Yr(function(e,t,n){var r=3;if(n.length){var i=ln(n,ss(Ro));r|=o}return Gi(t,r,e,n,i)});function Do(e,t,i){var s,o,a,l,c,u,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new Ae(r);function m(t){var r=s,i=o;return s=o=n,h=t,l=e.apply(i,r)}function g(e){var r=e-u;return u===n||r>=t||r<0||f&&e-h>=a}function y(){var e=No();if(g(e))return v(e);c=As(y,function(e){var n=t-(e-u);return f?yn(n,a-(e-h)):n}(e))}function v(e){return c=n,p&&s?m(e):(s=o=n,l)}function E(){var e=No(),r=g(e);if(s=arguments,o=this,u=e,r){if(c===n)return function(e){return h=e,c=As(y,t),d?m(e):l}(u);if(f)return _i(c),c=As(y,t),m(u)}return c===n&&(c=As(y,t)),l}return t=ya(t)||0,ta(i)&&(d=!!i.leading,a=(f="maxWait"in i)?gn(ya(i.maxWait)||0,t):a,p="trailing"in i?!!i.trailing:p),E.cancel=function(){c!==n&&_i(c),h=0,s=u=o=c=n},E.flush=function(){return c===n?l:v(No())},E}var Lo=Yr(function(e,t){return lr(e,1,t)}),Mo=Yr(function(e,t,n){return lr(e,ya(t)||0,n)});function Po(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ae(r);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=e.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(Po.Cache||qn),n}function ko(e){if("function"!=typeof e)throw new Ae(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Po.Cache=qn;var Uo=vi(function(e,t){var n=(t=1==t.length&&qo(t[0])?Dt(t[0],Xt(os())):Dt(mr(t,1),Xt(os()))).length;return Yr(function(r){for(var i=-1,s=yn(r.length,n);++i<s;)r[i]=t[i].call(this,r[i]);return St(e,this,r)})}),jo=Yr(function(e,t){var r=ln(t,ss(jo));return Gi(e,o,n,t,r)}),Fo=Yr(function(e,t){var r=ln(t,ss(Fo));return Gi(e,64,n,t,r)}),Vo=es(function(e,t){return Gi(e,l,n,n,n,t)});function Ko(e,t){return e===t||e!=e&&t!=t}var Bo=$i(Sr),Ho=$i(function(e,t){return e>=t}),$o=xr(function(){return arguments}())?xr:function(e){return na(e)&&Me.call(e,"callee")&&!We.call(e,"callee")},qo=ie.isArray,zo=vt?Xt(vt):function(e){return na(e)&&br(e)==O};function Wo(e){return null!=e&&ea(e.length)&&!Jo(e)}function Yo(e){return na(e)&&Wo(e)}var Go=yt||yl,Xo=Et?Xt(Et):function(e){return na(e)&&br(e)==y};function Qo(e){if(!na(e))return!1;var t=br(e);return t==v||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!sa(e)}function Jo(e){if(!ta(e))return!1;var t=br(e);return t==E||t==_||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Zo(e){return"number"==typeof e&&e==ma(e)}function ea(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=u}function ta(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function na(e){return null!=e&&"object"==typeof e}var ra=_t?Xt(_t):function(e){return na(e)&&ds(e)==T};function ia(e){return"number"==typeof e||na(e)&&br(e)==w}function sa(e){if(!na(e)||br(e)!=b)return!1;var t=qe(e);if(null===t)return!0;var n=Me.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Le.call(n)==je}var oa=Tt?Xt(Tt):function(e){return na(e)&&br(e)==I},aa=wt?Xt(wt):function(e){return na(e)&&ds(e)==C};function la(e){return"string"==typeof e||!qo(e)&&na(e)&&br(e)==N}function ca(e){return"symbol"==typeof e||na(e)&&br(e)==A}var ua=bt?Xt(bt):function(e){return na(e)&&ea(e.length)&&!!st[br(e)]},ha=$i(kr),da=$i(function(e,t){return e<=t});function fa(e){if(!e)return[];if(Wo(e))return la(e)?hn(e):Ni(e);if(Xe&&e[Xe])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Xe]());var t=ds(e);return(t==T?on:t==C?cn:Ka)(e)}function pa(e){return e?(e=ya(e))===c||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ma(e){var t=pa(e),n=t%1;return t==t?n?t-n:t:0}function ga(e){return e?sr(ma(e),0,d):0}function ya(e){if("number"==typeof e)return e;if(ca(e))return h;if(ta(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ta(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Gt(e);var n=pe.test(e);return n||ge.test(e)?ct(e.slice(2),n?2:8):fe.test(e)?h:+e}function va(e){return Ai(e,La(e))}function Ea(e){return null==e?"":ai(e)}var _a=Oi(function(e,t){if(Ts(t)||Wo(t))Ai(t,Da(t),e);else for(var n in t)Me.call(t,n)&&Zn(e,n,t[n])}),Ta=Oi(function(e,t){Ai(t,La(t),e)}),wa=Oi(function(e,t,n,r){Ai(t,La(t),e,r)}),ba=Oi(function(e,t,n,r){Ai(t,Da(t),e,r)}),Sa=es(ir),Ia=Yr(function(e,t){e=Ie(e);var r=-1,i=t.length,s=i>2?t[2]:n;for(s&&ys(t[0],t[1],s)&&(i=1);++r<i;)for(var o=t[r],a=La(o),l=-1,c=a.length;++l<c;){var u=a[l],h=e[u];(h===n||Ko(h,Re[u])&&!Me.call(e,u))&&(e[u]=o[u])}return e}),Ca=Yr(function(e){return e.push(n,Qi),St(Pa,n,e)});function Na(e,t,r){var i=null==e?n:Tr(e,t);return i===n?r:i}function Aa(e,t){return null!=e&&fs(e,t,Cr)}var xa=Fi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),e[t]=n},tl(il)),Oa=Fi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ue.call(t)),Me.call(e,t)?e[t].push(n):e[t]=[n]},os),Ra=Yr(Ar);function Da(e){return Wo(e)?Yn(e):Mr(e)}function La(e){return Wo(e)?Yn(e,!0):Pr(e)}var Ma=Oi(function(e,t,n){Vr(e,t,n)}),Pa=Oi(function(e,t,n,r){Vr(e,t,n,r)}),ka=es(function(e,t){var n={};if(null==e)return n;var r=!1;t=Dt(t,function(t){return t=yi(t,e),r||(r=t.length>1),t}),Ai(e,ns(e),n),r&&(n=or(n,7,Ji));for(var i=t.length;i--;)ci(n,t[i]);return n}),Ua=es(function(e,t){return null==e?{}:function(e,t){return Hr(e,t,function(t,n){return Aa(e,n)})}(e,t)});function ja(e,t){if(null==e)return{};var n=Dt(ns(e),function(e){return[e]});return t=os(t),Hr(e,n,function(e,n){return t(e,n[0])})}var Fa=Yi(Da),Va=Yi(La);function Ka(e){return null==e?[]:Qt(e,Da(e))}var Ba=Mi(function(e,t,n){return t=t.toLowerCase(),e+(n?Ha(t):t)});function Ha(e){return Qa(Ea(e).toLowerCase())}function $a(e){return(e=Ea(e))&&e.replace(ve,tn).replace(Je,"")}var qa=Mi(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),za=Mi(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Wa=Li("toLowerCase"),Ya=Mi(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Ga=Mi(function(e,t,n){return e+(n?" ":"")+Qa(t)}),Xa=Mi(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Qa=Li("toUpperCase");function Ja(e,t,r){return e=Ea(e),(t=r?n:t)===n?function(e){return nt.test(e)}(e)?function(e){return e.match(et)||[]}(e):function(e){return e.match(le)||[]}(e):e.match(t)||[]}var Za=Yr(function(e,t){try{return St(e,n,t)}catch(r){return Qo(r)?r:new we(r)}}),el=es(function(e,t){return Ct(t,function(t){t=Us(t),rr(e,t,Oo(e[t],e))}),e});function tl(e){return function(){return e}}var nl=Ui(),rl=Ui(!0);function il(e){return e}function sl(e){return Lr("function"==typeof e?e:or(e,1))}var ol=Yr(function(e,t){return function(n){return Ar(n,e,t)}}),al=Yr(function(e,t){return function(n){return Ar(e,n,t)}});function ll(e,t,n){var r=Da(t),i=_r(t,r);null!=n||ta(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=_r(t,Da(t)));var s=!(ta(n)&&"chain"in n&&!n.chain),o=Jo(e);return Ct(i,function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__);return(n.__actions__=Ni(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Lt([this.value()],arguments))})}),e}function cl(){}var ul=Ki(Dt),hl=Ki(At),dl=Ki(kt);function fl(e){return vs(e)?$t(Us(e)):function(e){return function(t){return Tr(t,e)}}(e)}var pl=Hi(),ml=Hi(!0);function gl(){return[]}function yl(){return!1}var vl,El=Vi(function(e,t){return e+t},0),_l=zi("ceil"),Tl=Vi(function(e,t){return e/t},1),wl=zi("floor"),bl=Vi(function(e,t){return e*t},1),Sl=zi("round"),Il=Vi(function(e,t){return e-t},0);return jn.after=function(e,t){if("function"!=typeof t)throw new Ae(r);return e=ma(e),function(){if(--e<1)return t.apply(this,arguments)}},jn.ary=Ao,jn.assign=_a,jn.assignIn=Ta,jn.assignInWith=wa,jn.assignWith=ba,jn.at=Sa,jn.before=xo,jn.bind=Oo,jn.bindAll=el,jn.bindKey=Ro,jn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return qo(e)?e:[e]},jn.chain=fo,jn.chunk=function(e,t,r){t=(r?ys(e,t,r):t===n)?1:gn(ma(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var s=0,o=0,a=ie(ft(i/t));s<i;)a[o++]=ti(e,s,s+=t);return a},jn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var s=e[t];s&&(i[r++]=s)}return i},jn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=ie(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Lt(qo(n)?Ni(n):[n],mr(t,1))},jn.cond=function(e){var t=null==e?0:e.length,n=os();return e=t?Dt(e,function(e){if("function"!=typeof e[1])throw new Ae(r);return[n(e[0]),e[1]]}):[],Yr(function(n){for(var r=-1;++r<t;){var i=e[r];if(St(i[0],this,n))return St(i[1],this,n)}})},jn.conforms=function(e){return function(e){var t=Da(e);return function(n){return ar(n,e,t)}}(or(e,1))},jn.constant=tl,jn.countBy=go,jn.create=function(e,t){var n=Fn(e);return null==t?n:nr(n,t)},jn.curry=function e(t,r,i){var s=Gi(t,8,n,n,n,n,n,r=i?n:r);return s.placeholder=e.placeholder,s},jn.curryRight=function e(t,r,i){var s=Gi(t,16,n,n,n,n,n,r=i?n:r);return s.placeholder=e.placeholder,s},jn.debounce=Do,jn.defaults=Ia,jn.defaultsDeep=Ca,jn.defer=Lo,jn.delay=Mo,jn.difference=Vs,jn.differenceBy=Ks,jn.differenceWith=Bs,jn.drop=function(e,t,r){var i=null==e?0:e.length;return i?ti(e,(t=r||t===n?1:ma(t))<0?0:t,i):[]},jn.dropRight=function(e,t,r){var i=null==e?0:e.length;return i?ti(e,0,(t=i-(t=r||t===n?1:ma(t)))<0?0:t):[]},jn.dropRightWhile=function(e,t){return e&&e.length?hi(e,os(t,3),!0,!0):[]},jn.dropWhile=function(e,t){return e&&e.length?hi(e,os(t,3),!0):[]},jn.fill=function(e,t,r,i){var s=null==e?0:e.length;return s?(r&&"number"!=typeof r&&ys(e,t,r)&&(r=0,i=s),function(e,t,r,i){var s=e.length;for((r=ma(r))<0&&(r=-r>s?0:s+r),(i=i===n||i>s?s:ma(i))<0&&(i+=s),i=r>i?0:ga(i);r<i;)e[r++]=t;return e}(e,t,r,i)):[]},jn.filter=function(e,t){return(qo(e)?xt:pr)(e,os(t,3))},jn.flatMap=function(e,t){return mr(So(e,t),1)},jn.flatMapDeep=function(e,t){return mr(So(e,t),c)},jn.flatMapDepth=function(e,t,r){return r=r===n?1:ma(r),mr(So(e,t),r)},jn.flatten=qs,jn.flattenDeep=function(e){return null!=e&&e.length?mr(e,c):[]},jn.flattenDepth=function(e,t){return null!=e&&e.length?mr(e,t=t===n?1:ma(t)):[]},jn.flip=function(e){return Gi(e,512)},jn.flow=nl,jn.flowRight=rl,jn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},jn.functions=function(e){return null==e?[]:_r(e,Da(e))},jn.functionsIn=function(e){return null==e?[]:_r(e,La(e))},jn.groupBy=To,jn.initial=function(e){return null!=e&&e.length?ti(e,0,-1):[]},jn.intersection=Ws,jn.intersectionBy=Ys,jn.intersectionWith=Gs,jn.invert=xa,jn.invertBy=Oa,jn.invokeMap=wo,jn.iteratee=sl,jn.keyBy=bo,jn.keys=Da,jn.keysIn=La,jn.map=So,jn.mapKeys=function(e,t){var n={};return t=os(t,3),vr(e,function(e,r,i){rr(n,t(e,r,i),e)}),n},jn.mapValues=function(e,t){var n={};return t=os(t,3),vr(e,function(e,r,i){rr(n,r,t(e,r,i))}),n},jn.matches=function(e){return jr(or(e,1))},jn.matchesProperty=function(e,t){return Fr(e,or(t,1))},jn.memoize=Po,jn.merge=Ma,jn.mergeWith=Pa,jn.method=ol,jn.methodOf=al,jn.mixin=ll,jn.negate=ko,jn.nthArg=function(e){return e=ma(e),Yr(function(t){return Kr(t,e)})},jn.omit=ka,jn.omitBy=function(e,t){return ja(e,ko(os(t)))},jn.once=function(e){return xo(2,e)},jn.orderBy=function(e,t,r,i){return null==e?[]:(qo(t)||(t=null==t?[]:[t]),qo(r=i?n:r)||(r=null==r?[]:[r]),Br(e,t,r))},jn.over=ul,jn.overArgs=Uo,jn.overEvery=hl,jn.overSome=dl,jn.partial=jo,jn.partialRight=Fo,jn.partition=Io,jn.pick=Ua,jn.pickBy=ja,jn.property=fl,jn.propertyOf=function(e){return function(t){return null==e?n:Tr(e,t)}},jn.pull=Qs,jn.pullAll=Js,jn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?$r(e,t,os(n,2)):e},jn.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?$r(e,t,n,r):e},jn.pullAt=Zs,jn.range=pl,jn.rangeRight=ml,jn.rearg=Vo,jn.reject=function(e,t){return(qo(e)?xt:pr)(e,ko(os(t,3)))},jn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],s=e.length;for(t=os(t,3);++r<s;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return qr(e,i),n},jn.rest=function(e,t){if("function"!=typeof e)throw new Ae(r);return Yr(e,t=t===n?t:ma(t))},jn.reverse=eo,jn.sampleSize=function(e,t,r){return t=(r?ys(e,t,r):t===n)?1:ma(t),(qo(e)?Xn:Xr)(e,t)},jn.set=function(e,t,n){return null==e?e:Qr(e,t,n)},jn.setWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:Qr(e,t,r,i)},jn.shuffle=function(e){return(qo(e)?Qn:ei)(e)},jn.slice=function(e,t,r){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&ys(e,t,r)?(t=0,r=i):(t=null==t?0:ma(t),r=r===n?i:ma(r)),ti(e,t,r)):[]},jn.sortBy=Co,jn.sortedUniq=function(e){return e&&e.length?si(e):[]},jn.sortedUniqBy=function(e,t){return e&&e.length?si(e,os(t,2)):[]},jn.split=function(e,t,r){return r&&"number"!=typeof r&&ys(e,t,r)&&(t=r=n),(r=r===n?d:r>>>0)?(e=Ea(e))&&("string"==typeof t||null!=t&&!oa(t))&&!(t=ai(t))&&sn(e)?Ei(hn(e),0,r):e.split(t,r):[]},jn.spread=function(e,t){if("function"!=typeof e)throw new Ae(r);return t=null==t?0:gn(ma(t),0),Yr(function(n){var r=n[t],i=Ei(n,0,t);return r&&Lt(i,r),St(e,this,i)})},jn.tail=function(e){var t=null==e?0:e.length;return t?ti(e,1,t):[]},jn.take=function(e,t,r){return e&&e.length?ti(e,0,(t=r||t===n?1:ma(t))<0?0:t):[]},jn.takeRight=function(e,t,r){var i=null==e?0:e.length;return i?ti(e,(t=i-(t=r||t===n?1:ma(t)))<0?0:t,i):[]},jn.takeRightWhile=function(e,t){return e&&e.length?hi(e,os(t,3),!1,!0):[]},jn.takeWhile=function(e,t){return e&&e.length?hi(e,os(t,3)):[]},jn.tap=function(e,t){return t(e),e},jn.throttle=function(e,t,n){var i=!0,s=!0;if("function"!=typeof e)throw new Ae(r);return ta(n)&&(i="leading"in n?!!n.leading:i,s="trailing"in n?!!n.trailing:s),Do(e,t,{leading:i,maxWait:t,trailing:s})},jn.thru=po,jn.toArray=fa,jn.toPairs=Fa,jn.toPairsIn=Va,jn.toPath=function(e){return qo(e)?Dt(e,Us):ca(e)?[e]:Ni(ks(Ea(e)))},jn.toPlainObject=va,jn.transform=function(e,t,n){var r=qo(e),i=r||Go(e)||ua(e);if(t=os(t,4),null==n){var s=e&&e.constructor;n=i?r?new s:[]:ta(e)&&Jo(s)?Fn(qe(e)):{}}return(i?Ct:vr)(e,function(e,r,i){return t(n,e,r,i)}),n},jn.unary=function(e){return Ao(e,1)},jn.union=to,jn.unionBy=no,jn.unionWith=ro,jn.uniq=function(e){return e&&e.length?li(e):[]},jn.uniqBy=function(e,t){return e&&e.length?li(e,os(t,2)):[]},jn.uniqWith=function(e,t){return t="function"==typeof t?t:n,e&&e.length?li(e,n,t):[]},jn.unset=function(e,t){return null==e||ci(e,t)},jn.unzip=io,jn.unzipWith=so,jn.update=function(e,t,n){return null==e?e:ui(e,t,gi(n))},jn.updateWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:ui(e,t,gi(r),i)},jn.values=Ka,jn.valuesIn=function(e){return null==e?[]:Qt(e,La(e))},jn.without=oo,jn.words=Ja,jn.wrap=function(e,t){return jo(gi(t),e)},jn.xor=ao,jn.xorBy=lo,jn.xorWith=co,jn.zip=uo,jn.zipObject=function(e,t){return pi(e||[],t||[],Zn)},jn.zipObjectDeep=function(e,t){return pi(e||[],t||[],Qr)},jn.zipWith=ho,jn.entries=Fa,jn.entriesIn=Va,jn.extend=Ta,jn.extendWith=wa,ll(jn,jn),jn.add=El,jn.attempt=Za,jn.camelCase=Ba,jn.capitalize=Ha,jn.ceil=_l,jn.clamp=function(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=(r=ya(r))==r?r:0),t!==n&&(t=(t=ya(t))==t?t:0),sr(ya(e),t,r)},jn.clone=function(e){return or(e,4)},jn.cloneDeep=function(e){return or(e,5)},jn.cloneDeepWith=function(e,t){return or(e,5,t="function"==typeof t?t:n)},jn.cloneWith=function(e,t){return or(e,4,t="function"==typeof t?t:n)},jn.conformsTo=function(e,t){return null==t||ar(e,t,Da(t))},jn.deburr=$a,jn.defaultTo=function(e,t){return null==e||e!=e?t:e},jn.divide=Tl,jn.endsWith=function(e,t,r){e=Ea(e),t=ai(t);var i=e.length,s=r=r===n?i:sr(ma(r),0,i);return(r-=t.length)>=0&&e.slice(r,s)==t},jn.eq=Ko,jn.escape=function(e){return(e=Ea(e))&&Y.test(e)?e.replace(z,nn):e},jn.escapeRegExp=function(e){return(e=Ea(e))&&ne.test(e)?e.replace(te,"\\$&"):e},jn.every=function(e,t,r){var i=qo(e)?At:dr;return r&&ys(e,t,r)&&(t=n),i(e,os(t,3))},jn.find=yo,jn.findIndex=Hs,jn.findKey=function(e,t){return jt(e,os(t,3),vr)},jn.findLast=vo,jn.findLastIndex=$s,jn.findLastKey=function(e,t){return jt(e,os(t,3),Er)},jn.floor=wl,jn.forEach=Eo,jn.forEachRight=_o,jn.forIn=function(e,t){return null==e?e:gr(e,os(t,3),La)},jn.forInRight=function(e,t){return null==e?e:yr(e,os(t,3),La)},jn.forOwn=function(e,t){return e&&vr(e,os(t,3))},jn.forOwnRight=function(e,t){return e&&Er(e,os(t,3))},jn.get=Na,jn.gt=Bo,jn.gte=Ho,jn.has=function(e,t){return null!=e&&fs(e,t,Ir)},jn.hasIn=Aa,jn.head=zs,jn.identity=il,jn.includes=function(e,t,n,r){e=Wo(e)?e:Ka(e),n=n&&!r?ma(n):0;var i=e.length;return n<0&&(n=gn(i+n,0)),la(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Vt(e,t,n)>-1},jn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ma(n);return i<0&&(i=gn(r+i,0)),Vt(e,t,i)},jn.inRange=function(e,t,r){return t=pa(t),r===n?(r=t,t=0):r=pa(r),function(e,t,n){return e>=yn(t,n)&&e<gn(t,n)}(e=ya(e),t,r)},jn.invoke=Ra,jn.isArguments=$o,jn.isArray=qo,jn.isArrayBuffer=zo,jn.isArrayLike=Wo,jn.isArrayLikeObject=Yo,jn.isBoolean=function(e){return!0===e||!1===e||na(e)&&br(e)==g},jn.isBuffer=Go,jn.isDate=Xo,jn.isElement=function(e){return na(e)&&1===e.nodeType&&!sa(e)},jn.isEmpty=function(e){if(null==e)return!0;if(Wo(e)&&(qo(e)||"string"==typeof e||"function"==typeof e.splice||Go(e)||ua(e)||$o(e)))return!e.length;var t=ds(e);if(t==T||t==C)return!e.size;if(Ts(e))return!Mr(e).length;for(var n in e)if(Me.call(e,n))return!1;return!0},jn.isEqual=function(e,t){return Or(e,t)},jn.isEqualWith=function(e,t,r){var i=(r="function"==typeof r?r:n)?r(e,t):n;return i===n?Or(e,t,n,r):!!i},jn.isError=Qo,jn.isFinite=function(e){return"number"==typeof e&&Ut(e)},jn.isFunction=Jo,jn.isInteger=Zo,jn.isLength=ea,jn.isMap=ra,jn.isMatch=function(e,t){return e===t||Rr(e,t,ls(t))},jn.isMatchWith=function(e,t,r){return r="function"==typeof r?r:n,Rr(e,t,ls(t),r)},jn.isNaN=function(e){return ia(e)&&e!=+e},jn.isNative=function(e){if(_s(e))throw new we("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Dr(e)},jn.isNil=function(e){return null==e},jn.isNull=function(e){return null===e},jn.isNumber=ia,jn.isObject=ta,jn.isObjectLike=na,jn.isPlainObject=sa,jn.isRegExp=oa,jn.isSafeInteger=function(e){return Zo(e)&&e>=-9007199254740991&&e<=u},jn.isSet=aa,jn.isString=la,jn.isSymbol=ca,jn.isTypedArray=ua,jn.isUndefined=function(e){return e===n},jn.isWeakMap=function(e){return na(e)&&ds(e)==x},jn.isWeakSet=function(e){return na(e)&&"[object WeakSet]"==br(e)},jn.join=function(e,t){return null==e?"":qt.call(e,t)},jn.kebabCase=qa,jn.last=Xs,jn.lastIndexOf=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var s=i;return r!==n&&(s=(s=ma(r))<0?gn(i+s,0):yn(s,i-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,s):Ft(e,Bt,s,!0)},jn.lowerCase=za,jn.lowerFirst=Wa,jn.lt=ha,jn.lte=da,jn.max=function(e){return e&&e.length?fr(e,il,Sr):n},jn.maxBy=function(e,t){return e&&e.length?fr(e,os(t,2),Sr):n},jn.mean=function(e){return Ht(e,il)},jn.meanBy=function(e,t){return Ht(e,os(t,2))},jn.min=function(e){return e&&e.length?fr(e,il,kr):n},jn.minBy=function(e,t){return e&&e.length?fr(e,os(t,2),kr):n},jn.stubArray=gl,jn.stubFalse=yl,jn.stubObject=function(){return{}},jn.stubString=function(){return""},jn.stubTrue=function(){return!0},jn.multiply=bl,jn.nth=function(e,t){return e&&e.length?Kr(e,ma(t)):n},jn.noConflict=function(){return dt._===this&&(dt._=Fe),this},jn.noop=cl,jn.now=No,jn.pad=function(e,t,n){e=Ea(e);var r=(t=ma(t))?un(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Bi(pt(i),n)+e+Bi(ft(i),n)},jn.padEnd=function(e,t,n){e=Ea(e);var r=(t=ma(t))?un(e):0;return t&&r<t?e+Bi(t-r,n):e},jn.padStart=function(e,t,n){e=Ea(e);var r=(t=ma(t))?un(e):0;return t&&r<t?Bi(t-r,n)+e:e},jn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),En(Ea(e).replace(re,""),t||0)},jn.random=function(e,t,r){if(r&&"boolean"!=typeof r&&ys(e,t,r)&&(t=r=n),r===n&&("boolean"==typeof t?(r=t,t=n):"boolean"==typeof e&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=pa(e),t===n?(t=e,e=0):t=pa(t)),e>t){var i=e;e=t,t=i}if(r||e%1||t%1){var s=_n();return yn(e+s*(t-e+lt("1e-"+((s+"").length-1))),t)}return zr(e,t)},jn.reduce=function(e,t,n){var r=qo(e)?Mt:zt,i=arguments.length<3;return r(e,os(t,4),n,i,ur)},jn.reduceRight=function(e,t,n){var r=qo(e)?Pt:zt,i=arguments.length<3;return r(e,os(t,4),n,i,hr)},jn.repeat=function(e,t,r){return t=(r?ys(e,t,r):t===n)?1:ma(t),Wr(Ea(e),t)},jn.replace=function(){var e=arguments,t=Ea(e[0]);return e.length<3?t:t.replace(e[1],e[2])},jn.result=function(e,t,r){var i=-1,s=(t=yi(t,e)).length;for(s||(s=1,e=n);++i<s;){var o=null==e?n:e[Us(t[i])];o===n&&(i=s,o=r),e=Jo(o)?o.call(e):o}return e},jn.round=Sl,jn.runInContext=e,jn.sample=function(e){return(qo(e)?Gn:Gr)(e)},jn.size=function(e){if(null==e)return 0;if(Wo(e))return la(e)?un(e):e.length;var t=ds(e);return t==T||t==C?e.size:Mr(e).length},jn.snakeCase=Ya,jn.some=function(e,t,r){var i=qo(e)?kt:ni;return r&&ys(e,t,r)&&(t=n),i(e,os(t,3))},jn.sortedIndex=function(e,t){return ri(e,t)},jn.sortedIndexBy=function(e,t,n){return ii(e,t,os(n,2))},jn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ri(e,t);if(r<n&&Ko(e[r],t))return r}return-1},jn.sortedLastIndex=function(e,t){return ri(e,t,!0)},jn.sortedLastIndexBy=function(e,t,n){return ii(e,t,os(n,2),!0)},jn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ri(e,t,!0)-1;if(Ko(e[n],t))return n}return-1},jn.startCase=Ga,jn.startsWith=function(e,t,n){return e=Ea(e),n=null==n?0:sr(ma(n),0,e.length),t=ai(t),e.slice(n,n+t.length)==t},jn.subtract=Il,jn.sum=function(e){return e&&e.length?Wt(e,il):0},jn.sumBy=function(e,t){return e&&e.length?Wt(e,os(t,2)):0},jn.template=function(e,t,r){var i=jn.templateSettings;r&&ys(e,t,r)&&(t=n),e=Ea(e),t=wa({},t,i,Xi);var s,o,a=wa({},t.imports,i.imports,Xi),l=Da(a),c=Qt(a,l),u=0,h=t.interpolate||Ee,d="__p += '",f=Ce((t.escape||Ee).source+"|"+h.source+"|"+(h===Q?he:Ee).source+"|"+(t.evaluate||Ee).source+"|$","g"),p="//# sourceURL="+(Me.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++it+"]")+"\n";e.replace(f,function(t,n,r,i,a,l){return r||(r=i),d+=e.slice(u,l).replace(_e,rn),n&&(s=!0,d+="' +\n__e("+n+") +\n'"),a&&(o=!0,d+="';\n"+a+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+t.length,t}),d+="';\n";var m=Me.call(t,"variable")&&t.variable;if(m){if(ce.test(m))throw new we("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(B,""):d).replace(H,"$1").replace($,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=Za(function(){return be(l,p+"return "+d).apply(n,c)});if(g.source=d,Qo(g))throw g;return g},jn.times=function(e,t){if((e=ma(e))<1||e>u)return[];var n=d,r=yn(e,d);t=os(t),e-=d;for(var i=Yt(r,t);++n<e;)t(n);return i},jn.toFinite=pa,jn.toInteger=ma,jn.toLength=ga,jn.toLower=function(e){return Ea(e).toLowerCase()},jn.toNumber=ya,jn.toSafeInteger=function(e){return e?sr(ma(e),-9007199254740991,u):0===e?e:0},jn.toString=Ea,jn.toUpper=function(e){return Ea(e).toUpperCase()},jn.trim=function(e,t,r){if((e=Ea(e))&&(r||t===n))return Gt(e);if(!e||!(t=ai(t)))return e;var i=hn(e),s=hn(t);return Ei(i,Zt(i,s),en(i,s)+1).join("")},jn.trimEnd=function(e,t,r){if((e=Ea(e))&&(r||t===n))return e.slice(0,dn(e)+1);if(!e||!(t=ai(t)))return e;var i=hn(e);return Ei(i,0,en(i,hn(t))+1).join("")},jn.trimStart=function(e,t,r){if((e=Ea(e))&&(r||t===n))return e.replace(re,"");if(!e||!(t=ai(t)))return e;var i=hn(e);return Ei(i,Zt(i,hn(t))).join("")},jn.truncate=function(e,t){var r=30,i="...";if(ta(t)){var s="separator"in t?t.separator:s;r="length"in t?ma(t.length):r,i="omission"in t?ai(t.omission):i}var o=(e=Ea(e)).length;if(sn(e)){var a=hn(e);o=a.length}if(r>=o)return e;var l=r-un(i);if(l<1)return i;var c=a?Ei(a,0,l).join(""):e.slice(0,l);if(s===n)return c+i;if(a&&(l+=c.length-l),oa(s)){if(e.slice(l).search(s)){var u,h=c;for(s.global||(s=Ce(s.source,Ea(de.exec(s))+"g")),s.lastIndex=0;u=s.exec(h);)var d=u.index;c=c.slice(0,d===n?l:d)}}else if(e.indexOf(ai(s),l)!=l){var f=c.lastIndexOf(s);f>-1&&(c=c.slice(0,f))}return c+i},jn.unescape=function(e){return(e=Ea(e))&&W.test(e)?e.replace(q,fn):e},jn.uniqueId=function(e){var t=++Pe;return Ea(e)+t},jn.upperCase=Xa,jn.upperFirst=Qa,jn.each=Eo,jn.eachRight=_o,jn.first=zs,ll(jn,(vl={},vr(jn,function(e,t){Me.call(jn.prototype,t)||(vl[t]=e)}),vl),{chain:!1}),jn.VERSION="4.17.21",Ct(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){jn[e].placeholder=jn}),Ct(["drop","take"],function(e,t){Bn.prototype[e]=function(r){r=r===n?1:gn(ma(r),0);var i=this.__filtered__&&!t?new Bn(this):this.clone();return i.__filtered__?i.__takeCount__=yn(r,i.__takeCount__):i.__views__.push({size:yn(r,d),type:e+(i.__dir__<0?"Right":"")}),i},Bn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Ct(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;Bn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:os(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),Ct(["head","last"],function(e,t){var n="take"+(t?"Right":"");Bn.prototype[e]=function(){return this[n](1).value()[0]}}),Ct(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Bn.prototype[e]=function(){return this.__filtered__?new Bn(this):this[n](1)}}),Bn.prototype.compact=function(){return this.filter(il)},Bn.prototype.find=function(e){return this.filter(e).head()},Bn.prototype.findLast=function(e){return this.reverse().find(e)},Bn.prototype.invokeMap=Yr(function(e,t){return"function"==typeof e?new Bn(this):this.map(function(n){return Ar(n,e,t)})}),Bn.prototype.reject=function(e){return this.filter(ko(os(e)))},Bn.prototype.slice=function(e,t){e=ma(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Bn(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(r=(t=ma(t))<0?r.dropRight(-t):r.take(t-e)),r)},Bn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Bn.prototype.toArray=function(){return this.take(d)},vr(Bn.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),s=jn[i?"take"+("last"==t?"Right":""):t],o=i||/^find/.test(t);s&&(jn.prototype[t]=function(){var t=this.__wrapped__,a=i?[1]:arguments,l=t instanceof Bn,c=a[0],u=l||qo(t),h=function(e){var t=s.apply(jn,Lt([e],a));return i&&d?t[0]:t};u&&r&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=this.__chain__,f=!!this.__actions__.length,p=o&&!d,m=l&&!f;if(!o&&u){t=m?t:new Bn(this);var g=e.apply(t,a);return g.__actions__.push({func:po,args:[h],thisArg:n}),new Kn(g,d)}return p&&m?e.apply(this,a):(g=this.thru(h),p?i?g.value()[0]:g.value():g)})}),Ct(["pop","push","shift","sort","splice","unshift"],function(e){var t=xe[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);jn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(qo(i)?i:[],e)}return this[n](function(n){return t.apply(qo(n)?n:[],e)})}}),vr(Bn.prototype,function(e,t){var n=jn[t];if(n){var r=n.name+"";Me.call(xn,r)||(xn[r]=[]),xn[r].push({name:t,func:n})}}),xn[ji(n,2).name]=[{name:"wrapper",func:n}],Bn.prototype.clone=function(){var e=new Bn(this.__wrapped__);return e.__actions__=Ni(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ni(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ni(this.__views__),e},Bn.prototype.reverse=function(){if(this.__filtered__){var e=new Bn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Bn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=qo(e),r=t<0,i=n?e.length:0,s=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var s=n[r],o=s.size;switch(s.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=yn(t,e+o);break;case"takeRight":e=gn(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=s.start,a=s.end,l=a-o,c=r?a:o-1,u=this.__iteratees__,h=u.length,d=0,f=yn(l,this.__takeCount__);if(!n||!r&&i==l&&f==l)return di(e,this.__actions__);var p=[];e:for(;l--&&d<f;){for(var m=-1,g=e[c+=t];++m<h;){var y=u[m],v=y.iteratee,E=y.type,_=v(g);if(2==E)g=_;else if(!_){if(1==E)continue e;break e}}p[d++]=g}return p},jn.prototype.at=mo,jn.prototype.chain=function(){return fo(this)},jn.prototype.commit=function(){return new Kn(this.value(),this.__chain__)},jn.prototype.next=function(){this.__values__===n&&(this.__values__=fa(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?n:this.__values__[this.__index__++]}},jn.prototype.plant=function(e){for(var t,r=this;r instanceof Vn;){var i=Fs(r);i.__index__=0,i.__values__=n,t?s.__wrapped__=i:t=i;var s=i;r=r.__wrapped__}return s.__wrapped__=e,t},jn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Bn){var t=e;return this.__actions__.length&&(t=new Bn(this)),(t=t.reverse()).__actions__.push({func:po,args:[eo],thisArg:n}),new Kn(t,this.__chain__)}return this.thru(eo)},jn.prototype.toJSON=jn.prototype.valueOf=jn.prototype.value=function(){return di(this.__wrapped__,this.__actions__)},jn.prototype.first=jn.prototype.head,Xe&&(jn.prototype[Xe]=function(){return this}),jn}();pt?((pt.exports=pn)._=pn,ft._=pn):dt._=pn}.call(fy)),dy.exports;var e,t}var my,gy={};var yy,vy={};const Ey=(()=>{let e=0;return()=>(e+=1,`u${`0000${(Math.random()*36**4|0).toString(36)}`.slice(-4)}${e}`)})();function _y(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}let Ty=null;function wy(e={}){return Ty||(e.includeStyleProperties?(Ty=e.includeStyleProperties,Ty):(Ty=_y(window.getComputedStyle(document.documentElement)),Ty))}function by(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function Sy(e,t={}){return{width:t.width||function(e){const t=by(e,"border-left-width"),n=by(e,"border-right-width");return e.clientWidth+t+n}(e),height:t.height||function(e){const t=by(e,"border-top-width"),n=by(e,"border-bottom-width");return e.clientHeight+t+n}(e)}}const Iy=16384;function Cy(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>t(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function Ny(e,t,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${t} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(e),async function(e){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(e)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}(i)}const Ay=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return null!==n&&(n.constructor.name===t.name||Ay(n,t))};function xy(e,t,n,r){const i=`.${e}:${t}`,s=n.cssText?function(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}(n):function(e,t){return wy(t).map(t=>`${t}: ${e.getPropertyValue(t)}${e.getPropertyPriority(t)?" !important":""};`).join(" ")}(n,r);return document.createTextNode(`${i}{${s}}`)}function Oy(e,t,n,r){const i=window.getComputedStyle(e,n),s=i.getPropertyValue("content");if(""===s||"none"===s)return;const o=Ey();try{t.className=`${t.className} ${o}`}catch(l){return}const a=document.createElement("style");a.appendChild(xy(o,n,i,r)),t.appendChild(a)}const Ry="application/font-woff",Dy="image/jpeg",Ly={woff:Ry,woff2:Ry,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Dy,jpeg:Dy,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function My(e){const t=function(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}(e).toLowerCase();return Ly[t]||""}function Py(e){return-1!==e.search(/^(data:)/)}async function ky(e,t,n){const r=await fetch(e,t);if(404===r.status)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((e,t)=>{const s=new FileReader;s.onerror=t,s.onloadend=()=>{try{e(n({res:r,result:s.result}))}catch(i){t(i)}},s.readAsDataURL(i)})}const Uy={};async function jy(e,t,n){const r=function(e,t,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}(e,t,n.includeQueryParams);if(null!=Uy[r])return Uy[r];let i;n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());try{const r=await ky(e,n.fetchRequestInit,({res:e,result:n})=>(t||(t=e.headers.get("Content-Type")||""),function(e){return e.split(/,/)[1]}(n)));i=function(e,t){return`data:${t};base64,${e}`}(r,t)}catch(s){i=n.imagePlaceholder||"";let t=`Failed to fetch resource: ${e}`;s&&(t="string"==typeof s?s:s.message)}return Uy[r]=i,i}async function Fy(e,t){return Ay(e,HTMLCanvasElement)?async function(e){const t=e.toDataURL();return"data:,"===t?e.cloneNode(!1):Cy(t)}(e):Ay(e,HTMLVideoElement)?async function(e,t){if(e.currentSrc){const t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.clientWidth,t.height=e.clientHeight,null==n||n.drawImage(e,0,0,t.width,t.height),Cy(t.toDataURL())}const n=e.poster,r=My(n);return Cy(await jy(n,r,t))}(e,t):Ay(e,HTMLIFrameElement)?async function(e,t){var n;try{if(null===(n=null==e?void 0:e.contentDocument)||void 0===n?void 0:n.body)return await Hy(e.contentDocument.body,t,!0)}catch(r){}return e.cloneNode(!1)}(e,t):e.cloneNode(Ky(e))}const Vy=e=>null!=e.tagName&&"SLOT"===e.tagName.toUpperCase(),Ky=e=>null!=e.tagName&&"SVG"===e.tagName.toUpperCase();function By(e,t,n){return Ay(t,Element)&&(function(e,t,n){const r=t.style;if(!r)return;const i=window.getComputedStyle(e);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):wy(n).forEach(n=>{let s=i.getPropertyValue(n);if("font-size"===n&&s.endsWith("px")){const e=Math.floor(parseFloat(s.substring(0,s.length-2)))-.1;s=`${e}px`}Ay(e,HTMLIFrameElement)&&"display"===n&&"inline"===s&&(s="block"),"d"===n&&t.getAttribute("d")&&(s=`path(${t.getAttribute("d")})`),r.setProperty(n,s,i.getPropertyPriority(n))})}(e,t,n),function(e,t,n){Oy(e,t,":before",n),Oy(e,t,":after",n)}(e,t,n),function(e,t){Ay(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Ay(e,HTMLInputElement)&&t.setAttribute("value",e.value)}(e,t),function(e,t){if(Ay(e,HTMLSelectElement)){const n=t,r=Array.from(n.children).find(t=>e.value===t.getAttribute("value"));r&&r.setAttribute("selected","")}}(e,t)),t}async function Hy(e,t,n){return n||!t.filter||t.filter(e)?Promise.resolve(e).then(e=>Fy(e,t)).then(n=>async function(e,t,n){var r,i;if(Ky(t))return t;let s=[];return s=Vy(e)&&e.assignedNodes?_y(e.assignedNodes()):Ay(e,HTMLIFrameElement)&&(null===(r=e.contentDocument)||void 0===r?void 0:r.body)?_y(e.contentDocument.body.childNodes):_y((null!==(i=e.shadowRoot)&&void 0!==i?i:e).childNodes),0===s.length||Ay(e,HTMLVideoElement)||await s.reduce((e,r)=>e.then(()=>Hy(r,n)).then(e=>{e&&t.appendChild(e)}),Promise.resolve()),t}(e,n,t)).then(n=>By(e,n,t)).then(e=>async function(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===n.length)return e;const r={};for(let s=0;s<n.length;s++){const i=n[s].getAttribute("xlink:href");if(i){const n=e.querySelector(i),s=document.querySelector(i);n||!s||r[i]||(r[i]=await Hy(s,t,!0))}}const i=Object.values(r);if(i.length){const t="http://www.w3.org/1999/xhtml",n=document.createElementNS(t,"svg");n.setAttribute("xmlns",t),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const r=document.createElementNS(t,"defs");n.appendChild(r);for(let e=0;e<i.length;e++)r.appendChild(i[e]);e.appendChild(n)}return e}(e,t)):null}const $y=/url\((['"]?)([^'"]+?)\1\)/g,qy=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,zy=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function Wy(e,t,n,r,i){try{const s=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}(t,n):t,o=My(t);let a;return i||(a=await jy(s,o,r)),e.replace(function(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}(t),`$1${a}$3`)}catch(s){}return e}function Yy(e){return-1!==e.search($y)}async function Gy(e,t,n){if(!Yy(e))return e;const r=function(e,{preferredFontFormat:t}){return t?e.replace(zy,e=>{for(;;){const[n,,r]=qy.exec(e)||[];if(!r)return"";if(r===t)return`src: ${n};`}}):e}(e,n),i=function(e){const t=[];return e.replace($y,(e,n,r)=>(t.push(r),e)),t.filter(e=>!Py(e))}(r);return i.reduce((e,r)=>e.then(e=>Wy(e,r,t,n)),Promise.resolve(r))}async function Xy(e,t,n){var r;const i=null===(r=t.style)||void 0===r?void 0:r.getPropertyValue(e);if(i){const r=await Gy(i,null,n);return t.style.setProperty(e,r,t.style.getPropertyPriority(e)),!0}return!1}async function Qy(e,t){Ay(e,Element)&&(await async function(e,t){await Xy("background",e,t)||await Xy("background-image",e,t),await Xy("mask",e,t)||await Xy("-webkit-mask",e,t)||await Xy("mask-image",e,t)||await Xy("-webkit-mask-image",e,t)}(e,t),await async function(e,t){const n=Ay(e,HTMLImageElement);if((!n||Py(e.src))&&(!Ay(e,SVGImageElement)||Py(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,i=await jy(r,My(r),t);await new Promise((r,s)=>{e.onload=r,e.onerror=t.onImageErrorHandler?(...e)=>{try{r(t.onImageErrorHandler(...e))}catch(n){s(n)}}:s;const o=e;o.decode&&(o.decode=r),"lazy"===o.loading&&(o.loading="eager"),n?(e.srcset="",e.src=i):e.href.baseVal=i})}(e,t),await async function(e,t){const n=_y(e.childNodes).map(e=>Qy(e,t));await Promise.all(n).then(()=>e)}(e,t))}const Jy={};async function Zy(e){let t=Jy[e];if(null!=t)return t;const n=await fetch(e);return t={url:e,cssText:await n.text()},Jy[e]=t,t}async function ev(e,t){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,i=(n.match(/url\([^)]+\)/g)||[]).map(async i=>{let s=i.replace(r,"$1");return s.startsWith("https://")||(s=new URL(s,e.url).href),ky(s,t.fetchRequestInit,({result:e})=>(n=n.replace(i,`url(${e})`),[i,e]))});return Promise.all(i).then(()=>n)}function tv(e){if(null==e)return[];const t=[];let n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const r=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const e=r.exec(n);if(null===e)break;t.push(e[0])}n=n.replace(r,"");const i=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=i.exec(n);if(null===e){if(e=s.exec(n),null===e)break;i.lastIndex=s.lastIndex}else s.lastIndex=i.lastIndex;t.push(e[0])}return t}async function nv(e,t){if(null==e.ownerDocument)throw new Error("Provided element is not within a Document");const n=_y(e.ownerDocument.styleSheets),r=await async function(e,t){const n=[],r=[];return e.forEach(n=>{if("cssRules"in n)try{_y(n.cssRules||[]).forEach((e,i)=>{if(e.type===CSSRule.IMPORT_RULE){let s=i+1;const o=Zy(e.href).then(e=>ev(e,t)).then(e=>tv(e).forEach(e=>{try{n.insertRule(e,e.startsWith("@import")?s+=1:n.cssRules.length)}catch(t){}})).catch(e=>{});r.push(o)}})}catch(i){const s=e.find(e=>null==e.href)||document.styleSheets[0];null!=n.href&&r.push(Zy(n.href).then(e=>ev(e,t)).then(e=>tv(e).forEach(e=>{s.insertRule(e,s.cssRules.length)})).catch(e=>{}))}}),Promise.all(r).then(()=>(e.forEach(e=>{if("cssRules"in e)try{_y(e.cssRules||[]).forEach(e=>{n.push(e)})}catch(t){}}),n))}(n,t);return function(e){return e.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>Yy(e.style.getPropertyValue("src")))}(r)}function rv(e){return e.trim().replace(/["']/g,"")}async function iv(e,t){const n=await nv(e,t),r=function(e){const t=new Set;return function e(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(e=>{t.add(rv(e))}),Array.from(n.children).forEach(t=>{t instanceof HTMLElement&&e(t)})}(e),t}(e);return(await Promise.all(n.filter(e=>r.has(rv(e.style.fontFamily))).map(e=>{const n=e.parentStyleSheet?e.parentStyleSheet.href:null;return Gy(e.cssText,n,t)}))).join("\n")}async function sv(e,t={}){const{width:n,height:r}=Sy(e,t),i=await Hy(e,t,!0);await async function(e,t){const n=null!=t.fontEmbedCSS?t.fontEmbedCSS:t.skipFonts?null:await iv(e,t);if(n){const t=document.createElement("style"),r=document.createTextNode(n);t.appendChild(r),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}(i,t),await Qy(i,t),function(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;null!=r&&Object.keys(r).forEach(e=>{n[e]=r[e]})}(i,t);return await Ny(i,n,r)}async function ov(e,t={}){const{width:n,height:r}=Sy(e,t),i=await sv(e,t),s=await Cy(i),o=document.createElement("canvas"),a=o.getContext("2d"),l=t.pixelRatio||function(){let e,t;try{t=process}catch(r){}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}(),c=t.canvasWidth||n,u=t.canvasHeight||r;return o.width=c*l,o.height=u*l,t.skipAutoScale||function(e){(e.width>Iy||e.height>Iy)&&(e.width>Iy&&e.height>Iy?e.width>e.height?(e.height*=Iy/e.width,e.width=Iy):(e.width*=Iy/e.height,e.height=Iy):e.width>Iy?(e.height*=Iy/e.width,e.width=Iy):(e.width*=Iy/e.height,e.height=Iy))}(o),o.style.width=`${c}`,o.style.height=`${u}`,t.backgroundColor&&(a.fillStyle=t.backgroundColor,a.fillRect(0,0,o.width,o.height)),a.drawImage(s,0,0,o.width,o.height),o}const av=O(Object.freeze(Object.defineProperty({__proto__:null,getFontEmbedCSS:async function(e,t={}){return iv(e,t)},toBlob:async function(e,t={}){const n=await ov(e,t);return await function(e,t={}){return e.toBlob?new Promise(n=>{e.toBlob(n,t.type?t.type:"image/png",t.quality?t.quality:1)}):new Promise(n=>{const r=window.atob(e.toDataURL(t.type?t.type:void 0,t.quality?t.quality:void 0).split(",")[1]),i=r.length,s=new Uint8Array(i);for(let e=0;e<i;e+=1)s[e]=r.charCodeAt(e);n(new Blob([s],{type:t.type?t.type:"image/png"}))})}(n)},toCanvas:ov,toJpeg:async function(e,t={}){return(await ov(e,t)).toDataURL("image/jpeg",t.quality||1)},toPixelData:async function(e,t={}){const{width:n,height:r}=Sy(e,t);return(await ov(e,t)).getContext("2d").getImageData(0,0,n,r).data},toPng:async function(e,t={}){return(await ov(e,t)).toDataURL()},toSvg:sv},Symbol.toStringTag,{value:"Module"})));var lv,cv,uv,hv;function dv(){if(lv)return fm;lv=1;var e=fm&&fm.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})},t=fm&&fm.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fm,"__esModule",{value:!0}),fm.initChannelMessagingFunctions=void 0;const n=uy(),r=Wg(),i=oy(),s=t(vm()),o=t(py()),a=sy(),l=ay(),c=_g(),u=cy(),h=wm(),d=iy(),f=(my||(my=1,Object.defineProperty(gy,"__esModule",{value:!0}),gy.DebounceExecutor=void 0,gy.DebounceExecutor=class{constructor(){this.animationFrameId=null}schedule(e){null!==this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),this.animationFrameId=requestAnimationFrame(()=>{performance.now(),e(),performance.now(),this.animationFrameId=null})}}),gy),p=(yy||(yy=1,Object.defineProperty(vy,"__esModule",{value:!0}),vy.sleep=vy.defaultUIUpdateRunner=void 0,vy.defaultUIUpdateRunner=e=>{e()},vy.sleep=e=>new Promise(t=>setTimeout(t,e))),vy),m="IMMEDIATELY_REMOVE_POINTER_LOCK",g="LAST_NAV_TREE_REFRESH_TIME",y="LAST_SENT_HOVERED_ELEMENT_KEY",v=av;return fm.initChannelMessagingFunctions=()=>{if(window.tempoInitialized)return;window.tempoInitialized=!0,(0,u.resetIntermediateClassesForSliderInstantUpdate)();let t=p.defaultUIUpdateRunner;const E=new Map,_=(e,t)=>{(0,r.getMemoryStorageItem)(y)!==t&&(e.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.HOVERED_ELEMENT_KEY,elementKey:t}),(0,r.setMemoryStorageItem)(y,t))};String.prototype.hashCode=function(){var e,t=0;if(0===this.length)return t;for(e=0;e<this.length;e++)t=(t<<5)-t+this.charCodeAt(e),t|=0;return t};let T=!1;const w=(b=window.MutationObserver||window.WebKitMutationObserver,function(e,t){const n=e.filter(e=>e&&1===e.nodeType);return 0===n.length?p.defaultUIUpdateRunner:(b?(r=new b(t),n.forEach(e=>{r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0})})):window.addEventListener&&n.forEach(e=>{e.addEventListener("DOMNodeInserted",t,!1),e.addEventListener("DOMNodeRemoved",t,!1)}),e=>{r&&r.disconnect(),e(),r&&n.forEach(e=>{r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0})})});var r});var b;const S=e=>{var t;const s=(0,r.getMemoryStorageItem)(r.SELECTED_ELEMENT_KEY),o=h.TempoElement.fromKey(s),a=(0,r.getMemoryStorageItem)(r.ELEMENT_KEY_TO_NAV_NODE);let l=null,u=e.target;for(;u&&!l;)l=a[(0,n.getElementKeyFromNode)(u)||""],u=u.parentElement;if(!l)return c.SELECT_OR_HOVER_STORYBOARD;const d=e=>{var t,n,r,s;if(o.isEmpty())throw Error("No selected element when isNavNodeMatch called");if(!e)return!1;if(!e.tempoElement.codebaseId.startsWith("tempo-")||e.tempoElement.codebaseId===i.SKIP_ROOT_CODEBASE_ID)return!1;if(o.isEqual(e.tempoElement))return!0;if(e.tempoElement.isParentOf(o))return!0;let l=e.parent;for(;l&&!l.tempoElement.codebaseId.startsWith("tempo-");)l=l.parent;if(null===(t=null==l?void 0:l.tempoElement)||void 0===t?void 0:t.isEqual(o))return!0;const c=a[o.getKey()];return!(!c||!(null===(s=null===(r=null===(n=e.parent)||void 0===n?void 0:n.children)||void 0===r?void 0:r.includes)||void 0===s?void 0:s.call(r,c)))};let f=null,p=l;for(;p;){if(o.isEmpty()||o.isStoryboard())(null===(t=p.tempoElement.codebaseId)||void 0===t?void 0:t.startsWith("tempo-"))&&(f=p);else if(d(p)){f=p;break}p=p.parent}return f||null},I=(e,t,i,s)=>{const o=R(e,t,i),l=(0,d.getEditingInfo)();if(e.altKey||o&&!l)return;if((0,r.getMemoryStorageItem)("mouseDragContext"))return;const u=(0,r.getMemoryStorageItem)(r.HOVERED_ELEMENT_KEY),f=(0,r.getMemoryStorageItem)(r.ELEMENT_KEY_TO_NAV_NODE)||{};let p;if(e.metaKey||e.ctrlKey||s){p=f[(0,n.getElementKeyFromNode)(e.target)],p||e.target.parentNode!==document.body||(p=c.SELECT_OR_HOVER_STORYBOARD)}else p=S(e);const m=(0,r.getMemoryStorageItem)(r.SELECTED_ELEMENT_KEY),g=h.TempoElement.fromKey(m);if(e.shiftKey&&p&&m&&("string"!=typeof p||g.isStoryboard()||(p=null),"string"==typeof p||(null==p?void 0:p.tempoElement.isSiblingOf(g))||(p=null)),!p)return void(null!==u&&((0,r.setMemoryStorageItem)(r.HOVERED_ELEMENT_KEY,null),_(t,null),(0,a.updateOutlines)(t,i)));if("string"==typeof p){if(p===c.SELECT_OR_HOVER_STORYBOARD){const e=h.TempoElement.forStoryboard(i).getKey();u!==e&&((0,r.setMemoryStorageItem)(r.HOVERED_ELEMENT_KEY,e),_(t,e),(0,a.updateOutlines)(t,i))}return}const y=p.tempoElement.getKey();u!==y&&(_(t,y),(0,r.setMemoryStorageItem)(r.HOVERED_ELEMENT_KEY,y),(0,a.updateOutlines)(t,i))},C=(e,t)=>{(0,r.getMemoryStorageItem)(r.HOVERED_ELEMENT_KEY)&&(_(e,null),(0,r.setMemoryStorageItem)(r.HOVERED_ELEMENT_KEY,null),(0,a.updateOutlines)(e,t))},N=(t,n,i)=>e(void 0,void 0,void 0,function*(){R(t,n,i);let e=(0,r.getMemoryStorageItem)("mouseDragContext");!t.buttons&&e&&((0,r.setMemoryStorageItem)("mouseDragContext",null),(null==e?void 0:e.dragging)&&n.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.DRAG_CANCEL_EVENT,event:{}}),e=null);const l={pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY};if((0,r.setMemoryStorageItem)("mousePos",l),((e,t)=>{const n=t.id;if(!E.has(n)){const t=o.default.throttle(t=>e.postMessage(t),50,{leading:!0,trailing:!0});E.set(n,t)}const r=E.get(n);null==r||r(t)})(n,{id:c.FIXED_IFRAME_MESSAGE_IDS.MOUSE_MOVE_EVENT,event:l}),e&&!e.dragging){const i=(0,r.getMemoryStorageItem)("zoomPerc")||1;if(Math.abs(e.pageX-t.pageX)+Math.abs(e.pageY-t.pageY)>=20/i){if(e.parentSelectedElementKey){((0,r.getMemoryStorageItem)(r.ELEMENT_KEY_TO_NAV_NODE)||{})[e.parentSelectedElementKey]&&(n.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.SELECTED_ELEMENT_KEY,elementKey:e.parentSelectedElementKey,outerHTML:(0,u.getFullHtmlWithElement)([e.parentSelectedElementKey])}),(0,r.setMemoryStorageItem)(r.SELECTED_ELEMENT_KEY,e.parentSelectedElementKey))}if(!(0,r.getMemoryStorageItem)("aiContext")){(0,r.setMemoryStorageItem)("mouseDragContext",Object.assign(Object.assign({},e),{dragging:!0}));const t=(0,r.getMemoryStorageItem)(r.SELECTED_ELEMENT_KEY);n.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.DRAG_START_EVENT,event:e,outerHTML:(0,u.getFullHtmlWithElement)([t])});const i=(0,s.default)("body").get(0);(0,r.setMemoryStorageItem)(m,!0),yield null==i?void 0:i.requestPointerLock()}}}(0,r.getMemoryStorageItem)("mouseDragContext")&&(0,a.updateOutlines)(n,i)}),A=e=>{if(!e)return null;if(!(null==e?void 0:e.isComponent)){const t=(0,n.getNodeForElementKey)(e.tempoElement.getKey());return null==t?void 0:t.parentElement}let t;return(((0,r.getMemoryStorageItem)(r.ELEMENT_KEY_TO_LOOKUP_LIST)||{})[e.tempoElement.getKey()]||[]).forEach(e=>{t||(t=(0,n.getNodeForElementKey)(e))}),null==t?void 0:t.parentElement},x=(e,t,n)=>{R(e,t,n);const i=(0,r.getMemoryStorageItem)("mouseDragContext");(0,r.setMemoryStorageItem)("mouseDragContext",null),(null==i?void 0:i.dragging)&&t.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.DRAG_END_EVENT,event:{}}),(0,a.updateOutlines)(t,n)},O=(e,t,i)=>{if(!!(0,r.getSessionStorageItem)("driveModeEnabled",i))return null;const s=(0,r.getMemoryStorageItem)(r.ELEMENT_KEY_TO_NAV_NODE)||{};let o;if(e.metaKey||e.ctrlKey){o=s[(0,n.getElementKeyFromNode)(e.target)],o||e.target.parentNode!==document.body||(o=c.SELECT_OR_HOVER_STORYBOARD)}else o=S(e);const l=(0,r.getMemoryStorageItem)(r.SELECTED_ELEMENT_KEY);if(!o)return l&&(t.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.SELECTED_ELEMENT_KEY,elementKey:null}),(0,r.setMemoryStorageItem)(r.SELECTED_ELEMENT_KEY,null),(0,a.updateOutlines)(t,i)),null;const f=h.TempoElement.fromKey(l),p=(0,r.getMemoryStorageItem)(r.MULTI_SELECTED_ELEMENT_KEYS)||[];let m="string"==typeof o?h.TempoElement.forStoryboard(i):o.tempoElement,g=[];if(e.shiftKey&&l){const e=p.map(e=>h.TempoElement.fromKey(e)).find(e=>e.isParentOf(m)||e.isEqual(m));if(e)g=p.filter(t=>t!==e.getKey()),e.isEqual(f)&&g.length>1&&(t.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.SELECTED_ELEMENT_KEY,elementKey:g[0],outerHTML:(0,u.getFullHtmlWithElement)([g[0]])}),(0,r.setMemoryStorageItem)(r.SELECTED_ELEMENT_KEY,g[0]));else{if(!f.isSiblingOf(m))return null;g=(null==p?void 0:p.length)?p.concat([m.getKey()]):[l,m.getKey()]}}if(g.length>1)return t.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.MULTI_SELECTED_ELEMENT_KEYS,elementKeys:g,outerHTMLs:(0,u.getFullHtmlWithElement)(g)}),(0,r.setMemoryStorageItem)(r.MULTI_SELECTED_ELEMENT_KEYS,g),(0,a.updateOutlines)(t,i),(0,d.teardownEditableText)(t,i),null;1===g.length&&(m=h.TempoElement.fromKey(g[0]));const y=()=>{t.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.MULTI_SELECTED_ELEMENT_KEYS,elementKeys:[],outerHTMLs:[]}),(0,r.setMemoryStorageItem)(r.MULTI_SELECTED_ELEMENT_KEYS,null)};if(m.isStoryboard())return m.getKey()!==l&&(t.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.SELECTED_ELEMENT_KEY,elementKey:m.getKey(),outerHTML:(0,u.getFullHtmlWithElement)([m.getKey()])}),(0,r.setMemoryStorageItem)(r.SELECTED_ELEMENT_KEY,m.getKey()),(0,a.updateOutlines)(t,i)),(0,d.teardownEditableText)(t,i),y(),null;if((0,d.currentlyEditing)()){const e=(0,d.getEditingInfo)();return(null==e?void 0:e.key)!==l&&(0,d.teardownEditableText)(t,i),y(),null}return e.preventDefault(),e.stopPropagation(),(0,d.canEditText)(m)&&m.getKey()===l&&(0,d.setupEditableText)(m,t,i),m.getKey()===l?(y(),o):(t.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.SELECTED_ELEMENT_KEY,elementKey:m.getKey(),outerHTML:(0,u.getFullHtmlWithElement)([m.getKey()])}),(0,r.setMemoryStorageItem)(r.SELECTED_ELEMENT_KEY,m.getKey()),(0,a.updateOutlines)(t,i),y(),o)},R=(e,t,n)=>{var i,s;const o=!!(0,r.getSessionStorageItem)("driveModeEnabled",n),a=(0,d.getEditingInfo)();return!(!o&&!a)||(null===(i=null==e?void 0:e.preventDefault)||void 0===i||i.call(e),null===(s=null==e?void 0:e.stopPropagation)||void 0===s||s.call(e),!1)},D=(t,n,o,a,l)=>e(void 0,void 0,void 0,function*(){let e=o;e||(e=(0,r.getMemoryStorageItem)(r.TREE_ELEMENT_LOOKUP)||{});let u=a;u||(u=(0,r.getMemoryStorageItem)(r.SCOPE_LOOKUP)||{});let h=l;"EXPLICIT_NONE"===l?h=null:h||(h=(0,r.getMemoryStorageItem)(r.STORYBOARD_COMPONENT)||{});const d=new Set,f=new Set;e&&Object.values(e).forEach(e=>{"component"!==e.type&&"storybook-component"!==e.type||d.add(e.componentName),"component-instance"===e.type&&f.add(e.componentName)});const p={},m={},g=yield new Promise((t,r)=>{(0,i.buildNavForNodeNonBlocking)({storyboardId:n,parent:void 0,node:(0,s.default)("body").get(0),uniquePathBase:"",uniquePathAddon:"root",scopeLookup:u,treeElements:e,knownComponentNames:d,knownComponentInstanceNames:f,elementKeyToLookupList:p,elementKeyToNavNode:m,domUniquePath:"0"},e=>{t(e)})});(0,r.setMemoryStorageItem)(r.ELEMENT_KEY_TO_LOOKUP_LIST,p),(0,r.setMemoryStorageItem)(r.CURRENT_NAV_TREE,g),(0,r.setMemoryStorageItem)(r.ELEMENT_KEY_TO_NAV_NODE,m),t.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.NAV_TREE,navTree:g,outerHtml:document.documentElement.outerHTML}),(0,i.runNavTreeBuiltCallbacks)()}),L=(i,o)=>e(void 0,void 0,void 0,function*(){t(()=>{(0,r.setMemoryStorageItem)(g,new Date);const{classesToDelete:e}=(0,r.getMemoryStorageItem)("POST_HOT_RELOAD_CLEAR")||{};(0,s.default)(`*[${n.TEMPO_QUEUE_DELETE_AFTER_HOT_RELOAD}=true]`).remove(),(0,s.default)(`.${n.TEMPO_DISPLAY_NONE_UNTIL_REFRESH_CLASS}`).removeClass(n.TEMPO_DISPLAY_NONE_UNTIL_REFRESH_CLASS),(0,s.default)(`*[${n.TEMPO_INSTANT_UPDATE}=true]`).removeAttr(n.TEMPO_INSTANT_UPDATE),(0,s.default)(`*[${n.TEMPO_DO_NOT_SHOW_IN_NAV_UNTIL_REFRESH}=true]`).removeAttr(n.TEMPO_DO_NOT_SHOW_IN_NAV_UNTIL_REFRESH),(0,s.default)(`.${u.TEMPORARY_STYLING_CLASS_NAME}`).removeClass(u.TEMPORARY_STYLING_CLASS_NAME),null==e||e.forEach(e=>{(0,s.default)(`.${e}`).removeClass(e)});((0,r.getMemoryStorageItem)(u.ADD_CLASS_INSTANT_UPDATE_QUEUE)||[]).forEach(e=>{if(!e)return;const{codebaseId:t,className:r}=e;t&&r&&((0,s.default)(`.${t}`).attr(n.TEMPO_INSTANT_UPDATE,"true"),(0,s.default)(`.${t}`).addClass(r))})});try{yield(0,p.sleep)(300),t(()=>e(void 0,void 0,void 0,function*(){yield D(i,o),(0,a.updateOutlines)(i,o)}))}catch(l){}}),M=()=>{const e=document.activeElement;let t,n,r;return e&&(t=e.tagName,e instanceof HTMLElement&&(n=e.isContentEditable),e instanceof HTMLInputElement&&(r=e.type)),{tagName:t,isContentEditable:n,elementType:r}};window.initProject=(e,i,o,d,p,y={},v,E,_)=>{const b=(()=>{try{return{get passive(){return T=!0,!1}}}catch(e){return T=!1,T}})();b.capture=!0;const C=(0,s.default)("body");(0,r.setMemoryStorageItem)(r.TREE_ELEMENT_LOOKUP,o),(0,r.setMemoryStorageItem)(r.SCOPE_LOOKUP,d),p&&(0,r.setMemoryStorageItem)(r.STORYBOARD_COMPONENT,p),(0,r.setMemoryStorageItem)(r.STORYBOARD_TYPE,v),(0,r.setMemoryStorageItem)(r.SAVED_STORYBOARD_COMPONENT_FILENAME,E),_&&(0,r.setMemoryStorageItem)(r.ORIGINAL_STORYBOARD_URL,_),(0,r.removeMemoryStorageItem)(r.SELECTED_ELEMENT_KEY),(0,r.removeMemoryStorageItem)(r.HOVERED_ELEMENT_KEY),(0,a.updateOutlines)(e,i);const U=C.get(0);null==U||U.addEventListener("click",t=>{R(t,e,i)},b),null==U||U.addEventListener("pointerover",t=>{I(t,e,i)},b),null==U||U.addEventListener("pointerdown",t=>{((e,t,i)=>{if(1!==e.which)return;if((0,n.hasClass)(e.target,n.EDIT_TEXT_BUTTON))return;if(R(e,t,i))return;const s=(0,r.getMemoryStorageItem)(r.SELECTED_ELEMENT_KEY),o=h.TempoElement.fromKey(s),c=O(e,t,i),u=!o.isEmpty()&&o.isParentOf(null==c?void 0:c.tempoElement);let d,f;(null==c?void 0:c.pageBoundingBox)&&(d=c.pageBoundingBox.pageX+c.pageBoundingBox.width/2-e.pageX,f=c.pageBoundingBox.pageY+c.pageBoundingBox.height/2-e.pageY);const p={pageX:e.pageX,pageY:e.pageY,offsetX:d,offsetY:f,parentSelectedElementKey:u?s:null},m=(0,r.getMemoryStorageItem)(r.ELEMENT_KEY_TO_NAV_NODE)||{},g=u?m[s]:c,y=A(g);y&&(p.selectedParentDisplay=(0,l.cssEval)(y,"display"),p.selectedParentFlexDirection=(0,l.cssEval)(y,"flex-direction")),(0,r.getMemoryStorageItem)("aiContext")||(0,r.setMemoryStorageItem)("mouseDragContext",p),(0,a.updateOutlines)(t,i)})(t,e,i)},b),null==U||U.addEventListener("pointerup",t=>{x(t,e,i)},b),null==U||U.addEventListener("pointermove",t=>{N(t,e,i)},b),null==U||U.addEventListener("pointerleave",t=>{R(t,e,i)},b),null==U||U.addEventListener("contextmenu",t=>{((e,t,i)=>{if(R(e,t,i))return;e.preventDefault(),e.stopPropagation(),(0,r.setMemoryStorageItem)("mouseDragContext",null);const s=(0,r.getMemoryStorageItem)(r.ELEMENT_KEY_TO_NAV_NODE)||{};let o;e.metaKey||e.ctrlKey?(o=s[(0,n.getElementKeyFromNode)(e.target)],o||e.target.parentNode!==document.body||(o=c.SELECT_OR_HOVER_STORYBOARD)):o=S(e);const l=(0,r.getMemoryStorageItem)(r.SELECTED_ELEMENT_KEY),d=(0,r.getMemoryStorageItem)(r.MULTI_SELECTED_ELEMENT_KEYS);if(!o||"string"==typeof o){if(o===c.SELECT_OR_HOVER_STORYBOARD&&!(null==d?void 0:d.length)){const e=h.TempoElement.forStoryboard(i).getKey();if(l===e)return;t.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.SELECTED_ELEMENT_KEY,elementKey:e}),(0,r.setMemoryStorageItem)(r.SELECTED_ELEMENT_KEY,e),(0,a.updateOutlines)(t,i)}return}let f=null;const p=(0,r.getMemoryStorageItem)(r.SELECTED_ELEMENT_KEY),m=h.TempoElement.fromKey(p);o.tempoElement.isEqual(m)||m.isParentOf(o.tempoElement)||(null==d?void 0:d.length)||(f=o.tempoElement.getKey(),t.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.SELECTED_ELEMENT_KEY,elementKey:f,outerHTML:(0,u.getFullHtmlWithElement)([f])}),(0,r.setMemoryStorageItem)(r.SELECTED_ELEMENT_KEY,f),(0,a.updateOutlines)(t,i));const g={clientX:e.clientX,clientY:e.clientY};t.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.CONTEXT_REQUESTED,event:g})})(t,e,i)},b),null==U||U.addEventListener("dblclick",t=>{R(t,e,i)},b),null==U||U.addEventListener("mouseover",t=>{R(t,e,i)},b),null==U||U.addEventListener("mouseout",t=>{R(t,e,i)},b),null==U||U.addEventListener("mousemove",t=>{R(t,e,i)},b),null==U||U.addEventListener("mousedown",t=>{R(t,e,i)},b),null==U||U.addEventListener("mouseup",t=>{R(t,e,i)},b),null==U||U.addEventListener("wheel",t=>{((e,t,n)=>{const r=R(e,t,n),i=e.altKey;if(!e.ctrlKey&&!e.metaKey&&(r||i))return;e.preventDefault(),e.stopPropagation();const s={deltaX:e.deltaX,deltaY:e.deltaY,wheelDelta:e.wheelDelta,x:e.x,y:e.y,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey};t.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.WHEEL_EVENT,event:s})})(t,e,i)},b),null==U||U.addEventListener("keydown",t=>{((e,t)=>{t.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.KEY_DOWN_EVENT,event:{key:e.key,metaKey:e.metaKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,activeElement:Object.assign({},M())}})})(t,e)},b),null==U||U.addEventListener("keyup",t=>{((e,t)=>{t.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.KEY_UP_EVENT,event:{key:e.key,metaKey:e.metaKey,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,activeElement:Object.assign({},M())}})})(t,e)},b),window.addEventListener("scroll",t=>{((e,t,n)=>{(0,a.updateOutlines)(t,n)})(0,e,i)},b),document.addEventListener("pointerlockchange",()=>{document.pointerLockElement&&(0,r.getMemoryStorageItem)(m)&&(document.exitPointerLock(),(0,r.setMemoryStorageItem)(m,!1))},!1);const j=new f.DebounceExecutor,F=[U],V=document.getElementById("__next-build-watcher");V&&V.shadowRoot&&F.push(...Array.from(V.shadowRoot.children)),t=w(F,t=>{j.schedule(()=>{(({mutations:e,parentPort:t,storyboardId:i,fromNextJsLoader:s})=>{var o;(0,r.getMemoryStorageItem)("href")!==window.location.href&&(t.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.LATEST_HREF,href:window.location.href}),(0,r.setMemoryStorageItem)("href",window.location.href));let l=!1;if(s){const t=null===(o=null==e?void 0:e[0])||void 0===o?void 0:o.target;t&&"container"===t.id&&((0,r.getMemoryStorageItem)(r.HOT_RELOADING),t.classList.contains("visible")?(0,r.setMemoryStorageItem)(r.HOT_RELOADING,!0):((0,r.setMemoryStorageItem)(r.HOT_RELOADING,!1),l=!0))}else e.forEach(e=>{l||("attributes"!==e.type||"class"!==e.attributeName||!e.target||(0,a.isNodeOutline)(e.target)||(0,n.isMovingElement)(e.target)||e.target.tagName.toLowerCase().includes("script")?[e.addedNodes,e.removedNodes].forEach(e=>{l||e&&e.forEach(e=>{(0,a.isNodeOutline)(e)||(0,n.isMovingElement)(e)||(l=!0)})}):(0,n.isElementInSvg)(e.target)||(l=!0))});if(l){if(s){const e=new Date;return void setTimeout(()=>{const n=(0,r.getMemoryStorageItem)(g);(!n||n<e)&&L(t,i)},1e3)}L(t,i)}})({mutations:t,parentPort:e,storyboardId:i})})}),y.driveModeEnabled?P(e,i):k(e,i),y.aiContextSelection?((0,r.setMemoryStorageItem)("aiContext",!0),(0,a.updateOutlines)(e,i)):((0,r.setMemoryStorageItem)("aiContext",!1),(0,a.updateOutlines)(e,i));try{t(()=>{D(e,i,o,d,p||"EXPLICIT_NONE")})}catch(K){}};const P=(e,t)=>{(0,r.getSessionStorageItem)("driveModeEnabled",t)||((0,r.setSessionStorageItem)("driveModeEnabled","enabled",t),C(e,t),(0,a.clearAllOutlines)()),(0,s.default)("body").css("cursor","")},k=(e,t)=>{(0,r.getSessionStorageItem)("driveModeEnabled",t)&&((0,r.removeSessionStorageItem)("driveModeEnabled",t),(0,a.updateOutlines)(e,t),C(e,t)),(0,s.default)("body").attr("style",function(e,t){return(t||"")+"cursor: default !important;"})};window.enableDriveMode=(e,t)=>{P(e,t)},window.disableDriveMode=(e,t)=>{k(e,t)},window.setNewLookups=(e,t,n,i)=>{const s=(0,r.getMemoryStorageItem)(r.TREE_ELEMENT_LOOKUP)||{},o=(0,r.getMemoryStorageItem)(r.SCOPE_LOOKUP)||{},a=Object.assign({},s);Object.keys(n).forEach(e=>{n[e]?a[e]=n[e]:a[e]&&delete a[e]});const l=Object.assign({},o);Object.keys(i).forEach(e=>{i[e]?l[e]=i[e]:l[e]&&delete l[e]}),(0,r.setMemoryStorageItem)(r.TREE_ELEMENT_LOOKUP,a),(0,r.setMemoryStorageItem)(r.SCOPE_LOOKUP,l)},window.setHoveredElement=(e,t,n)=>{if(!!(0,r.getSessionStorageItem)("driveModeEnabled",t))return;(0,r.getMemoryStorageItem)(r.HOVERED_ELEMENT_KEY)!==n&&(n?(0,r.setMemoryStorageItem)(r.HOVERED_ELEMENT_KEY,n):(0,r.removeMemoryStorageItem)(r.HOVERED_ELEMENT_KEY),(0,a.updateOutlines)(e,t))},window.setSelectedElement=(e,t,n)=>{var i;if((0,r.getMemoryStorageItem)(r.SELECTED_ELEMENT_KEY)!==n){if(n){let s=n;if(h.TempoElement.fromKey(n).isStoryboard(t)){const e=(0,r.getMemoryStorageItem)(r.CURRENT_NAV_TREE),t=null===(i=null==e?void 0:e.tempoElement)||void 0===i?void 0:i.getKey();t&&(s=t)}e.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.SELECTED_ELEMENT_KEY,doNotSetElementKey:!0,outerHTML:(0,u.getFullHtmlWithElement)([s])}),(0,r.setMemoryStorageItem)(r.SELECTED_ELEMENT_KEY,n)}else e.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.SELECTED_ELEMENT_KEY,doNotSetElementKey:!0,outerHTML:null}),(0,r.removeMemoryStorageItem)(r.SELECTED_ELEMENT_KEY);(0,a.updateOutlines)(e,t)}},window.setMultiselectedElementKeys=(e,t,n)=>{const i=(0,r.getMemoryStorageItem)(r.MULTI_SELECTED_ELEMENT_KEYS),s=new Set(i||[]),o=new Set(n||[]);s.size===o.size&&[...s].every(e=>o.has(e))||(n?((0,r.setMemoryStorageItem)(r.MULTI_SELECTED_ELEMENT_KEYS,n),e.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.MULTI_SELECTED_ELEMENT_KEYS,doNotSetElementKeys:!0,outerHTMLs:(0,u.getFullHtmlWithElement)(n)})):((0,r.removeMemoryStorageItem)(r.MULTI_SELECTED_ELEMENT_KEYS),e.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.MULTI_SELECTED_ELEMENT_KEYS,doNotSetElementKeys:!0,outerHTMLs:[]})),(0,a.updateOutlines)(e,t))},window.processRulesForSelectedElement=(e,t,n,r)=>{(0,l.processRulesForSelectedElement)(e,n,r)},window.setModifiersForSelectedElement=(e,t,n,r)=>{(0,l.setModifiersForSelectedElement)(e,n,r)},window.getCssEvals=(e,t,n)=>{(0,l.getCssEvals)(e,n)},window.ruleMatchesElement=(e,t,n,r,i)=>{(0,l.ruleMatchesElement)(e,n,r,i)},window.getElementClassList=(e,t,n)=>{(0,l.getElementClassList)(e,n)},window.applyChangeItemToDocument=(t,n,r)=>e(void 0,void 0,void 0,function*(){const{sendNewNavTree:e}=(0,u.applyChangeItemToDocument)(t,n,r);e&&(yield D(t,n)),(0,a.updateOutlines)(t,n)}),window.updateCodebaseIds=(t,n,r,i,s)=>e(void 0,void 0,void 0,function*(){(0,u.updateCodebaseIds)(t,r,!0)&&(yield D(t,n,i,s)),(0,a.updateOutlines)(t,n)}),window.dispatchEvent=(e,t,n,r)=>{const i=new CustomEvent(n,Object.assign({},r));document.dispatchEvent(i)},window.updateOutlines=(e,t)=>{(0,a.updateOutlines)(e,t)},window.goBack=(e,t)=>{""!==document.referrer&&window.history.back()},window.goForward=(e,t)=>{window.history.forward()},window.refresh=(e,t)=>{window.location.reload()},window.syntheticMouseOver=(e,t,i,s,o)=>{const a=document.elementFromPoint(i.x,i.y);if(s){const i=(0,r.getMemoryStorageItem)(r.SELECTED_ELEMENT_KEY);if(!h.TempoElement.fromKey(i).isEmpty()){const r=(0,n.getNodeForElementKey)(i);if(null==r?void 0:r.contains(a))return void I({target:r},e,t)}}I({target:a},e,t,o)},window.syntheticMouseMove=(e,t,n)=>{const r=Object.assign(Object.assign({},n),{pageX:n.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),pageY:n.clientY+(document.documentElement.scrollTop||document.body.scrollTop)});N(r,e,t)},window.syntheticMouseUp=(e,t,n)=>{x(n,e,t)},window.clearHoveredOutlines=(e,t)=>{(0,r.getMemoryStorageItem)(r.HOVERED_ELEMENT_KEY)&&C(e,t)},window.setZoomPerc=(e,t,n)=>{(0,r.setMemoryStorageItem)("zoomPerc",n.toString()),(0,a.updateOutlines)(e,t)},window.setAiContext=(e,t,n)=>{(0,r.setMemoryStorageItem)("aiContext",!!n),(0,a.updateOutlines)(e,t)},window.tempMoveElement=(t,i,o,l)=>e(void 0,void 0,void 0,function*(){var e,d,f,p;const m=((0,r.getMemoryStorageItem)(r.ELEMENT_KEY_TO_NAV_NODE)||{})[o];if(!m)return;const g=h.TempoElement.fromKey(o),y=[],v=(0,r.getMemoryStorageItem)(r.ELEMENT_KEY_TO_LOOKUP_LIST)||{};(v[m.tempoElement.getKey()]||[]).forEach(e=>{y.push((0,n.getNodeForElementKey)(e))});const E=null===(e=y[0])||void 0===e?void 0:e.parentElement,_=m.parent;if(E&&_){const e=null===(d=null==_?void 0:_.children)||void 0===d?void 0:d.indexOf(m),o=null===(f=null==_?void 0:_.children)||void 0===f?void 0:f.length;if(e!==l){if(Array.from(E.children).forEach(e=>{(0,s.default)(e).attr(n.TEMPO_INSTANT_UPDATE,"true")}),(0,s.default)(E).attr(n.TEMPO_INSTANT_UPDATE,"true"),l===o-1)y.forEach(e=>{e.parentElement.appendChild(e)});else{const t=e>l?null==_?void 0:_.children[l]:null==_?void 0:_.children[l+1],r=v[null===(p=null==t?void 0:t.tempoElement)||void 0===p?void 0:p.getKey()]||[];if(!r.length)return;const i=(0,n.getNodeForElementKey)(r[0]);if(!i)return;y.forEach(e=>{e.parentElement.insertBefore(e,i)})}const d=g.uniquePath.split("-"),f=d.slice(0,d.length-1).join("-")+`-${l}`,m=new h.TempoElement(g.codebaseId,g.storyboardId,f).getKey();yield D(t,i),t.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.SELECTED_ELEMENT_KEY,elementKey:m,outerHTML:(0,u.getFullHtmlWithElement)([m])}),(0,r.setMemoryStorageItem)(r.SELECTED_ELEMENT_KEY,m),(0,a.updateOutlines)(t,i)}}}),window.tempAddDiv=(t,r,i,o,l,c)=>e(void 0,void 0,void 0,function*(){const e=(0,s.default)(`.${n.TEMPO_INSTANT_DIV_DRAW_CLASS}`);if(e.length)e.css("width",l),e.css("height",c);else{let e=(0,s.default)(`.${i}`);e.length||(e=(0,s.default)("body")),e.each((e,t)=>{const r=(0,s.default)(`<div class="${n.TEMPO_INSTANT_DIV_DRAW_CLASS}" ${n.TEMPO_DELETE_AFTER_INSTANT_UPDATE}="true" ${n.TEMPO_DELETE_AFTER_REFRESH}="true" ${n.TEMPO_INSTANT_UPDATE}="true"></div>`),i=(0,s.default)(t).children().eq(o);(null==i?void 0:i.length)?i.before(r):(0,s.default)(t).append(r)}),yield D(t,r)}(0,a.updateOutlines)(t,r)}),window.tempMoveToNewParent=(e,t,r,i,o,l,c,u)=>{if((0,s.default)(`.${n.TEMPO_MOVE_BETWEEN_PARENTS_OUTLINE}`).remove(),u)return;const h=document.createElement("div");h.classList.add(n.TEMPO_MOVE_BETWEEN_PARENTS_OUTLINE),h.setAttribute(n.TEMPO_INSTANT_UPDATE,"true"),h.style.width=r+"px",h.style.height=i+"px",h.style.left=o+"px",h.style.top=l+"px",h.style.position="fixed",h.style.pointerEvents="none",h.style.zIndex="2000000004",h.style.boxSizing="border-box",h.style.cursor="default !important",h.style.backgroundColor=a.PRIMARY_OUTLINE_COLOUR;const d=document.getElementsByTagName("body")[0];d.appendChild(h);const f=(0,n.getNodeForElementKey)(c);if(f){const t=f.getBoundingClientRect(),r=(0,a.getOutlineElement)(e,a.OutlineType.PRIMARY,t.left,t.top,t.width,t.height);r.classList.remove(n.OUTLINE_CLASS),r.classList.add(n.TEMPO_MOVE_BETWEEN_PARENTS_OUTLINE),r.setAttribute(n.TEMPO_INSTANT_UPDATE,"true"),d.appendChild(r)}},window.checkIfHydrationError=(e,t)=>{var n,r,i,s,o,a,l,u,h,d,f,p,m,g,y;let v,E,_,T;if(window.location.href.includes("framework=VITE")){const e=null===(n=document.getElementsByTagName("vite-error-overlay")[0])||void 0===n?void 0:n.shadowRoot;v="A Vite Error Occurred",E=null===(s=null===(i=null===(r=null==e?void 0:e.querySelectorAll)||void 0===r?void 0:r.call(e,".file-link"))||void 0===i?void 0:i[0])||void 0===s?void 0:s.innerHTML,_=null===(l=null===(a=null===(o=null==e?void 0:e.querySelectorAll)||void 0===o?void 0:o.call(e,".message"))||void 0===a?void 0:a[0])||void 0===l?void 0:l.innerHTML,T=Boolean(E||_)}else{const e=null===(u=document.getElementsByTagName("nextjs-portal")[0])||void 0===u?void 0:u.shadowRoot;v=null===(d=null===(h=null==e?void 0:e.getElementById)||void 0===h?void 0:h.call(e,"nextjs__container_errors_desc"))||void 0===d?void 0:d.innerHTML,E=null===(p=null===(f=null==e?void 0:e.getElementById)||void 0===f?void 0:f.call(e,"nextjs__container_errors_label"))||void 0===p?void 0:p.innerHTML,_=null===(y=null===(g=null===(m=null==e?void 0:e.querySelectorAll)||void 0===m?void 0:m.call(e,".nextjs-container-errors-body"))||void 0===g?void 0:g[0])||void 0===y?void 0:y.innerHTML,T=Boolean(v)}T?(null==v?void 0:v.includes("Hydration failed"))?e.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.LATEST_HYDRATION_ERROR_STATUS,status:c.STORYBOARD_HYDRATION_STATUS.ERROR,errorDescr:v,errorLabel:E,errorBody:_}):e.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.LATEST_HYDRATION_ERROR_STATUS,status:c.STORYBOARD_HYDRATION_STATUS.OTHER_ERROR,errorDescr:v,errorLabel:E,errorBody:_}):e.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.LATEST_HYDRATION_ERROR_STATUS,status:c.STORYBOARD_HYDRATION_STATUS.NO_ERROR})},window.triggerDragStart=(e,t)=>{const n=(0,r.getMemoryStorageItem)(r.SELECTED_ELEMENT_KEY),i=(0,r.getMemoryStorageItem)(r.ELEMENT_KEY_TO_NAV_NODE)||{};if(!n)return;const s=i[n],o=A(s),h={pageX:-1e4,pageY:-1e4,offsetX:0,offsetY:0,dragging:!0,selectedParentDisplay:(0,l.cssEval)(o,"display"),selectedParentFlexDirection:(0,l.cssEval)(o,"flex-direction")};(0,r.setMemoryStorageItem)("mouseDragContext",h),e.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.DRAG_START_EVENT,event:h,outerHTML:(0,u.getFullHtmlWithElement)([n])}),(0,a.updateOutlines)(e,t)},window.triggerDragCancel=(e,t)=>{(0,r.setMemoryStorageItem)("mouseDragContext",null),e.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.DRAG_CANCEL_EVENT,event:{}}),(0,a.updateOutlines)(e,t)},window.setIsFlushing=(e,t,i)=>{const o=(0,r.getMemoryStorageItem)(r.IS_FLUSHING);(0,r.setMemoryStorageItem)(r.IS_FLUSHING,i),i&&!o&&(()=>{const e=[];(0,s.default)(`*[class*=${n.TEMPO_INSTANT_UPDATE_STYLING_PREFIX}]`).each((t,r)=>{(r.getAttribute("class")||"").split(" ").forEach(t=>{t.startsWith(n.TEMPO_INSTANT_UPDATE_STYLING_PREFIX)&&e.push(t)})}),(0,s.default)(`*[${n.TEMPO_DELETE_AFTER_REFRESH}=true]`).attr(n.TEMPO_QUEUE_DELETE_AFTER_HOT_RELOAD,"true"),(0,r.setMemoryStorageItem)(u.ADD_CLASS_INSTANT_UPDATE_QUEUE,[]),(0,r.setMemoryStorageItem)("POST_HOT_RELOAD_CLEAR",{classesToDelete:e})})()},window.captureComponentPreview=(t,r,i,s)=>e(void 0,void 0,void 0,function*(){let e;try{const t=window.location.pathname.match(/\/canvas\/([^\/]+)/);e=t?t[1]:void 0}catch(o){}try{yield new Promise(e=>{if("complete"===document.readyState)e(void 0);else{const t=()=>{window.removeEventListener("load",t),e(void 0)};window.addEventListener("load",t),setTimeout(()=>{window.removeEventListener("load",t),e(void 0)},2e3)}});let o=null;i?o=(0,n.getNodeForElementKey)(i):s&&(o=document.querySelector(`.${s}`)),o||(o=document.querySelector("[tempoelementid]"),o||(o=document.querySelector("[data-tempo-root]")||document.body));const a=o.getBoundingClientRect(),l=Math.max(a.width,80),u=Math.max(a.height,60),h=800,d=600,f=Math.min(l,h),p={quality:.8,pixelRatio:2,backgroundColor:"#ffffff",width:f,height:Math.min(u,d),style:{transform:"scale(1)",transformOrigin:"top left"},filter:e=>"SCRIPT"!==e.tagName&&"STYLE"!==e.tagName&&(!e.classList||!e.classList.contains("tempo-outline")&&!e.classList.contains("tempo-ui-overlay")&&!e.classList.contains(n.TEMPO_INSTANT_DIV_DRAW_CLASS)),skipFonts:!0,fetchRequestInit:{mode:"no-cors"}},m=yield(0,v.toJpeg)(o,p);t.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.COMPONENT_PREVIEW_CAPTURED,imageDataUrl:m,componentKey:i,codebaseId:s,storyboardId:r,canvasId:e})}catch(o){t.postMessage({id:c.FIXED_IFRAME_MESSAGE_IDS.COMPONENT_PREVIEW_ERROR,error:null==o?void 0:o.message,componentKey:i,codebaseId:s,storyboardId:r,canvasId:e})}})},fm}function fv(){if(cv)return sm;cv=1;var e=sm&&sm.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})},t=sm&&sm.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sm,"__esModule",{value:!0}),sm.initChannelMessaging=void 0;const n=am(),r=t((lm||(lm=1,i=cm,s=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function i(e,t){if(!r[e]){r[e]={};for(var n=0;n<e.length;n++)r[e][e.charAt(n)]=n}return r[e][t]}var s={compressToBase64:function(e){if(null==e)return"";var n=s._compress(e,6,function(e){return t.charAt(e)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:s._decompress(e.length,32,function(n){return i(t,e.charAt(n))})},compressToUTF16:function(t){return null==t?"":s._compress(t,15,function(t){return e(t+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:s._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=s.compress(e),n=new Uint8Array(2*t.length),r=0,i=t.length;r<i;r++){var o=t.charCodeAt(r);n[2*r]=o>>>8,n[2*r+1]=o%256}return n},decompressFromUint8Array:function(t){if(null==t)return s.decompress(t);for(var n=new Array(t.length/2),r=0,i=n.length;r<i;r++)n[r]=256*t[2*r]+t[2*r+1];var o=[];return n.forEach(function(t){o.push(e(t))}),s.decompress(o.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":s._compress(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),s._decompress(e.length,32,function(t){return i(n,e.charAt(t))}))},compress:function(t){return s._compress(t,16,function(t){return e(t)})},_compress:function(e,t,n){if(null==e)return"";var r,i,s,o={},a={},l="",c="",u="",h=2,d=3,f=2,p=[],m=0,g=0;for(s=0;s<e.length;s+=1)if(l=e.charAt(s),Object.prototype.hasOwnProperty.call(o,l)||(o[l]=d++,a[l]=!0),c=u+l,Object.prototype.hasOwnProperty.call(o,c))u=c;else{if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(r=0;r<f;r++)m<<=1,g==t-1?(g=0,p.push(n(m)),m=0):g++;for(i=u.charCodeAt(0),r=0;r<8;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1}else{for(i=1,r=0;r<f;r++)m=m<<1|i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i=0;for(i=u.charCodeAt(0),r=0;r<16;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1}0==--h&&(h=Math.pow(2,f),f++),delete a[u]}else for(i=o[u],r=0;r<f;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1;0==--h&&(h=Math.pow(2,f),f++),o[c]=d++,u=String(l)}if(""!==u){if(Object.prototype.hasOwnProperty.call(a,u)){if(u.charCodeAt(0)<256){for(r=0;r<f;r++)m<<=1,g==t-1?(g=0,p.push(n(m)),m=0):g++;for(i=u.charCodeAt(0),r=0;r<8;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1}else{for(i=1,r=0;r<f;r++)m=m<<1|i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i=0;for(i=u.charCodeAt(0),r=0;r<16;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1}0==--h&&(h=Math.pow(2,f),f++),delete a[u]}else for(i=o[u],r=0;r<f;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1;0==--h&&(h=Math.pow(2,f),f++)}for(i=2,r=0;r<f;r++)m=m<<1|1&i,g==t-1?(g=0,p.push(n(m)),m=0):g++,i>>=1;for(;;){if(m<<=1,g==t-1){p.push(n(m));break}g++}return p.join("")},decompress:function(e){return null==e?"":""==e?null:s._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,n,r){var i,s,o,a,l,c,u,h=[],d=4,f=4,p=3,m="",g=[],y={val:r(0),position:n,index:1};for(i=0;i<3;i+=1)h[i]=i;for(o=0,l=Math.pow(2,2),c=1;c!=l;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),o|=(a>0?1:0)*c,c<<=1;switch(o){case 0:for(o=0,l=Math.pow(2,8),c=1;c!=l;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),o|=(a>0?1:0)*c,c<<=1;u=e(o);break;case 1:for(o=0,l=Math.pow(2,16),c=1;c!=l;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),o|=(a>0?1:0)*c,c<<=1;u=e(o);break;case 2:return""}for(h[3]=u,s=u,g.push(u);;){if(y.index>t)return"";for(o=0,l=Math.pow(2,p),c=1;c!=l;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),o|=(a>0?1:0)*c,c<<=1;switch(u=o){case 0:for(o=0,l=Math.pow(2,8),c=1;c!=l;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),o|=(a>0?1:0)*c,c<<=1;h[f++]=e(o),u=f-1,d--;break;case 1:for(o=0,l=Math.pow(2,16),c=1;c!=l;)a=y.val&y.position,y.position>>=1,0==y.position&&(y.position=n,y.val=r(y.index++)),o|=(a>0?1:0)*c,c<<=1;h[f++]=e(o),u=f-1,d--;break;case 2:return g.join("")}if(0==d&&(d=Math.pow(2,p),p++),h[u])m=h[u];else{if(u!==f)return null;m=s+s.charAt(0)}g.push(m),h[f++]=s+m.charAt(0),s=m,0==--d&&(d=Math.pow(2,p),p++)}}};return s}(),null!=i?i.exports=s:"undefined"!=typeof angular&&null!=angular&&angular.module("LZString",[]).factory("LZString",function(){return s})),cm.exports));var i,s;const o=t(function(){if(um)return hm;um=1,Object.defineProperty(hm,"__esModule",{value:!0});const e={init:()=>{!function(e,t){var n,r,i,s;t.__SV||(window.posthog=t,t._i=[],t.init=function(o,a,l){function c(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}(i=e.createElement("script")).type="text/javascript",i.async=!0,i.src=a.api_host+"/static/array.js",(s=e.getElementsByTagName("script")[0]).parentNode.insertBefore(i,s);var u=t;for(void 0!==l?u=t[l]=[]:l="posthog",u.people=u.people||[],u.toString=function(e){var t="posthog";return"posthog"!==l&&(t+="."+l),e||(t+=" (stub)"),t},u.people.toString=function(){return u.toString(1)+".people (stub)"},n="capture identify alias people.set people.set_once set_config register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing reset isFeatureEnabled onFeatureFlags getFeatureFlag getFeatureFlagPayload reloadFeatureFlags group updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures getActiveMatchingSurveys getSurveys getNextSurveyStep onSessionId".split(" "),r=0;r<n.length;r++)c(u,n[r]);t._i.push([o,a,l])},t.__SV=1)}(document,window.posthog||[]),posthog.init("phc_jjpEvBVV0R2mp44ePAL8Yt4jdtX5HW1lc493rkpUwwa",{api_host:"https://us.i.posthog.com",person_profiles:"identified_only",session_recording:{recordCrossOriginIframes:!0,maskAllInputs:!1,maskInputOptions:{password:!0}}})}};return hm.default=e,hm}()),a=dv();if("undefined"!=typeof window&&window.location.href.includes("framework=VITE")){const e=e=>{const t=customElements.get("vite-error-overlay");if(!t)return;const n=new t(e);document.body.appendChild(n)};window.addEventListener("error",e),window.addEventListener("unhandledrejection",({reason:t})=>e(t))}const l=(...e)=>{var t;null===(t=window.location.search)||void 0===t||t.includes("debugLog=true")};return sm.initChannelMessaging=function(){var t;if((0,a.initChannelMessagingFunctions)(),window.location.hostname.endsWith("dev.tempolabs.ai")&&!window.location.hostname.endsWith("staging-dev.tempolabs.ai")&&o.default&&o.default.init(),window.addEventListener("message",e=>{const{data:t}=e;if("GET_STATE_AND_PROPS"===t.type){const{componentName:e}=t;let r="#root";document.querySelector(r)||(r="#__next");const i=(0,n.getRootReactElement)(),s=(0,n.buildNodeTree)(i,null),o=(0,n.findElementInTree)(s,t=>!(!e||t.name!=e));if(!(null==o?void 0:o.length)){return}o.length;(e=>{l();const n={tempoelementid:!0,"data-testid":!0},r={};e.props&&Object.keys(e.props).forEach(t=>{n[t]||("object"==typeof e.props[t]?r[t]="TEMPO_OBJECT_TYPE":"function"==typeof e.props[t]?r[t]="TEMPO_FUNCTION_TYPE":r[t]=e.props[t])});let i={};e.state&&("string"==typeof e.state?i={state:e.state}:Object.keys(e.state).forEach(t=>{"object"==typeof e.state[t]?i[t]="TEMPO_OBJECT_TYPE":"function"==typeof e.state[t]?i[t]="TEMPO_FUNCTION_TYPE":i[t]=e.state[t]}));t.id})(o[0])}}),null===(t=window.location.search)||void 0===t?void 0:t.includes("storyboard=true")){let e=document.getElementById("root");e||(e=document.getElementById("__next")),e&&(window.location.search.includes("type=STORY")||window.location.search.includes("type=COMPONENT")?[e,document.body,document.documentElement].forEach(e=>{e.style.backgroundColor="transparent",e.style.width="100vw",e.style.height="100vh",e.style.overflow="hidden"}):(e.style.width="100vw",e.style.height="100vh"))}!function(){let t=null,i=null;window.addEventListener("message",e=>{if("init"===e.data)t=e.ports[0],t.onmessage=o;else{var n=e.data;o({data:n})}});const s=r=>e(this,void 0,void 0,function*(){if(!r.payload.componentName){const e={id:r.id,error:"No component name"};return void(null==t||t.postMessage(e))}const e=(0,n.getRootReactElement)(),i=(0,n.buildNodeTree)(e,null),{isComponent:s,componentName:o,tempoElementID:a,componentElementId:c}=r.payload;if(!s&&!a){const e={id:r.id,error:"Could not find element"};return void(null==t||t.postMessage(e))}if(s&&!a&&!o){const e={id:r.id,error:"Could not find component"};return void(null==t||t.postMessage(e))}const u=(0,n.findElementInTree)(i,e=>{var t,n,r,i,l,u;if(!s){if(a&&(null===(r=e.props)||void 0===r?void 0:r.tempoelementid)!==a&&(null===(i=e.props)||void 0===i?void 0:i["data-testid"])!==a)return!1;if(c){let t=e.parent,n=!1;for(;t;){if((null===(l=t.props)||void 0===l?void 0:l.tempoelementid)===c||(null===(u=t.props)||void 0===u?void 0:u["data-testid"])===c){n=!0;break}t=t.parent}if(!n)return!1}return!0}return!(!a||(null===(t=e.props)||void 0===t?void 0:t.tempoelementid)!=a&&(null===(n=e.props)||void 0===n?void 0:n["data-testid"])!=a)||!(a||!o||e.name!=o)});if(!(null==u?void 0:u.length)){l();const e={id:r.id,error:"No component found"};return void(null==t||t.postMessage(e))}u.length;(e=>{l();const n={};e.props&&Object.keys(e.props).forEach(t=>{"object"==typeof e.props[t]?n[t]="TEMPO_OBJECT_TYPE":"function"==typeof e.props[t]?n[t]="TEMPO_FUNCTION_TYPE":n[t]=e.props[t]});let i={};e.state&&("string"==typeof e.state?i={state:e.state}:Object.keys(e.state).forEach(t=>{"object"==typeof e.state[t]?i[t]="TEMPO_OBJECT_TYPE":"function"==typeof e.state[t]?i[t]="TEMPO_FUNCTION_TYPE":i[t]=e.state[t]}));const s={id:r.id,props:n,state:i};l(),null==t||t.postMessage(s)})(u[0])}),o=n=>e(this,void 0,void 0,function*(){var e,o;try{const a=n.data,c=Object.assign({},a);(null===(e=null==a?void 0:a.payload)||void 0===e?void 0:e.compressedArgs)&&(c.payload=Object.assign(Object.assign({},a.payload),{compressedArgs:"COMPRESSED"}));const u=["initProject","setNewLookups","processRulesForSelectedElement"];if((null===(o=null==a?void 0:a.payload)||void 0===o?void 0:o.functionName)&&u.includes(a.payload.functionName)&&(c.payload=Object.assign(Object.assign({},a.payload),{args:"ARGS_SKIPPED"})),l(JSON.stringify(c)),!a||!a.payload)return void l();if(!a.id)return void l();if("inspectElement"===a.type)s(a);else if("executeFunction"===a.type){const e=window[a.payload.functionName];if("function"==typeof e){let n=a.payload.args;if(a.payload.compressedArgs&&(n=JSON.parse(r.default.decompress(a.payload.compressedArgs))),"initProject"===a.payload.functionName&&(i=n[0],n=n.slice(1)),a.payload.args){const r=e(t,i,...n);r instanceof Promise&&(yield r)}else{const n=e(t,i);n instanceof Promise&&(yield n)}}}}catch(a){}})}()},sm}(hv||(hv=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TempoDevtools=void 0;var t=function(){if(uv)return im;uv=1,Object.defineProperty(im,"__esModule",{value:!0}),im.TempoDevtools=void 0;const e=fv();return im.TempoDevtools={state:{dependencies:{LzString:null},env:{}},init:function(t={}){"undefined"!=typeof window&&(window.TEMPO_DEVTOOLS_INIT||(window.TEMPO_DEVTOOLS_NPM_INIT=!0,t&&(this.state.env=Object.assign({},t)),(0,e.initChannelMessaging)()))}},im}();Object.defineProperty(e,"TempoDevtools",{enumerable:!0,get:function(){return t.TempoDevtools}})}(rm)),rm).TempoDevtools.init();J.createRoot(document.getElementById("root")).render(e.jsx(w.StrictMode,{children:e.jsx(N,{basename:"/BengalBay/",children:e.jsx(tm,{})})}));export{Mp as A,oe as B,we as C,Dp as I,Rp as N,he as S,_e as a,se as b,ie as c,wp as d,Pp as e,Tf as f,_p as g,gp as h,mp as i,ge as j,pe as k,Se as l,ve as m,Ce as n,ip as o,Zf as q,yp as s,ne as u,tp as w};
