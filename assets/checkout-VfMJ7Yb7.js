import{B as e,E as s,m as a,j as n,i as t,G as r,P as i,p as l,H as d,q as c,r as o,J as m,K as h}from"./ui-CQezrcTP.js";import{r as x,u}from"./router-BoIKchTz.js";import{c as p,j,I as g,B as y,u as v,d as b,S as f,f as N,g as k,h as w,s as C}from"./index-DaG3KD5Y.js";import{T as S,a as B,b as P,c as I}from"./tabs-BSFhkB7E.js";import{C as F,b as D,d as _,a as O}from"./card-B9Ddxcuc.js";import{L as A}from"./label-CtAlnIsD.js";import{S as T,a as L,b as M,c as $,d as R}from"./select-CDf8oQjm.js";import{D as U,a as q,b as E,c as V,d as Y}from"./dialog-ZEpMgP2a.js";import{b as G,y as J,t as K,S as H,C as W}from"./icons-DJh_lpvr.js";import"./vendor-Cfs_Iq82.js";import"./utils-BLjywKrO.js";var z="Radio",[Q,X]=t(z),[Z,ee]=Q(z),se=x.forwardRef((e,s)=>{const{__scopeRadio:a,name:t,checked:r=!1,required:d,disabled:o,value:m="on",onCheck:h,...u}=e,[p,j]=x.useState(null),g=l(s,e=>j(e)),y=x.useRef(!1),v=!p||Boolean(p.closest("form"));return n.jsxs(Z,{scope:a,checked:r,disabled:o,children:[n.jsx(i.button,{type:"button",role:"radio","aria-checked":r,"data-state":re(r),"data-disabled":o?"":void 0,disabled:o,value:m,...u,ref:g,onClick:c(e.onClick,e=>{r||null==h||h(),v&&(y.current=e.isPropagationStopped(),y.current||e.stopPropagation())})}),v&&n.jsx(te,{control:p,bubbles:!y.current,name:t,value:m,checked:r,required:d,disabled:o,style:{transform:"translateX(-100%)"}})]})});se.displayName=z;var ae="RadioIndicator",ne=x.forwardRef((e,s)=>{const{__scopeRadio:a,forceMount:t,...r}=e,l=ee(ae,a);return n.jsx(o,{present:t||l.checked,children:n.jsx(i.span,{"data-state":re(l.checked),"data-disabled":l.disabled?"":void 0,...r,ref:s})})});ne.displayName=ae;var te=e=>{const{control:s,checked:a,bubbles:t=!0,...r}=e,i=x.useRef(null),l=m(a),d=h(s);return x.useEffect(()=>{const e=i.current,s=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(s,"checked").set;if(l!==a&&n){const s=new Event("click",{bubbles:t});n.call(e,a),e.dispatchEvent(s)}},[l,a,t]),n.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:a,...r,tabIndex:-1,ref:i,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function re(e){return e?"checked":"unchecked"}var ie=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],le="RadioGroup",[de,ce]=t(le,[e,X]),oe=e(),me=X(),[he,xe]=de(le),ue=x.forwardRef((e,t)=>{const{__scopeRadioGroup:l,name:d,defaultValue:c,value:o,required:m=!1,disabled:h=!1,orientation:x,dir:u,loop:p=!0,onValueChange:j,...g}=e,y=oe(l),v=s(u),[b,f]=a({prop:o,defaultProp:c,onChange:j});return n.jsx(he,{scope:l,name:d,required:m,disabled:h,value:b,onValueChange:f,children:n.jsx(r,{asChild:!0,...y,orientation:x,dir:v,loop:p,children:n.jsx(i.div,{role:"radiogroup","aria-required":m,"aria-orientation":x,"data-disabled":h?"":void 0,dir:v,...g,ref:t})})})});ue.displayName=le;var pe="RadioGroupItem",je=x.forwardRef((e,s)=>{const{__scopeRadioGroup:a,disabled:t,...r}=e,i=xe(pe,a),o=i.disabled||t,m=oe(a),h=me(a),u=x.useRef(null),p=l(s,u),j=i.value===r.value,g=x.useRef(!1);return x.useEffect(()=>{const e=e=>{ie.includes(e.key)&&(g.current=!0)},s=()=>g.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",s),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",s)}},[]),n.jsx(d,{asChild:!0,...m,focusable:!o,active:j,children:n.jsx(se,{disabled:o,required:i.required,checked:j,...h,...r,name:i.name,ref:p,onCheck:()=>i.onValueChange(r.value),onKeyDown:c(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:c(r.onFocus,()=>{var e;g.current&&(null==(e=u.current)||e.click())})})})});je.displayName=pe;var ge=x.forwardRef((e,s)=>{const{__scopeRadioGroup:a,...t}=e,r=me(a);return n.jsx(ne,{...r,...t,ref:s})});ge.displayName="RadioGroupIndicator";var ye=ue,ve=je,be=ge;const fe=x.forwardRef(({className:e,...s},a)=>n.jsx(ye,{className:p("grid gap-2",e),...s,ref:a}));fe.displayName=ye.displayName;const Ne=x.forwardRef(({className:e,...s},a)=>n.jsx(ve,{ref:a,className:p("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...s,children:n.jsx(be,{className:"flex items-center justify-center",children:n.jsx(j,{className:"h-3.5 w-3.5 fill-primary"})})}));Ne.displayName=ve.displayName;const ke=({onSubmit:e,amount:s})=>{const[a,t]=x.useState(""),[r,i]=x.useState(""),[l,d]=x.useState(""),[c,o]=x.useState(""),[m,h]=x.useState(""),[u,p]=x.useState(!1),j=Array.from({length:12},(e,s)=>{const a=s+1;return a<10?`0${a}`:`${a}`}),v=(new Date).getFullYear(),b=Array.from({length:21},(e,s)=>`${v+s}`.slice(-2));return n.jsxs("form",{onSubmit:s=>{s.preventDefault(),e()},className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(A,{htmlFor:"cardNumber",children:"Card Number"}),n.jsx(g,{id:"cardNumber",value:a,onChange:e=>{const s=(e=>{const s=e.replace(/\s+/g,"").replace(/[^0-9]/gi,"").match(/\d{4,16}/g),a=s&&s[0]||"",n=[];for(let t=0,r=a.length;t<r;t+=4)n.push(a.substring(t,t+4));return n.length?n.join(" "):e})(e.target.value);t(s)},placeholder:"1234 5678 9012 3456",maxLength:19,required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(A,{htmlFor:"cardName",children:"Name on Card"}),n.jsx(g,{id:"cardName",value:r,onChange:e=>i(e.target.value),placeholder:"John Doe",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(A,{htmlFor:"expiryMonth",children:"Month"}),n.jsxs(T,{value:l,onValueChange:d,children:[n.jsx(L,{id:"expiryMonth",children:n.jsx(M,{placeholder:"MM"})}),n.jsx($,{children:j.map(e=>n.jsx(R,{value:e,children:e},e))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(A,{htmlFor:"expiryYear",children:"Year"}),n.jsxs(T,{value:c,onValueChange:o,children:[n.jsx(L,{id:"expiryYear",children:n.jsx(M,{placeholder:"YY"})}),n.jsx($,{children:b.map(e=>n.jsx(R,{value:e,children:e},e))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(A,{htmlFor:"cvv",children:"CVV"}),n.jsx(g,{id:"cvv",value:m,onChange:e=>h(e.target.value.replace(/\D/g,"")),placeholder:"123",maxLength:3,required:!0,type:"password"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[n.jsx("input",{type:"checkbox",id:"saveCard",checked:u,onChange:e=>p(e.target.checked),className:"rounded border-gray-300"}),n.jsx(A,{htmlFor:"saveCard",className:"text-sm text-gray-600",children:"Save this card securely for future payments (as per RBI guidelines)"})]}),n.jsx("div",{className:"pt-4",children:n.jsxs(y,{type:"submit",className:"w-full bg-amber-600 hover:bg-amber-700 text-white py-6 text-lg",children:["Pay ₹",s.toFixed(2)]})}),n.jsx("div",{className:"text-xs text-gray-500 text-center pt-2",children:"Your card details are secured with industry-standard encryption"})]})},we=[{id:"hdfc",name:"HDFC Bank",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/28/HDFC_Bank_Logo.svg/1200px-HDFC_Bank_Logo.svg.png"},{id:"icici",name:"ICICI Bank",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/89/ICICI_Bank_Logo.svg/1200px-ICICI_Bank_Logo.svg.png"},{id:"sbi",name:"State Bank of India",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/State_Bank_of_India_logo.svg/1200px-State_Bank_of_India_logo.svg.png"},{id:"axis",name:"Axis Bank",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Axis_Bank_logo.svg/1200px-Axis_Bank_logo.svg.png"},{id:"kotak",name:"Kotak Mahindra Bank",logo:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/61/Kotak_Mahindra_Bank_logo.svg/1200px-Kotak_Mahindra_Bank_logo.svg.png"}],Ce=["Airtel Payments Bank","AU Small Finance Bank","Bassien Catholic Co-Operative Bank","BNP Paribas","Bank of Bahrain and Kuwait","BOBCARD","Bank of Baroda Corporate","Bank of Baroda Retail","Bank of India","Bank of Maharashtra","Canara Bank","Catholic Syrian Bank","Central Bank","City Union Bank","Corporation Bank","Cosmos Co-op Bank","DCB Bank","Dena Bank","Deutsche Bank","Development Credit Bank","Dhanlaxmi Bank","Federal Bank","IDBI Bank","IDFC FIRST Bank","Indian Bank","Indian Overseas Bank","IndusInd Bank","Jammu and Kashmir Bank","Karnataka Bank","Karur Vysya Bank","Lakshmi Vilas Bank","Oriental Bank of Commerce","Punjab & Maharashtra Co-operative Bank","Punjab National Bank","RBL Bank","Saraswat Bank","South Indian Bank","Standard Chartered Bank","Syndicate Bank","UCO Bank","Union Bank of India","United Bank of India","Vijaya Bank","Yes Bank"],Se=({onSubmit:e,amount:s})=>{const[a,t]=x.useState(""),[r,i]=x.useState("");return n.jsxs("form",{onSubmit:s=>{s.preventDefault(),e()},className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-4",children:"Popular Banks"}),n.jsx(fe,{value:a,onValueChange:t,className:"grid grid-cols-2 gap-4",children:we.map(e=>n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ne,{value:e.id,id:e.id}),n.jsxs(A,{htmlFor:e.id,className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("img",{src:e.logo,alt:e.name,className:"h-6 w-6 object-contain"}),n.jsx("span",{children:e.name})]})]},e.id))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium mb-4",children:"Other Banks"}),n.jsxs(T,{value:r,onValueChange:e=>{i(e),t("")},children:[n.jsx(L,{children:n.jsx(M,{placeholder:"---Select Bank---"})}),n.jsx($,{className:"max-h-[200px]",children:Ce.map(e=>n.jsx(R,{value:e,children:e},e))})]})]}),n.jsx("div",{className:"pt-4",children:n.jsxs(y,{type:"submit",className:"w-full bg-amber-600 hover:bg-amber-700 text-white py-6 text-lg",disabled:!a&&!r,children:["Pay ₹",s.toFixed(2)]})}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This instrument has low success, use UPI or cards for better experience"})]})},Be=({onSubmit:e,amount:s})=>{const[a,t]=x.useState(""),[r]=x.useState("898"),i=s+10;return n.jsxs("form",{onSubmit:s=>{s.preventDefault(),a===r?e():alert("Invalid captcha. Please try again.")},className:"space-y-6",children:[n.jsx("div",{className:"bg-amber-50 p-4 rounded-md border border-amber-200",children:n.jsxs("p",{className:"text-amber-800",children:["Due to handling costs, a nominal fee of ₹",10," will be charged"]})}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"bg-green-100 p-2 rounded-md text-2xl font-bold text-green-800",children:r}),n.jsx(g,{value:a,onChange:e=>t(e.target.value),placeholder:"Enter the characters",required:!0,className:"flex-1"})]}),n.jsx("div",{className:"pt-4",children:n.jsx(y,{type:"submit",className:"w-full bg-amber-600 hover:bg-amber-700 text-white py-6 text-lg",children:"Confirm Order"})}),n.jsxs("div",{className:"text-xs text-gray-500 text-center pt-2",children:["Pay ₹",i.toFixed(2)," by cash when your order is delivered"]})]})},Pe=({onPaymentComplete:e})=>{const[s,a]=x.useState("upi"),[t,r]=x.useState(!1),[i,l]=x.useState(!1),[d,c]=x.useState(""),{cartTotal:o,cartItems:m,clearCart:h}=v(),{currentUser:p}=b(),j=u(),[g,S]=x.useState({minutes:15,seconds:0});x.useEffect(()=>{const e=setInterval(()=>{S(s=>s.seconds>0?{...s,seconds:s.seconds-1}:s.minutes>0?{minutes:s.minutes-1,seconds:59}:(clearInterval(e),s))},1e3);return()=>clearInterval(e)},[]);const B=()=>{if(0===m.length)return void j("/menu");r(!0);const a=(null==p?void 0:p.email)||"guest@example.com",n=(null==p?void 0:p.displayName)||"Guest User",t=`ORD-${Math.floor(1e6*Math.random())}`,i=(new Date).toISOString(),d=o+.05*o+9,h={id:t,date:i,items:m.map(e=>({...e,subtotal:e.price*e.quantity,purchaseTime:(new Date).toISOString()})),total:d,status:"Processing",userId:null==p?void 0:p.uid,userEmail:null==p?void 0:p.email,userName:(null==p?void 0:p.displayName)||"Guest User",paymentMethod:s,paymentStatus:"Completed",tax:.05*o,subtotal:o,protectFee:9},x={to:a,subject:`Order Confirmation #${t} - Bengal Bay`,message:`\n        Dear ${n},\n\n                  Thank you for your order at Bengal Bay!\n\n        Order ID: ${t}\n        Date: ${new Date(i).toLocaleString()}\n\n        Items:\n        ${m.map(e=>`\n        - ${e.name} (${e.quantity}x) - ₹${(e.price*e.quantity).toFixed(2)}\n          Item ID: ${e.id}\n          Unit Price: ₹${e.price.toFixed(2)}\n        `).join("")}\n\n        Subtotal: ₹${o.toFixed(2)}\n        Tax (5%): ₹${(.05*o).toFixed(2)}\n        Protect Fee: ₹9.00\n        Total: ₹${d.toFixed(2)}\n\n        Payment Method: ${s.charAt(0).toUpperCase()+s.slice(1)}\n        Payment Status: Completed\n\n        Your order has been received and is being processed.\n        You can track your order in the My Orders section of your profile.\n\n                  Thank you for choosing Bengal Bay!\n        \n        Best regards,\n                  The Bengal Bay Team\n      `};try{fetch("https://formsubmit.co/ajax/snresturent@gmail.com",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(x)})}catch(u){}if(p)try{const e=N(k,"orders");w(e,{...h,timestamp:C()});const s=`orders_${p.uid}`,a=localStorage.getItem(s),n=a?JSON.parse(a):[];n.unshift(h),localStorage.setItem(s,JSON.stringify(n))}catch(u){const e=`orders_${p.uid}`,s=localStorage.getItem(e),a=s?JSON.parse(s):[];a.unshift(h),localStorage.setItem(e,JSON.stringify(a))}c(t),setTimeout(()=>{r(!1),l(!0),e()},2e3)},P=e=>`₹${e.toFixed(2)}`,I=.05*o,A=o+I+9,T=()=>{switch(s){case"upi":return n.jsxs("div",{className:"flex flex-col items-center gap-4 py-4",children:[n.jsx("img",{src:"/assets/images/QR.webp",alt:"Scan to pay via UPI",className:"h-40 w-40 object-contain border rounded-lg shadow"}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"UPI ID: "}),n.jsx("span",{className:"bg-gray-100 px-2 py-1 rounded text-amber-700 select-all",children:"9474748449@axl"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Scan the QR code or use the UPI ID above to pay the amount."}),n.jsxs(y,{type:"submit",className:"w-full bg-amber-600 hover:bg-amber-700 text-white py-6 text-lg mt-4",onClick:B,children:["Pay ₹",A.toFixed(2)]})]});case"card":return n.jsx(ke,{onSubmit:B,amount:A});case"netbanking":return n.jsx(Se,{onSubmit:B,amount:A});case"cod":return n.jsx(Be,{onSubmit:B,amount:A});case"wallets":return n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex flex-col space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/24/Paytm_Logo_%28standalone%29.svg/2560px-Paytm_Logo_%28standalone%29.svg.png",alt:"Paytm",className:"h-8 w-8 object-contain"}),n.jsx("span",{children:"Paytm"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f2/Google_Pay_Logo.svg/512px-Google_Pay_Logo.svg.png",alt:"Google Pay",className:"h-8 w-8 object-contain"}),n.jsx("span",{children:"Google Pay"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/71/PhonePe_Logo.svg/1200px-PhonePe_Logo.svg.png",alt:"PhonePe",className:"h-8 w-8 object-contain"}),n.jsx("span",{children:"PhonePe"})]}),n.jsxs(y,{type:"submit",className:"w-full bg-amber-600 hover:bg-amber-700 text-white py-6 text-lg mt-4",onClick:B,children:["Pay ₹",A.toFixed(2)]})]})});default:return n.jsx("div",{className:"p-4 text-center",children:n.jsx("p",{children:"Please select a payment method"})})}};return n.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"md:col-span-2 space-y-6",children:[n.jsxs(F,{children:[n.jsx(D,{children:n.jsxs(_,{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Payment Options"}),n.jsxs("div",{className:"text-sm font-normal text-amber-600 bg-amber-50 px-3 py-1 rounded-full",children:["Complete payment in ",g.minutes,":",g.seconds<10?`0${g.seconds}`:g.seconds]})]})}),n.jsx(O,{children:n.jsxs(fe,{value:s,onValueChange:a,className:"space-y-4 mb-6",children:[n.jsxs("div",{className:"border rounded-lg p-4 "+("upi"===s?"border-amber-500 bg-amber-50":""),children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ne,{value:"upi",id:"upi"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("label",{htmlFor:"upi",className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("div",{className:"bg-purple-100 p-1 rounded-full",children:n.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/UPI-Logo-vector.svg/1200px-UPI-Logo-vector.svg.png",alt:"UPI",className:"h-6 w-6 object-contain"})}),n.jsx("span",{className:"font-medium",children:"UPI"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-8",children:"Pay by any UPI app"})]})]}),"upi"===s&&n.jsx("div",{className:"mt-4",children:T()})]}),n.jsxs("div",{className:"border rounded-lg p-4 "+("wallets"===s?"border-amber-500 bg-amber-50":""),children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ne,{value:"wallets",id:"wallets"}),n.jsx("div",{children:n.jsxs("label",{htmlFor:"wallets",className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("div",{className:"bg-purple-100 p-1 rounded-full",children:n.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/24/Paytm_Logo_%28standalone%29.svg/2560px-Paytm_Logo_%28standalone%29.svg.png",alt:"Wallets",className:"h-6 w-6 object-contain"})}),n.jsx("span",{className:"font-medium",children:"Wallets"})]})})]}),"wallets"===s&&n.jsx("div",{className:"mt-4",children:T()})]}),n.jsxs("div",{className:"border rounded-lg p-4 "+("card"===s?"border-amber-500 bg-amber-50":""),children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ne,{value:"card",id:"card"}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"card",className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("div",{className:"bg-blue-100 p-1 rounded-full",children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-blue-600",children:[n.jsx("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),n.jsx("line",{x1:"2",x2:"22",y1:"10",y2:"10"})]})}),n.jsx("span",{className:"font-medium",children:"Credit / Debit / ATM Card"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-8",children:"Add and secure cards as per RBI guidelines"})]})]}),"card"===s&&n.jsx("div",{className:"mt-4",children:T()})]}),n.jsxs("div",{className:"border rounded-lg p-4 "+("netbanking"===s?"border-amber-500 bg-amber-50":""),children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ne,{value:"netbanking",id:"netbanking"}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"netbanking",className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("div",{className:"bg-green-100 p-1 rounded-full",children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-green-600",children:[n.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),n.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]})}),n.jsx("span",{className:"font-medium",children:"Net Banking"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-8",children:"This instrument has low success, use UPI or cards for better experience"})]})]}),"netbanking"===s&&n.jsx("div",{className:"mt-4",children:T()})]}),n.jsxs("div",{className:"border rounded-lg p-4 "+("cod"===s?"border-amber-500 bg-amber-50":""),children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ne,{value:"cod",id:"cod"}),n.jsx("div",{children:n.jsxs("label",{htmlFor:"cod",className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("div",{className:"bg-yellow-100 p-1 rounded-full",children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-yellow-600",children:[n.jsx("rect",{width:"20",height:"16",x:"2",y:"4",rx:"2"}),n.jsx("path",{d:"M12 4v16"})]})}),n.jsx("span",{className:"font-medium",children:"Cash on Delivery"})]})})]}),"cod"===s&&n.jsx("div",{className:"mt-4",children:T()})]})]})})]}),n.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-green-600",children:[n.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),n.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),n.jsx("span",{children:"Safe and Secure Payments. Easy returns. 100% Authentic products."})]})})]}),n.jsx("div",{className:"md:col-span-1",children:n.jsxs(F,{children:[n.jsx(D,{children:n.jsx(_,{children:"Price Details"})}),n.jsxs(O,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("span",{children:["Price (",m.length," items)"]}),n.jsx("span",{children:P(o)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Delivery Charges"}),n.jsx("span",{className:"text-green-600",children:"FREE"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Tax (5%)"}),n.jsx("span",{children:P(I)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Protect Promise Fee"}),n.jsxs("span",{children:["₹",9]})]})]}),n.jsx(f,{}),n.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[n.jsx("span",{children:"Amount Payable"}),n.jsx("span",{children:P(A)})]}),n.jsxs("div",{className:"text-green-600 font-medium",children:["Your Total Savings on this order ₹",(.1*o).toFixed(2)]}),n.jsxs("div",{className:"pt-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded-lg",children:[n.jsx("div",{className:"bg-blue-100 p-1 rounded-full",children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-blue-600",children:[n.jsx("rect",{width:"20",height:"14",x:"2",y:"5",rx:"2"}),n.jsx("line",{x1:"2",x2:"22",y1:"10",y2:"10"})]})}),n.jsx("span",{className:"text-sm",children:"Secure payment with end-to-end encryption"})]}),n.jsxs("div",{className:"flex items-center gap-2 p-3 border rounded-lg",children:[n.jsx("div",{className:"bg-red-100 p-1 rounded-full",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-red-600",children:n.jsx("path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"})})}),n.jsx("span",{className:"text-sm",children:"5% Unlimited Cashback on Credit Card"})]})]})]})]})}),n.jsx(U,{open:i,onOpenChange:l,children:n.jsxs(q,{className:"sm:max-w-md",children:[n.jsxs(E,{children:[n.jsx(V,{children:"Payment Successful!"}),n.jsx(Y,{children:"Your payment has been processed successfully."})]}),n.jsxs("div",{className:"flex flex-col items-center py-4",children:[n.jsx("div",{className:"rounded-full bg-green-100 p-3 mb-4",children:n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-8 w-8 text-green-600",children:[n.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),n.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]})}),n.jsxs("div",{className:"text-center space-y-3",children:[n.jsxs("p",{className:"font-medium",children:["Thank you for your order, ",(null==p?void 0:p.displayName)||"Guest","!"]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[n.jsx("p",{className:"font-medium",children:"Payment Details:"}),n.jsxs("p",{children:["Order ID: ",d]}),n.jsxs("p",{children:["Amount Paid: ₹",(o+.05*o+9).toFixed(2)]}),n.jsxs("p",{children:["Payment Method: "," ",s.charAt(0).toUpperCase()+s.slice(1)]}),n.jsx("p",{children:"Payment Status: Completed"})]}),n.jsx("p",{className:"text-sm text-gray-500",children:"A confirmation email has been sent to your registered email address. You can track your order in the My Orders section of your profile."})]})]}),n.jsx("div",{className:"flex justify-center",children:n.jsx(y,{onClick:()=>{l(!1),h(),j("/")},className:"bg-amber-600 hover:bg-amber-700 text-white",children:"Continue Shopping"})})]})})]})},Ie=[{code:"+91",country:"India"},{code:"+1",country:"USA"},{code:"+44",country:"UK"},{code:"+61",country:"Australia"},{code:"+86",country:"China"},{code:"+81",country:"Japan"},{code:"+49",country:"Germany"},{code:"+33",country:"France"},{code:"+7",country:"Russia"},{code:"+971",country:"UAE"}],Fe=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal"],De=({onSave:e,onCancel:s,initialAddress:a})=>{const[t,r]=x.useState("+91"),[i,l]=x.useState(a||{name:"",phone:"",alternatePhone:"",pincode:"",locality:"",address:"",city:"",state:"Maharashtra",landmark:"",addressType:"home"}),d=e=>{const{name:s,value:a}=e.target;l(e=>({...e,[s]:a}))};return n.jsxs("div",{className:"p-4",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Edit Address"}),n.jsxs("form",{onSubmit:s=>{s.preventDefault(),e(i)},className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(A,{htmlFor:"name",children:"Name"}),n.jsx(g,{id:"name",name:"name",value:i.name,onChange:d,placeholder:"Full Name",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(A,{htmlFor:"phone",children:"Phone Number"}),n.jsxs("div",{className:"flex",children:[n.jsxs(T,{value:t,onValueChange:r,children:[n.jsx(L,{className:"w-24",children:n.jsx(M,{placeholder:"+91"})}),n.jsx($,{children:Ie.map(e=>n.jsxs(R,{value:e.code,children:[e.code," ",e.country]},e.code))})]}),n.jsx(g,{id:"phone",name:"phone",value:i.phone,onChange:d,className:"flex-1 ml-2",placeholder:"10-digit mobile number",required:!0,pattern:"[0-9]{10}",maxLength:10})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(A,{htmlFor:"alternatePhone",children:"Alternate Phone (Optional)"}),n.jsxs("div",{className:"flex",children:[n.jsxs(T,{value:t,onValueChange:r,children:[n.jsx(L,{className:"w-24",children:n.jsx(M,{placeholder:"+91"})}),n.jsx($,{children:Ie.map(e=>n.jsxs(R,{value:e.code,children:[e.code," ",e.country]},e.code))})]}),n.jsx(g,{id:"alternatePhone",name:"alternatePhone",value:i.alternatePhone,onChange:d,className:"flex-1 ml-2",placeholder:"Alternate phone number",pattern:"[0-9]{10}",maxLength:10})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(A,{htmlFor:"pincode",children:"Pincode"}),n.jsx(g,{id:"pincode",name:"pincode",value:i.pincode,onChange:d,placeholder:"6-digit pincode",required:!0,pattern:"[0-9]{6}",maxLength:6})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(A,{htmlFor:"locality",children:"Locality/Area/Street"}),n.jsx(g,{id:"locality",name:"locality",value:i.locality,onChange:d,placeholder:"Locality, Area, Street",required:!0})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(A,{htmlFor:"address",children:"Address (Area and Street)"}),n.jsx(g,{id:"address",name:"address",value:i.address,onChange:d,placeholder:"House No., Building Name, Street Name",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(A,{htmlFor:"city",children:"City/District/Town"}),n.jsx(g,{id:"city",name:"city",value:i.city,onChange:d,placeholder:"City",required:!0})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(A,{htmlFor:"state",children:"State"}),n.jsxs(T,{value:i.state,onValueChange:e=>l(s=>({...s,state:e})),children:[n.jsx(L,{id:"state",children:n.jsx(M,{placeholder:"Select state"})}),n.jsx($,{children:Fe.map(e=>n.jsx(R,{value:e,children:e},e))})]})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx(A,{htmlFor:"landmark",children:"Landmark (Optional)"}),n.jsx(g,{id:"landmark",name:"landmark",value:i.landmark,onChange:d,placeholder:"Nearby landmark for easier navigation"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(A,{children:"Address Type"}),n.jsxs(fe,{value:i.addressType,onValueChange:e=>l(s=>({...s,addressType:e})),className:"flex space-x-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ne,{value:"home",id:"home"}),n.jsx(A,{htmlFor:"home",children:"Home (All day delivery)"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Ne,{value:"work",id:"work"}),n.jsx(A,{htmlFor:"work",children:"Work (Delivery between 10 AM - 5 PM)"})]})]})]}),n.jsxs(y,{type:"button",variant:"outline",className:"w-full",onClick:()=>{l({...i,locality:"Current Location Area",address:"123 Current Street",city:"Mumbai",state:"Maharashtra",pincode:"400001"})},children:[n.jsx(G,{className:"mr-2 h-4 w-4"}),"Use my current location"]}),n.jsxs("div",{className:"flex justify-end space-x-4 pt-4",children:[n.jsx(y,{type:"button",variant:"outline",onClick:s,children:"Cancel"}),n.jsx(y,{type:"submit",className:"bg-amber-600 hover:bg-amber-700 text-white",children:"Save and Deliver Here"})]})]})]})},_e=()=>{const{currentUser:e}=b(),{cartItems:s,cartTotal:a,clearCart:t}=v(),r=u(),[i,l]=x.useState("payment"),[d,c]=x.useState(!1),[o,m]=x.useState(""),[h,p]=x.useState(!1),[j,g]=x.useState(!1),[F,D]=x.useState({name:(null==e?void 0:e.displayName)||"Guest User",phone:"9876543210",pincode:"400001",locality:"Main Area",address:"123 Main Street",city:"Mumbai",state:"Maharashtra",landmark:"",addressType:"home"});x.useEffect(()=>{e||r("/login")},[e,r]),x.useEffect(()=>{0===s.length&&r("/menu")},[s,r]);return n.jsxs("div",{className:"container mx-auto py-10 px-4",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Checkout"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(G,{className:"h-5 w-5 text-gray-500"}),n.jsx("h2",{className:"text-xl font-semibold",children:"Delivery Address"})]}),n.jsxs(y,{variant:"outline",size:"sm",onClick:()=>p(!0),className:"flex items-center gap-2",children:[n.jsx(J,{className:"h-4 w-4"}),"Edit"]})]}),n.jsx("div",{className:"bg-white p-4 rounded-lg border mb-6",children:n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-semibold",children:F.name}),n.jsx("span",{className:"bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded",children:F.addressType.toUpperCase()})]}),n.jsx("p",{className:"text-gray-600",children:F.address}),n.jsxs("p",{className:"text-gray-600",children:[F.locality,", ",F.city,", ",F.state," -"," ",F.pincode]}),n.jsxs("p",{className:"text-gray-600",children:["Phone: ",F.phone]})]})})]}),n.jsx("div",{children:n.jsxs("div",{className:"bg-white p-4 rounded-lg border mb-6",children:[n.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Order Summary"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsxs("span",{children:["Items (",s.length,")"]}),n.jsxs("span",{children:["₹",a.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Delivery"}),n.jsx("span",{className:"text-green-600",children:"FREE"})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Tax (5%)"}),n.jsxs("span",{children:["₹",(.05*a).toFixed(2)]})]}),n.jsx(f,{}),n.jsxs("div",{className:"flex justify-between font-semibold",children:[n.jsx("span",{children:"Total"}),n.jsxs("span",{children:["₹",(a+.05*a).toFixed(2)]})]}),n.jsxs("div",{className:"text-green-600 text-sm mt-2",children:["Your Total Savings: ₹",(.1*a).toFixed(2)]})]})]})})]}),s.length>0?n.jsxs(S,{value:i,onValueChange:l,children:[n.jsx(B,{className:"grid w-full grid-cols-1 mb-8",children:n.jsxs(P,{value:"payment",className:"flex items-center gap-2",children:[n.jsx(K,{className:"h-4 w-4"}),"Payment Options"]})}),n.jsx(I,{value:"payment",children:n.jsx(Pe,{onPaymentComplete:async()=>{if(!j){g(!0);try{const r=`ORD-${Math.floor(1e6*Math.random())}`,i=(new Date).toISOString(),l=a+.05*a+9,d={id:r,date:i,items:s.map(e=>({...e,subtotal:e.price*e.quantity,purchaseTime:(new Date).toISOString()})),total:l,status:"Processing",userId:null==e?void 0:e.uid,userEmail:null==e?void 0:e.email,userName:(null==e?void 0:e.displayName)||F.name,shippingAddress:F,paymentMethod:"Online Payment",paymentStatus:"Completed",tax:.05*a,subtotal:a,protectFee:9,timestamp:C()};if(e){await w(N(k,"orders"),d);m(r);const o=`orders_${e.uid}`,h=localStorage.getItem(o),x=h?JSON.parse(h):[];x.unshift(d),localStorage.setItem(o,JSON.stringify(x)),localStorage.setItem("currentUserId",e.uid);const u={to:e.email,subject:`Order Confirmation #${r} - Bengal Bay`,message:`\n            Dear ${e.displayName||F.name},\n\n            Thank you for your order at Bengal Bay!\n\n            Order ID: ${r}\n            Date: ${new Date(i).toLocaleString()}\n\n            Items:\n            ${s.map(e=>`\n            - ${e.name} (${e.quantity}x) - ₹${(e.price*e.quantity).toFixed(2)}\n              Item ID: ${e.id}\n              Unit Price: ₹${e.price.toFixed(2)}\n            `).join("")}\n\n            Subtotal: ₹${a.toFixed(2)}\n            Tax (5%): ₹${(.05*a).toFixed(2)}\n            Protect Fee: ₹9.00\n            Total: ₹${l.toFixed(2)}\n\n            Shipping Address:\n            ${F.name}\n            ${F.address}\n            ${F.locality}, ${F.city}, ${F.state} - ${F.pincode}\n            Phone: ${F.phone}\n\n            Payment Method: Online Payment\n            Payment Status: Completed\n\n            Your order has been received and is being processed.\n            You can track your order in the My Orders section of your profile.\n\n            Thank you for choosing Bengal Bay!\n            \n            Best regards,\n            The Bengal Bay Team\n          `},p={...u,to:"snresturent@gmail.com"},j={...u,to:e.email};try{await fetch("https://formsubmit.co/ajax/snresturent@gmail.com",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(p)})}catch(n){}try{await fetch("https://formsubmit.co/ajax/"+e.email,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(j)})}catch(n){}c(!0),t()}}catch(r){alert("There was an error processing your order. Please try again.")}finally{g(!1)}}}})})]}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(H,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),n.jsx("p",{className:"text-gray-500",children:"Your cart is empty"}),n.jsx(y,{className:"mt-4 bg-amber-600 hover:bg-amber-700 text-white",onClick:()=>r("/menu"),children:"Browse Menu"})]}),n.jsx(U,{open:h,onOpenChange:p,children:n.jsx(q,{className:"sm:max-w-2xl",children:n.jsx(De,{initialAddress:F,onSave:e=>{D(e),p(!1)},onCancel:()=>p(!1)})})}),n.jsx(U,{open:d,onOpenChange:c,children:n.jsxs(q,{className:"sm:max-w-md",children:[n.jsxs(E,{children:[n.jsx(V,{children:"Order Confirmed!"}),n.jsx(Y,{children:"Your order has been successfully placed."})]}),n.jsxs("div",{className:"flex flex-col items-center py-4",children:[n.jsx("div",{className:"rounded-full bg-green-100 p-3 mb-4",children:n.jsx(W,{className:"h-8 w-8 text-green-600"})}),n.jsxs("div",{className:"text-center space-y-3",children:[n.jsxs("p",{className:"font-medium",children:["Thank you for your order,"," ",(null==e?void 0:e.displayName)||F.name,"!"]}),n.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[n.jsx("p",{className:"font-medium",children:"Order Details:"}),n.jsxs("p",{children:["Order ID: ",o]}),n.jsxs("p",{children:["Items: ",s.length]}),n.jsx("div",{className:"mt-2",children:s.map(e=>n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("img",{src:e.image,alt:e.name,className:"w-10 h-10 object-cover rounded"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium",children:e.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:["₹",e.price.toFixed(2)," x ",e.quantity]})]}),n.jsxs("p",{className:"font-medium",children:["₹",(e.price*e.quantity).toFixed(2)]})]},e.id))}),n.jsxs("div",{className:"border-t pt-2 mt-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("span",{children:["₹",a.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Tax (5%):"}),n.jsxs("span",{children:["₹",(.05*a).toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Protect Fee:"}),n.jsx("span",{children:"₹9.00"})]}),n.jsxs("div",{className:"flex justify-between font-medium mt-1",children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{children:["₹",(a+.05*a+9).toFixed(2)]})]})]})]}),n.jsxs("p",{className:"text-sm text-gray-500",children:["A confirmation email has been sent to ",null==e?void 0:e.email,". You can track your order in the My Orders section of your profile."]})]})]}),n.jsx("div",{className:"flex justify-center",children:n.jsx(y,{onClick:()=>{c(!1),t(),r("/")},className:"bg-amber-600 hover:bg-amber-700 text-white",children:"Continue Shopping"})})]})})]})};export{_e as default};
